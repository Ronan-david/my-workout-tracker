(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Kl(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Ct={},Rs=[],Je=()=>{},k_=()=>!1,Nr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Gl=e=>e.startsWith("onUpdate:"),re=Object.assign,Xl=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},T_=Object.prototype.hasOwnProperty,_t=(e,t)=>T_.call(e,t),K=Array.isArray,Ds=e=>mo(e)==="[object Map]",Lr=e=>mo(e)==="[object Set]",dh=e=>mo(e)==="[object Date]",tt=e=>typeof e=="function",$t=e=>typeof e=="string",en=e=>typeof e=="symbol",Rt=e=>e!==null&&typeof e=="object",Ef=e=>(Rt(e)||tt(e))&&tt(e.then)&&tt(e.catch),kf=Object.prototype.toString,mo=e=>kf.call(e),I_=e=>mo(e).slice(8,-1),Tf=e=>mo(e)==="[object Object]",Ql=e=>$t(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ci=Kl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Fr=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},M_=/-(\w)/g,Ae=Fr(e=>e.replace(M_,(t,n)=>n?n.toUpperCase():"")),P_=/\B([A-Z])/g,xs=Fr(e=>e.replace(P_,"-$1").toLowerCase()),Br=Fr(e=>e.charAt(0).toUpperCase()+e.slice(1)),ya=Fr(e=>e?`on${Br(e)}`:""),Bn=(e,t)=>!Object.is(e,t),Go=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},ol=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},If=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let fh;const Wr=()=>fh||(fh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Hr(e){if(K(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=$t(s)?O_(s):Hr(s);if(i)for(const o in i)t[o]=i[o]}return t}else if($t(e)||Rt(e))return e}const A_=/;(?![^(]*\))/g,R_=/:([^]+)/,D_=/\/\*[^]*?\*\//g;function O_(e){const t={};return e.replace(D_,"").split(A_).forEach(n=>{if(n){const s=n.split(R_);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function gs(e){let t="";if($t(e))t=e;else if(K(e))for(let n=0;n<e.length;n++){const s=gs(e[n]);s&&(t+=s+" ")}else if(Rt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const N_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",L_=Kl(N_);function Mf(e){return!!e||e===""}function F_(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=zr(e[s],t[s]);return n}function zr(e,t){if(e===t)return!0;let n=dh(e),s=dh(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=en(e),s=en(t),n||s)return e===t;if(n=K(e),s=K(t),n||s)return n&&s?F_(e,t):!1;if(n=Rt(e),s=Rt(t),n||s){if(!n||!s)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const r in e){const a=e.hasOwnProperty(r),l=t.hasOwnProperty(r);if(a&&!l||!a&&l||!zr(e[r],t[r]))return!1}}return String(e)===String(t)}function B_(e,t){return e.findIndex(n=>zr(n,t))}const Pf=e=>!!(e&&e.__v_isRef===!0),dt=e=>$t(e)?e:e==null?"":K(e)||Rt(e)&&(e.toString===kf||!tt(e.toString))?Pf(e)?dt(e.value):JSON.stringify(e,Af,2):String(e),Af=(e,t)=>Pf(t)?Af(e,t.value):Ds(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],o)=>(n[ba(s,o)+" =>"]=i,n),{})}:Lr(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>ba(n))}:en(t)?ba(t):Rt(t)&&!K(t)&&!Tf(t)?String(t):t,ba=(e,t="")=>{var n;return en(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let _e;class W_{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=_e,!t&&_e&&(this.index=(_e.scopes||(_e.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=_e;try{return _e=this,t()}finally{_e=n}}}on(){++this._on===1&&(this.prevScope=_e,_e=this)}off(){this._on>0&&--this._on===0&&(_e=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function H_(){return _e}let Tt;const va=new WeakSet;class Rf{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,_e&&_e.active&&_e.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,va.has(this)&&(va.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Of(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ph(this),Nf(this);const t=Tt,n=Be;Tt=this,Be=!0;try{return this.fn()}finally{Lf(this),Tt=t,Be=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)tc(t);this.deps=this.depsTail=void 0,ph(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?va.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){rl(this)&&this.run()}get dirty(){return rl(this)}}let Df=0,Si,Ei;function Of(e,t=!1){if(e.flags|=8,t){e.next=Ei,Ei=e;return}e.next=Si,Si=e}function Jl(){Df++}function Zl(){if(--Df>0)return;if(Ei){let t=Ei;for(Ei=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Si;){let t=Si;for(Si=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Nf(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Lf(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),tc(s),z_(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function rl(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ff(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ff(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Vi)||(e.globalVersion=Vi,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!rl(e))))return;e.flags|=2;const t=e.dep,n=Tt,s=Be;Tt=e,Be=!0;try{Nf(e);const i=e.fn(e._value);(t.version===0||Bn(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Tt=n,Be=s,Lf(e),e.flags&=-3}}function tc(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)tc(o,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function z_(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Be=!0;const Bf=[];function xn(){Bf.push(Be),Be=!1}function wn(){const e=Bf.pop();Be=e===void 0?!0:e}function ph(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Tt;Tt=void 0;try{t()}finally{Tt=n}}}let Vi=0;class V_{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ec{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Tt||!Be||Tt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Tt)n=this.activeLink=new V_(Tt,this),Tt.deps?(n.prevDep=Tt.depsTail,Tt.depsTail.nextDep=n,Tt.depsTail=n):Tt.deps=Tt.depsTail=n,Wf(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Tt.depsTail,n.nextDep=void 0,Tt.depsTail.nextDep=n,Tt.depsTail=n,Tt.deps===n&&(Tt.deps=s)}return n}trigger(t){this.version++,Vi++,this.notify(t)}notify(t){Jl();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Zl()}}}function Wf(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Wf(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const al=new WeakMap,ds=Symbol(""),ll=Symbol(""),$i=Symbol("");function ee(e,t,n){if(Be&&Tt){let s=al.get(e);s||al.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new ec),i.map=s,i.key=n),i.track()}}function fn(e,t,n,s,i,o){const r=al.get(e);if(!r){Vi++;return}const a=l=>{l&&l.trigger()};if(Jl(),t==="clear")r.forEach(a);else{const l=K(e),c=l&&Ql(n);if(l&&n==="length"){const h=Number(s);r.forEach((u,d)=>{(d==="length"||d===$i||!en(d)&&d>=h)&&a(u)})}else switch((n!==void 0||r.has(void 0))&&a(r.get(n)),c&&a(r.get($i)),t){case"add":l?c&&a(r.get("length")):(a(r.get(ds)),Ds(e)&&a(r.get(ll)));break;case"delete":l||(a(r.get(ds)),Ds(e)&&a(r.get(ll)));break;case"set":Ds(e)&&a(r.get(ds));break}}Zl()}function Es(e){const t=mt(e);return t===e?t:(ee(t,"iterate",$i),Pe(e)?t:t.map(Jt))}function Vr(e){return ee(e=mt(e),"iterate",$i),e}const $_={__proto__:null,[Symbol.iterator](){return xa(this,Symbol.iterator,Jt)},concat(...e){return Es(this).concat(...e.map(t=>K(t)?Es(t):t))},entries(){return xa(this,"entries",e=>(e[1]=Jt(e[1]),e))},every(e,t){return rn(this,"every",e,t,void 0,arguments)},filter(e,t){return rn(this,"filter",e,t,n=>n.map(Jt),arguments)},find(e,t){return rn(this,"find",e,t,Jt,arguments)},findIndex(e,t){return rn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return rn(this,"findLast",e,t,Jt,arguments)},findLastIndex(e,t){return rn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return rn(this,"forEach",e,t,void 0,arguments)},includes(...e){return wa(this,"includes",e)},indexOf(...e){return wa(this,"indexOf",e)},join(e){return Es(this).join(e)},lastIndexOf(...e){return wa(this,"lastIndexOf",e)},map(e,t){return rn(this,"map",e,t,void 0,arguments)},pop(){return ri(this,"pop")},push(...e){return ri(this,"push",e)},reduce(e,...t){return gh(this,"reduce",e,t)},reduceRight(e,...t){return gh(this,"reduceRight",e,t)},shift(){return ri(this,"shift")},some(e,t){return rn(this,"some",e,t,void 0,arguments)},splice(...e){return ri(this,"splice",e)},toReversed(){return Es(this).toReversed()},toSorted(e){return Es(this).toSorted(e)},toSpliced(...e){return Es(this).toSpliced(...e)},unshift(...e){return ri(this,"unshift",e)},values(){return xa(this,"values",Jt)}};function xa(e,t,n){const s=Vr(e),i=s[t]();return s!==e&&!Pe(e)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=n(o.value)),o}),i}const j_=Array.prototype;function rn(e,t,n,s,i,o){const r=Vr(e),a=r!==e&&!Pe(e),l=r[t];if(l!==j_[t]){const u=l.apply(e,o);return a?Jt(u):u}let c=n;r!==e&&(a?c=function(u,d){return n.call(this,Jt(u),d,e)}:n.length>2&&(c=function(u,d){return n.call(this,u,d,e)}));const h=l.call(r,c,s);return a&&i?i(h):h}function gh(e,t,n,s){const i=Vr(e);let o=n;return i!==e&&(Pe(e)?n.length>3&&(o=function(r,a,l){return n.call(this,r,a,l,e)}):o=function(r,a,l){return n.call(this,r,Jt(a),l,e)}),i[t](o,...s)}function wa(e,t,n){const s=mt(e);ee(s,"iterate",$i);const i=s[t](...n);return(i===-1||i===!1)&&ic(n[0])?(n[0]=mt(n[0]),s[t](...n)):i}function ri(e,t,n=[]){xn(),Jl();const s=mt(e)[t].apply(e,n);return Zl(),wn(),s}const U_=Kl("__proto__,__v_isRef,__isVue"),Hf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(en));function Y_(e){en(e)||(e=String(e));const t=mt(this);return ee(t,"has",e),t.hasOwnProperty(e)}class zf{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return o;if(n==="__v_raw")return s===(i?o?ny:Uf:o?jf:$f).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const r=K(t);if(!i){let l;if(r&&(l=$_[n]))return l;if(n==="hasOwnProperty")return Y_}const a=Reflect.get(t,n,oe(t)?t:s);return(en(n)?Hf.has(n):U_(n))||(i||ee(t,"get",n),o)?a:oe(a)?r&&Ql(n)?a:a.value:Rt(a)?i?qf(a):$r(a):a}}class Vf extends zf{constructor(t=!1){super(!1,t)}set(t,n,s,i){let o=t[n];if(!this._isShallow){const l=jn(o);if(!Pe(s)&&!jn(s)&&(o=mt(o),s=mt(s)),!K(t)&&oe(o)&&!oe(s))return l?!1:(o.value=s,!0)}const r=K(t)&&Ql(n)?Number(n)<t.length:_t(t,n),a=Reflect.set(t,n,s,oe(t)?t:i);return t===mt(i)&&(r?Bn(s,o)&&fn(t,"set",n,s):fn(t,"add",n,s)),a}deleteProperty(t,n){const s=_t(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&fn(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!en(n)||!Hf.has(n))&&ee(t,"has",n),s}ownKeys(t){return ee(t,"iterate",K(t)?"length":ds),Reflect.ownKeys(t)}}class q_ extends zf{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const K_=new Vf,G_=new q_,X_=new Vf(!0);const cl=e=>e,Mo=e=>Reflect.getPrototypeOf(e);function Q_(e,t,n){return function(...s){const i=this.__v_raw,o=mt(i),r=Ds(o),a=e==="entries"||e===Symbol.iterator&&r,l=e==="keys"&&r,c=i[e](...s),h=n?cl:t?nr:Jt;return!t&&ee(o,"iterate",l?ll:ds),{next(){const{value:u,done:d}=c.next();return d?{value:u,done:d}:{value:a?[h(u[0]),h(u[1])]:h(u),done:d}},[Symbol.iterator](){return this}}}}function Po(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function J_(e,t){const n={get(i){const o=this.__v_raw,r=mt(o),a=mt(i);e||(Bn(i,a)&&ee(r,"get",i),ee(r,"get",a));const{has:l}=Mo(r),c=t?cl:e?nr:Jt;if(l.call(r,i))return c(o.get(i));if(l.call(r,a))return c(o.get(a));o!==r&&o.get(i)},get size(){const i=this.__v_raw;return!e&&ee(mt(i),"iterate",ds),Reflect.get(i,"size",i)},has(i){const o=this.__v_raw,r=mt(o),a=mt(i);return e||(Bn(i,a)&&ee(r,"has",i),ee(r,"has",a)),i===a?o.has(i):o.has(i)||o.has(a)},forEach(i,o){const r=this,a=r.__v_raw,l=mt(a),c=t?cl:e?nr:Jt;return!e&&ee(l,"iterate",ds),a.forEach((h,u)=>i.call(o,c(h),c(u),r))}};return re(n,e?{add:Po("add"),set:Po("set"),delete:Po("delete"),clear:Po("clear")}:{add(i){!t&&!Pe(i)&&!jn(i)&&(i=mt(i));const o=mt(this);return Mo(o).has.call(o,i)||(o.add(i),fn(o,"add",i,i)),this},set(i,o){!t&&!Pe(o)&&!jn(o)&&(o=mt(o));const r=mt(this),{has:a,get:l}=Mo(r);let c=a.call(r,i);c||(i=mt(i),c=a.call(r,i));const h=l.call(r,i);return r.set(i,o),c?Bn(o,h)&&fn(r,"set",i,o):fn(r,"add",i,o),this},delete(i){const o=mt(this),{has:r,get:a}=Mo(o);let l=r.call(o,i);l||(i=mt(i),l=r.call(o,i)),a&&a.call(o,i);const c=o.delete(i);return l&&fn(o,"delete",i,void 0),c},clear(){const i=mt(this),o=i.size!==0,r=i.clear();return o&&fn(i,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Q_(i,e,t)}),n}function nc(e,t){const n=J_(e,t);return(s,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(_t(n,i)&&i in s?n:s,i,o)}const Z_={get:nc(!1,!1)},ty={get:nc(!1,!0)},ey={get:nc(!0,!1)};const $f=new WeakMap,jf=new WeakMap,Uf=new WeakMap,ny=new WeakMap;function sy(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function iy(e){return e.__v_skip||!Object.isExtensible(e)?0:sy(I_(e))}function $r(e){return jn(e)?e:sc(e,!1,K_,Z_,$f)}function Yf(e){return sc(e,!1,X_,ty,jf)}function qf(e){return sc(e,!0,G_,ey,Uf)}function sc(e,t,n,s,i){if(!Rt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=iy(e);if(o===0)return e;const r=i.get(e);if(r)return r;const a=new Proxy(e,o===2?s:n);return i.set(e,a),a}function Os(e){return jn(e)?Os(e.__v_raw):!!(e&&e.__v_isReactive)}function jn(e){return!!(e&&e.__v_isReadonly)}function Pe(e){return!!(e&&e.__v_isShallow)}function ic(e){return e?!!e.__v_raw:!1}function mt(e){const t=e&&e.__v_raw;return t?mt(t):e}function oy(e){return!_t(e,"__v_skip")&&Object.isExtensible(e)&&ol(e,"__v_skip",!0),e}const Jt=e=>Rt(e)?$r(e):e,nr=e=>Rt(e)?qf(e):e;function oe(e){return e?e.__v_isRef===!0:!1}function ye(e){return Kf(e,!1)}function ry(e){return Kf(e,!0)}function Kf(e,t){return oe(e)?e:new ay(e,t)}class ay{constructor(t,n){this.dep=new ec,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:mt(t),this._value=n?t:Jt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||Pe(t)||jn(t);t=s?t:mt(t),Bn(t,n)&&(this._rawValue=t,this._value=s?t:Jt(t),this.dep.trigger())}}function yt(e){return oe(e)?e.value:e}const ly={get:(e,t,n)=>t==="__v_raw"?e:yt(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return oe(i)&&!oe(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function Gf(e){return Os(e)?e:new Proxy(e,ly)}class cy{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new ec(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Vi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Tt!==this)return Of(this,!0),!0}get value(){const t=this.dep.track();return Ff(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function hy(e,t,n=!1){let s,i;return tt(e)?s=e:(s=e.get,i=e.set),new cy(s,i,n)}const Ao={},sr=new WeakMap;let os;function uy(e,t=!1,n=os){if(n){let s=sr.get(n);s||sr.set(n,s=[]),s.push(e)}}function dy(e,t,n=Ct){const{immediate:s,deep:i,once:o,scheduler:r,augmentJob:a,call:l}=n,c=w=>i?w:Pe(w)||i===!1||i===0?pn(w,1):pn(w);let h,u,d,f,p=!1,g=!1;if(oe(e)?(u=()=>e.value,p=Pe(e)):Os(e)?(u=()=>c(e),p=!0):K(e)?(g=!0,p=e.some(w=>Os(w)||Pe(w)),u=()=>e.map(w=>{if(oe(w))return w.value;if(Os(w))return c(w);if(tt(w))return l?l(w,2):w()})):tt(e)?t?u=l?()=>l(e,2):e:u=()=>{if(d){xn();try{d()}finally{wn()}}const w=os;os=h;try{return l?l(e,3,[f]):e(f)}finally{os=w}}:u=Je,t&&i){const w=u,S=i===!0?1/0:i;u=()=>pn(w(),S)}const m=H_(),y=()=>{h.stop(),m&&m.active&&Xl(m.effects,h)};if(o&&t){const w=t;t=(...S)=>{w(...S),y()}}let v=g?new Array(e.length).fill(Ao):Ao;const C=w=>{if(!(!(h.flags&1)||!h.dirty&&!w))if(t){const S=h.run();if(i||p||(g?S.some((A,E)=>Bn(A,v[E])):Bn(S,v))){d&&d();const A=os;os=h;try{const E=[S,v===Ao?void 0:g&&v[0]===Ao?[]:v,f];v=S,l?l(t,3,E):t(...E)}finally{os=A}}}else h.run()};return a&&a(C),h=new Rf(u),h.scheduler=r?()=>r(C,!1):C,f=w=>uy(w,!1,h),d=h.onStop=()=>{const w=sr.get(h);if(w){if(l)l(w,4);else for(const S of w)S();sr.delete(h)}},t?s?C(!0):v=h.run():r?r(C.bind(null,!0),!0):h.run(),y.pause=h.pause.bind(h),y.resume=h.resume.bind(h),y.stop=y,y}function pn(e,t=1/0,n){if(t<=0||!Rt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,oe(e))pn(e.value,t,n);else if(K(e))for(let s=0;s<e.length;s++)pn(e[s],t,n);else if(Lr(e)||Ds(e))e.forEach(s=>{pn(s,t,n)});else if(Tf(e)){for(const s in e)pn(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&pn(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function _o(e,t,n,s){try{return s?e(...s):e()}catch(i){jr(i,t,n)}}function nn(e,t,n,s){if(tt(e)){const i=_o(e,t,n,s);return i&&Ef(i)&&i.catch(o=>{jr(o,t,n)}),i}if(K(e)){const i=[];for(let o=0;o<e.length;o++)i.push(nn(e[o],t,n,s));return i}}function jr(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||Ct;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let u=0;u<h.length;u++)if(h[u](e,l,c)===!1)return}a=a.parent}if(o){xn(),_o(o,null,10,[e,l,c]),wn();return}}fy(e,n,i,s,r)}function fy(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const ue=[];let Ke=-1;const Ns=[];let An=null,Ms=0;const Xf=Promise.resolve();let ir=null;function Ur(e){const t=ir||Xf;return e?t.then(this?e.bind(this):e):t}function py(e){let t=Ke+1,n=ue.length;for(;t<n;){const s=t+n>>>1,i=ue[s],o=ji(i);o<e||o===e&&i.flags&2?t=s+1:n=s}return t}function oc(e){if(!(e.flags&1)){const t=ji(e),n=ue[ue.length-1];!n||!(e.flags&2)&&t>=ji(n)?ue.push(e):ue.splice(py(t),0,e),e.flags|=1,Qf()}}function Qf(){ir||(ir=Xf.then(Zf))}function gy(e){K(e)?Ns.push(...e):An&&e.id===-1?An.splice(Ms+1,0,e):e.flags&1||(Ns.push(e),e.flags|=1),Qf()}function mh(e,t,n=Ke+1){for(;n<ue.length;n++){const s=ue[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;ue.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Jf(e){if(Ns.length){const t=[...new Set(Ns)].sort((n,s)=>ji(n)-ji(s));if(Ns.length=0,An){An.push(...t);return}for(An=t,Ms=0;Ms<An.length;Ms++){const n=An[Ms];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}An=null,Ms=0}}const ji=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Zf(e){try{for(Ke=0;Ke<ue.length;Ke++){const t=ue[Ke];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),_o(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ke<ue.length;Ke++){const t=ue[Ke];t&&(t.flags&=-2)}Ke=-1,ue.length=0,Jf(),ir=null,(ue.length||Ns.length)&&Zf()}}let ke=null,tp=null;function or(e){const t=ke;return ke=e,tp=e&&e.type.__scopeId||null,t}function On(e,t=ke,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&kh(-1);const o=or(t);let r;try{r=e(...i)}finally{or(o),s._d&&kh(1)}return r};return s._n=!0,s._c=!0,s._d=!0,s}function Ls(e,t){if(ke===null)return e;const n=Xr(ke),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,r,a,l=Ct]=t[i];o&&(tt(o)&&(o={mounted:o,updated:o}),o.deep&&pn(r),s.push({dir:o,instance:n,value:r,oldValue:void 0,arg:a,modifiers:l}))}return e}function Zn(e,t,n,s){const i=e.dirs,o=t&&t.dirs;for(let r=0;r<i.length;r++){const a=i[r];o&&(a.oldValue=o[r].value);let l=a.dir[s];l&&(xn(),nn(l,n,8,[e.el,a,e,t]),wn())}}const my=Symbol("_vte"),_y=e=>e.__isTeleport;function rc(e,t){e.shapeFlag&6&&e.component?(e.transition=t,rc(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Re(e,t){return tt(e)?re({name:e.name},t,{setup:e}):e}function ep(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function ki(e,t,n,s,i=!1){if(K(e)){e.forEach((p,g)=>ki(p,t&&(K(t)?t[g]:t),n,s,i));return}if(Ti(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&ki(e,t,n,s.component.subTree);return}const o=s.shapeFlag&4?Xr(s.component):s.el,r=i?null:o,{i:a,r:l}=e,c=t&&t.r,h=a.refs===Ct?a.refs={}:a.refs,u=a.setupState,d=mt(u),f=u===Ct?()=>!1:p=>_t(d,p);if(c!=null&&c!==l&&($t(c)?(h[c]=null,f(c)&&(u[c]=null)):oe(c)&&(c.value=null)),tt(l))_o(l,a,12,[r,h]);else{const p=$t(l),g=oe(l);if(p||g){const m=()=>{if(e.f){const y=p?f(l)?u[l]:h[l]:l.value;i?K(y)&&Xl(y,o):K(y)?y.includes(o)||y.push(o):p?(h[l]=[o],f(l)&&(u[l]=h[l])):(l.value=[o],e.k&&(h[e.k]=l.value))}else p?(h[l]=r,f(l)&&(u[l]=r)):g&&(l.value=r,e.k&&(h[e.k]=r))};r?(m.id=-1,Se(m,n)):m()}}}Wr().requestIdleCallback;Wr().cancelIdleCallback;const Ti=e=>!!e.type.__asyncLoader,np=e=>e.type.__isKeepAlive;function yy(e,t){sp(e,"a",t)}function by(e,t){sp(e,"da",t)}function sp(e,t,n=se){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Yr(t,s,n),n){let i=n.parent;for(;i&&i.parent;)np(i.parent.vnode)&&vy(s,t,n,i),i=i.parent}}function vy(e,t,n,s){const i=Yr(t,e,s,!0);ip(()=>{Xl(s[t],i)},n)}function Yr(e,t,n=se,s=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...r)=>{xn();const a=bo(n),l=nn(t,n,e,r);return a(),wn(),l});return s?i.unshift(o):i.push(o),o}}const En=e=>(t,n=se)=>{(!qi||e==="sp")&&Yr(e,(...s)=>t(...s),n)},xy=En("bm"),qr=En("m"),wy=En("bu"),Cy=En("u"),Sy=En("bum"),ip=En("um"),Ey=En("sp"),ky=En("rtg"),Ty=En("rtc");function Iy(e,t=se){Yr("ec",e,t)}const My="components";function yo(e,t){return Ay(My,e,!0,t)||e}const Py=Symbol.for("v-ndc");function Ay(e,t,n=!0,s=!1){const i=ke||se;if(i){const o=i.type;{const a=yb(o,!1);if(a&&(a===t||a===Ae(t)||a===Br(Ae(t))))return o}const r=_h(i[e]||o[e],t)||_h(i.appContext[e],t);return!r&&s?o:r}}function _h(e,t){return e&&(e[t]||e[Ae(t)]||e[Br(Ae(t))])}function Oe(e,t,n,s){let i;const o=n,r=K(e);if(r||$t(e)){const a=r&&Os(e);let l=!1,c=!1;a&&(l=!Pe(e),c=jn(e),e=Vr(e)),i=new Array(e.length);for(let h=0,u=e.length;h<u;h++)i[h]=t(l?c?nr(Jt(e[h])):Jt(e[h]):e[h],h,void 0,o)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,o)}else if(Rt(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,o));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const h=a[l];i[l]=t(e[h],h,l,o)}}else i=[];return i}const hl=e=>e?Sp(e)?Xr(e):hl(e.parent):null,Ii=re(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>hl(e.parent),$root:e=>hl(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>rp(e),$forceUpdate:e=>e.f||(e.f=()=>{oc(e.update)}),$nextTick:e=>e.n||(e.n=Ur.bind(e.proxy)),$watch:e=>Jy.bind(e)}),Ca=(e,t)=>e!==Ct&&!e.__isScriptSetup&&_t(e,t),Ry={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:o,accessCache:r,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const f=r[t];if(f!==void 0)switch(f){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(Ca(s,t))return r[t]=1,s[t];if(i!==Ct&&_t(i,t))return r[t]=2,i[t];if((c=e.propsOptions[0])&&_t(c,t))return r[t]=3,o[t];if(n!==Ct&&_t(n,t))return r[t]=4,n[t];ul&&(r[t]=0)}}const h=Ii[t];let u,d;if(h)return t==="$attrs"&&ee(e.attrs,"get",""),h(e);if((u=a.__cssModules)&&(u=u[t]))return u;if(n!==Ct&&_t(n,t))return r[t]=4,n[t];if(d=l.config.globalProperties,_t(d,t))return d[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:o}=e;return Ca(i,t)?(i[t]=n,!0):s!==Ct&&_t(s,t)?(s[t]=n,!0):_t(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,propsOptions:o}},r){let a;return!!n[r]||e!==Ct&&_t(e,r)||Ca(t,r)||(a=o[0])&&_t(a,r)||_t(s,r)||_t(Ii,r)||_t(i.config.globalProperties,r)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:_t(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function yh(e){return K(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ul=!0;function Dy(e){const t=rp(e),n=e.proxy,s=e.ctx;ul=!1,t.beforeCreate&&bh(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:r,watch:a,provide:l,inject:c,created:h,beforeMount:u,mounted:d,beforeUpdate:f,updated:p,activated:g,deactivated:m,beforeDestroy:y,beforeUnmount:v,destroyed:C,unmounted:w,render:S,renderTracked:A,renderTriggered:E,errorCaptured:k,serverPrefetch:O,expose:$,inheritAttrs:G,components:et,directives:xt,filters:jt}=t;if(c&&Oy(c,s,null),r)for(const Y in r){const nt=r[Y];tt(nt)&&(s[Y]=nt.bind(n))}if(i){const Y=i.call(n,n);Rt(Y)&&(e.data=$r(Y))}if(ul=!0,o)for(const Y in o){const nt=o[Y],Et=tt(nt)?nt.bind(n,n):tt(nt.get)?nt.get.bind(n,n):Je,le=!tt(nt)&&tt(nt.set)?nt.set.bind(n):Je,ce=At({get:Et,set:le});Object.defineProperty(s,Y,{enumerable:!0,configurable:!0,get:()=>ce.value,set:Wt=>ce.value=Wt})}if(a)for(const Y in a)op(a[Y],s,n,Y);if(l){const Y=tt(l)?l.call(n):l;Reflect.ownKeys(Y).forEach(nt=>{Xo(nt,Y[nt])})}h&&bh(h,e,"c");function Z(Y,nt){K(nt)?nt.forEach(Et=>Y(Et.bind(n))):nt&&Y(nt.bind(n))}if(Z(xy,u),Z(qr,d),Z(wy,f),Z(Cy,p),Z(yy,g),Z(by,m),Z(Iy,k),Z(Ty,A),Z(ky,E),Z(Sy,v),Z(ip,w),Z(Ey,O),K($))if($.length){const Y=e.exposed||(e.exposed={});$.forEach(nt=>{Object.defineProperty(Y,nt,{get:()=>n[nt],set:Et=>n[nt]=Et,enumerable:!0})})}else e.exposed||(e.exposed={});S&&e.render===Je&&(e.render=S),G!=null&&(e.inheritAttrs=G),et&&(e.components=et),xt&&(e.directives=xt),O&&ep(e)}function Oy(e,t,n=Je){K(e)&&(e=dl(e));for(const s in e){const i=e[s];let o;Rt(i)?"default"in i?o=Ze(i.from||s,i.default,!0):o=Ze(i.from||s):o=Ze(i),oe(o)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):t[s]=o}}function bh(e,t,n){nn(K(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function op(e,t,n,s){let i=s.includes(".")?bp(n,s):()=>n[s];if($t(e)){const o=t[e];tt(o)&&Bs(i,o)}else if(tt(e))Bs(i,e.bind(n));else if(Rt(e))if(K(e))e.forEach(o=>op(o,t,n,s));else{const o=tt(e.handler)?e.handler.bind(n):t[e.handler];tt(o)&&Bs(i,o,e)}}function rp(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:r}}=e.appContext,a=o.get(t);let l;return a?l=a:!i.length&&!n&&!s?l=t:(l={},i.length&&i.forEach(c=>rr(l,c,r,!0)),rr(l,t,r)),Rt(t)&&o.set(t,l),l}function rr(e,t,n,s=!1){const{mixins:i,extends:o}=t;o&&rr(e,o,n,!0),i&&i.forEach(r=>rr(e,r,n,!0));for(const r in t)if(!(s&&r==="expose")){const a=Ny[r]||n&&n[r];e[r]=a?a(e[r],t[r]):t[r]}return e}const Ny={data:vh,props:xh,emits:xh,methods:yi,computed:yi,beforeCreate:he,created:he,beforeMount:he,mounted:he,beforeUpdate:he,updated:he,beforeDestroy:he,beforeUnmount:he,destroyed:he,unmounted:he,activated:he,deactivated:he,errorCaptured:he,serverPrefetch:he,components:yi,directives:yi,watch:Fy,provide:vh,inject:Ly};function vh(e,t){return t?e?function(){return re(tt(e)?e.call(this,this):e,tt(t)?t.call(this,this):t)}:t:e}function Ly(e,t){return yi(dl(e),dl(t))}function dl(e){if(K(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function he(e,t){return e?[...new Set([].concat(e,t))]:t}function yi(e,t){return e?re(Object.create(null),e,t):t}function xh(e,t){return e?K(e)&&K(t)?[...new Set([...e,...t])]:re(Object.create(null),yh(e),yh(t??{})):t}function Fy(e,t){if(!e)return t;if(!t)return e;const n=re(Object.create(null),e);for(const s in t)n[s]=he(e[s],t[s]);return n}function ap(){return{app:null,config:{isNativeTag:k_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let By=0;function Wy(e,t){return function(s,i=null){tt(s)||(s=re({},s)),i!=null&&!Rt(i)&&(i=null);const o=ap(),r=new WeakSet,a=[];let l=!1;const c=o.app={_uid:By++,_component:s,_props:i,_container:null,_context:o,_instance:null,version:vb,get config(){return o.config},set config(h){},use(h,...u){return r.has(h)||(h&&tt(h.install)?(r.add(h),h.install(c,...u)):tt(h)&&(r.add(h),h(c,...u))),c},mixin(h){return o.mixins.includes(h)||o.mixins.push(h),c},component(h,u){return u?(o.components[h]=u,c):o.components[h]},directive(h,u){return u?(o.directives[h]=u,c):o.directives[h]},mount(h,u,d){if(!l){const f=c._ceVNode||st(s,i);return f.appContext=o,d===!0?d="svg":d===!1&&(d=void 0),e(f,h,d),l=!0,c._container=h,h.__vue_app__=c,Xr(f.component)}},onUnmount(h){a.push(h)},unmount(){l&&(nn(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(h,u){return o.provides[h]=u,c},runWithContext(h){const u=Fs;Fs=c;try{return h()}finally{Fs=u}}};return c}}let Fs=null;function Xo(e,t){if(se){let n=se.provides;const s=se.parent&&se.parent.provides;s===n&&(n=se.provides=Object.create(s)),n[e]=t}}function Ze(e,t,n=!1){const s=fb();if(s||Fs){let i=Fs?Fs._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&tt(t)?t.call(s&&s.proxy):t}}const lp={},cp=()=>Object.create(lp),hp=e=>Object.getPrototypeOf(e)===lp;function Hy(e,t,n,s=!1){const i={},o=cp();e.propsDefaults=Object.create(null),up(e,t,i,o);for(const r in e.propsOptions[0])r in i||(i[r]=void 0);n?e.props=s?i:Yf(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function zy(e,t,n,s){const{props:i,attrs:o,vnode:{patchFlag:r}}=e,a=mt(i),[l]=e.propsOptions;let c=!1;if((s||r>0)&&!(r&16)){if(r&8){const h=e.vnode.dynamicProps;for(let u=0;u<h.length;u++){let d=h[u];if(Kr(e.emitsOptions,d))continue;const f=t[d];if(l)if(_t(o,d))f!==o[d]&&(o[d]=f,c=!0);else{const p=Ae(d);i[p]=fl(l,a,p,f,e,!1)}else f!==o[d]&&(o[d]=f,c=!0)}}}else{up(e,t,i,o)&&(c=!0);let h;for(const u in a)(!t||!_t(t,u)&&((h=xs(u))===u||!_t(t,h)))&&(l?n&&(n[u]!==void 0||n[h]!==void 0)&&(i[u]=fl(l,a,u,void 0,e,!0)):delete i[u]);if(o!==a)for(const u in o)(!t||!_t(t,u))&&(delete o[u],c=!0)}c&&fn(e.attrs,"set","")}function up(e,t,n,s){const[i,o]=e.propsOptions;let r=!1,a;if(t)for(let l in t){if(Ci(l))continue;const c=t[l];let h;i&&_t(i,h=Ae(l))?!o||!o.includes(h)?n[h]=c:(a||(a={}))[h]=c:Kr(e.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,r=!0)}if(o){const l=mt(n),c=a||Ct;for(let h=0;h<o.length;h++){const u=o[h];n[u]=fl(i,l,u,c[u],e,!_t(c,u))}}return r}function fl(e,t,n,s,i,o){const r=e[n];if(r!=null){const a=_t(r,"default");if(a&&s===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&tt(l)){const{propsDefaults:c}=i;if(n in c)s=c[n];else{const h=bo(i);s=c[n]=l.call(null,t),h()}}else s=l;i.ce&&i.ce._setProp(n,s)}r[0]&&(o&&!a?s=!1:r[1]&&(s===""||s===xs(n))&&(s=!0))}return s}const Vy=new WeakMap;function dp(e,t,n=!1){const s=n?Vy:t.propsCache,i=s.get(e);if(i)return i;const o=e.props,r={},a=[];let l=!1;if(!tt(e)){const h=u=>{l=!0;const[d,f]=dp(u,t,!0);re(r,d),f&&a.push(...f)};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!o&&!l)return Rt(e)&&s.set(e,Rs),Rs;if(K(o))for(let h=0;h<o.length;h++){const u=Ae(o[h]);wh(u)&&(r[u]=Ct)}else if(o)for(const h in o){const u=Ae(h);if(wh(u)){const d=o[h],f=r[u]=K(d)||tt(d)?{type:d}:re({},d),p=f.type;let g=!1,m=!0;if(K(p))for(let y=0;y<p.length;++y){const v=p[y],C=tt(v)&&v.name;if(C==="Boolean"){g=!0;break}else C==="String"&&(m=!1)}else g=tt(p)&&p.name==="Boolean";f[0]=g,f[1]=m,(g||_t(f,"default"))&&a.push(u)}}const c=[r,a];return Rt(e)&&s.set(e,c),c}function wh(e){return e[0]!=="$"&&!Ci(e)}const ac=e=>e==="_"||e==="__"||e==="_ctx"||e==="$stable",lc=e=>K(e)?e.map(Xe):[Xe(e)],$y=(e,t,n)=>{if(t._n)return t;const s=On((...i)=>lc(t(...i)),n);return s._c=!1,s},fp=(e,t,n)=>{const s=e._ctx;for(const i in e){if(ac(i))continue;const o=e[i];if(tt(o))t[i]=$y(i,o,s);else if(o!=null){const r=lc(o);t[i]=()=>r}}},pp=(e,t)=>{const n=lc(t);e.slots.default=()=>n},gp=(e,t,n)=>{for(const s in t)(n||!ac(s))&&(e[s]=t[s])},jy=(e,t,n)=>{const s=e.slots=cp();if(e.vnode.shapeFlag&32){const i=t.__;i&&ol(s,"__",i,!0);const o=t._;o?(gp(s,t,n),n&&ol(s,"_",o,!0)):fp(t,s)}else t&&pp(e,t)},Uy=(e,t,n)=>{const{vnode:s,slots:i}=e;let o=!0,r=Ct;if(s.shapeFlag&32){const a=t._;a?n&&a===1?o=!1:gp(i,t,n):(o=!t.$stable,fp(t,i)),r=t}else t&&(pp(e,t),r={default:1});if(o)for(const a in i)!ac(a)&&r[a]==null&&delete i[a]},Se=ob;function Yy(e){return qy(e)}function qy(e,t){const n=Wr();n.__VUE__=!0;const{insert:s,remove:i,patchProp:o,createElement:r,createText:a,createComment:l,setText:c,setElementText:h,parentNode:u,nextSibling:d,setScopeId:f=Je,insertStaticContent:p}=e,g=(_,b,x,T=null,P=null,M=null,B=void 0,F=null,L=!!b.dynamicChildren)=>{if(_===b)return;_&&!ai(_,b)&&(T=I(_),Wt(_,P,M,!0),_=null),b.patchFlag===-2&&(L=!1,b.dynamicChildren=null);const{type:D,ref:U,shapeFlag:H}=b;switch(D){case Gr:m(_,b,x,T);break;case Un:y(_,b,x,T);break;case Ea:_==null&&v(b,x,T,B);break;case Vt:et(_,b,x,T,P,M,B,F,L);break;default:H&1?S(_,b,x,T,P,M,B,F,L):H&6?xt(_,b,x,T,P,M,B,F,L):(H&64||H&128)&&D.process(_,b,x,T,P,M,B,F,L,V)}U!=null&&P?ki(U,_&&_.ref,M,b||_,!b):U==null&&_&&_.ref!=null&&ki(_.ref,null,M,_,!0)},m=(_,b,x,T)=>{if(_==null)s(b.el=a(b.children),x,T);else{const P=b.el=_.el;b.children!==_.children&&c(P,b.children)}},y=(_,b,x,T)=>{_==null?s(b.el=l(b.children||""),x,T):b.el=_.el},v=(_,b,x,T)=>{[_.el,_.anchor]=p(_.children,b,x,T,_.el,_.anchor)},C=({el:_,anchor:b},x,T)=>{let P;for(;_&&_!==b;)P=d(_),s(_,x,T),_=P;s(b,x,T)},w=({el:_,anchor:b})=>{let x;for(;_&&_!==b;)x=d(_),i(_),_=x;i(b)},S=(_,b,x,T,P,M,B,F,L)=>{b.type==="svg"?B="svg":b.type==="math"&&(B="mathml"),_==null?A(b,x,T,P,M,B,F,L):O(_,b,P,M,B,F,L)},A=(_,b,x,T,P,M,B,F)=>{let L,D;const{props:U,shapeFlag:H,transition:j,dirs:Q}=_;if(L=_.el=r(_.type,M,U&&U.is,U),H&8?h(L,_.children):H&16&&k(_.children,L,null,T,P,Sa(_,M),B,F),Q&&Zn(_,null,T,"created"),E(L,_,_.scopeId,B,T),U){for(const kt in U)kt!=="value"&&!Ci(kt)&&o(L,kt,null,U[kt],M,T);"value"in U&&o(L,"value",null,U.value,M),(D=U.onVnodeBeforeMount)&&Ye(D,T,_)}Q&&Zn(_,null,T,"beforeMount");const ut=Ky(P,j);ut&&j.beforeEnter(L),s(L,b,x),((D=U&&U.onVnodeMounted)||ut||Q)&&Se(()=>{D&&Ye(D,T,_),ut&&j.enter(L),Q&&Zn(_,null,T,"mounted")},P)},E=(_,b,x,T,P)=>{if(x&&f(_,x),T)for(let M=0;M<T.length;M++)f(_,T[M]);if(P){let M=P.subTree;if(b===M||xp(M.type)&&(M.ssContent===b||M.ssFallback===b)){const B=P.vnode;E(_,B,B.scopeId,B.slotScopeIds,P.parent)}}},k=(_,b,x,T,P,M,B,F,L=0)=>{for(let D=L;D<_.length;D++){const U=_[D]=F?Rn(_[D]):Xe(_[D]);g(null,U,b,x,T,P,M,B,F)}},O=(_,b,x,T,P,M,B)=>{const F=b.el=_.el;let{patchFlag:L,dynamicChildren:D,dirs:U}=b;L|=_.patchFlag&16;const H=_.props||Ct,j=b.props||Ct;let Q;if(x&&ts(x,!1),(Q=j.onVnodeBeforeUpdate)&&Ye(Q,x,b,_),U&&Zn(b,_,x,"beforeUpdate"),x&&ts(x,!0),(H.innerHTML&&j.innerHTML==null||H.textContent&&j.textContent==null)&&h(F,""),D?$(_.dynamicChildren,D,F,x,T,Sa(b,P),M):B||nt(_,b,F,null,x,T,Sa(b,P),M,!1),L>0){if(L&16)G(F,H,j,x,P);else if(L&2&&H.class!==j.class&&o(F,"class",null,j.class,P),L&4&&o(F,"style",H.style,j.style,P),L&8){const ut=b.dynamicProps;for(let kt=0;kt<ut.length;kt++){const bt=ut[kt],pe=H[bt],ge=j[bt];(ge!==pe||bt==="value")&&o(F,bt,pe,ge,P,x)}}L&1&&_.children!==b.children&&h(F,b.children)}else!B&&D==null&&G(F,H,j,x,P);((Q=j.onVnodeUpdated)||U)&&Se(()=>{Q&&Ye(Q,x,b,_),U&&Zn(b,_,x,"updated")},T)},$=(_,b,x,T,P,M,B)=>{for(let F=0;F<b.length;F++){const L=_[F],D=b[F],U=L.el&&(L.type===Vt||!ai(L,D)||L.shapeFlag&198)?u(L.el):x;g(L,D,U,null,T,P,M,B,!0)}},G=(_,b,x,T,P)=>{if(b!==x){if(b!==Ct)for(const M in b)!Ci(M)&&!(M in x)&&o(_,M,b[M],null,P,T);for(const M in x){if(Ci(M))continue;const B=x[M],F=b[M];B!==F&&M!=="value"&&o(_,M,F,B,P,T)}"value"in x&&o(_,"value",b.value,x.value,P)}},et=(_,b,x,T,P,M,B,F,L)=>{const D=b.el=_?_.el:a(""),U=b.anchor=_?_.anchor:a("");let{patchFlag:H,dynamicChildren:j,slotScopeIds:Q}=b;Q&&(F=F?F.concat(Q):Q),_==null?(s(D,x,T),s(U,x,T),k(b.children||[],x,U,P,M,B,F,L)):H>0&&H&64&&j&&_.dynamicChildren?($(_.dynamicChildren,j,x,P,M,B,F),(b.key!=null||P&&b===P.subTree)&&mp(_,b,!0)):nt(_,b,x,U,P,M,B,F,L)},xt=(_,b,x,T,P,M,B,F,L)=>{b.slotScopeIds=F,_==null?b.shapeFlag&512?P.ctx.activate(b,x,T,B,L):jt(b,x,T,P,M,B,L):ht(_,b,L)},jt=(_,b,x,T,P,M,B)=>{const F=_.component=db(_,T,P);if(np(_)&&(F.ctx.renderer=V),pb(F,!1,B),F.asyncDep){if(P&&P.registerDep(F,Z,B),!_.el){const L=F.subTree=st(Un);y(null,L,b,x),_.placeholder=L.el}}else Z(F,_,b,x,P,M,B)},ht=(_,b,x)=>{const T=b.component=_.component;if(sb(_,b,x))if(T.asyncDep&&!T.asyncResolved){Y(T,b,x);return}else T.next=b,T.update();else b.el=_.el,T.vnode=b},Z=(_,b,x,T,P,M,B)=>{const F=()=>{if(_.isMounted){let{next:H,bu:j,u:Q,parent:ut,vnode:kt}=_;{const je=_p(_);if(je){H&&(H.el=kt.el,Y(_,H,B)),je.asyncDep.then(()=>{_.isUnmounted||F()});return}}let bt=H,pe;ts(_,!1),H?(H.el=kt.el,Y(_,H,B)):H=kt,j&&Go(j),(pe=H.props&&H.props.onVnodeBeforeUpdate)&&Ye(pe,ut,H,kt),ts(_,!0);const ge=Sh(_),$e=_.subTree;_.subTree=ge,g($e,ge,u($e.el),I($e),_,P,M),H.el=ge.el,bt===null&&ib(_,ge.el),Q&&Se(Q,P),(pe=H.props&&H.props.onVnodeUpdated)&&Se(()=>Ye(pe,ut,H,kt),P)}else{let H;const{el:j,props:Q}=b,{bm:ut,m:kt,parent:bt,root:pe,type:ge}=_,$e=Ti(b);ts(_,!1),ut&&Go(ut),!$e&&(H=Q&&Q.onVnodeBeforeMount)&&Ye(H,bt,b),ts(_,!0);{pe.ce&&pe.ce._def.shadowRoot!==!1&&pe.ce._injectChildStyle(ge);const je=_.subTree=Sh(_);g(null,je,x,T,_,P,M),b.el=je.el}if(kt&&Se(kt,P),!$e&&(H=Q&&Q.onVnodeMounted)){const je=b;Se(()=>Ye(H,bt,je),P)}(b.shapeFlag&256||bt&&Ti(bt.vnode)&&bt.vnode.shapeFlag&256)&&_.a&&Se(_.a,P),_.isMounted=!0,b=x=T=null}};_.scope.on();const L=_.effect=new Rf(F);_.scope.off();const D=_.update=L.run.bind(L),U=_.job=L.runIfDirty.bind(L);U.i=_,U.id=_.uid,L.scheduler=()=>oc(U),ts(_,!0),D()},Y=(_,b,x)=>{b.component=_;const T=_.vnode.props;_.vnode=b,_.next=null,zy(_,b.props,T,x),Uy(_,b.children,x),xn(),mh(_),wn()},nt=(_,b,x,T,P,M,B,F,L=!1)=>{const D=_&&_.children,U=_?_.shapeFlag:0,H=b.children,{patchFlag:j,shapeFlag:Q}=b;if(j>0){if(j&128){le(D,H,x,T,P,M,B,F,L);return}else if(j&256){Et(D,H,x,T,P,M,B,F,L);return}}Q&8?(U&16&&zt(D,P,M),H!==D&&h(x,H)):U&16?Q&16?le(D,H,x,T,P,M,B,F,L):zt(D,P,M,!0):(U&8&&h(x,""),Q&16&&k(H,x,T,P,M,B,F,L))},Et=(_,b,x,T,P,M,B,F,L)=>{_=_||Rs,b=b||Rs;const D=_.length,U=b.length,H=Math.min(D,U);let j;for(j=0;j<H;j++){const Q=b[j]=L?Rn(b[j]):Xe(b[j]);g(_[j],Q,x,null,P,M,B,F,L)}D>U?zt(_,P,M,!0,!1,H):k(b,x,T,P,M,B,F,L,H)},le=(_,b,x,T,P,M,B,F,L)=>{let D=0;const U=b.length;let H=_.length-1,j=U-1;for(;D<=H&&D<=j;){const Q=_[D],ut=b[D]=L?Rn(b[D]):Xe(b[D]);if(ai(Q,ut))g(Q,ut,x,null,P,M,B,F,L);else break;D++}for(;D<=H&&D<=j;){const Q=_[H],ut=b[j]=L?Rn(b[j]):Xe(b[j]);if(ai(Q,ut))g(Q,ut,x,null,P,M,B,F,L);else break;H--,j--}if(D>H){if(D<=j){const Q=j+1,ut=Q<U?b[Q].el:T;for(;D<=j;)g(null,b[D]=L?Rn(b[D]):Xe(b[D]),x,ut,P,M,B,F,L),D++}}else if(D>j)for(;D<=H;)Wt(_[D],P,M,!0),D++;else{const Q=D,ut=D,kt=new Map;for(D=ut;D<=j;D++){const Ce=b[D]=L?Rn(b[D]):Xe(b[D]);Ce.key!=null&&kt.set(Ce.key,D)}let bt,pe=0;const ge=j-ut+1;let $e=!1,je=0;const oi=new Array(ge);for(D=0;D<ge;D++)oi[D]=0;for(D=Q;D<=H;D++){const Ce=_[D];if(pe>=ge){Wt(Ce,P,M,!0);continue}let Ue;if(Ce.key!=null)Ue=kt.get(Ce.key);else for(bt=ut;bt<=j;bt++)if(oi[bt-ut]===0&&ai(Ce,b[bt])){Ue=bt;break}Ue===void 0?Wt(Ce,P,M,!0):(oi[Ue-ut]=D+1,Ue>=je?je=Ue:$e=!0,g(Ce,b[Ue],x,null,P,M,B,F,L),pe++)}const ch=$e?Gy(oi):Rs;for(bt=ch.length-1,D=ge-1;D>=0;D--){const Ce=ut+D,Ue=b[Ce],hh=b[Ce+1],uh=Ce+1<U?hh.el||hh.placeholder:T;oi[D]===0?g(null,Ue,x,uh,P,M,B,F,L):$e&&(bt<0||D!==ch[bt]?ce(Ue,x,uh,2):bt--)}}},ce=(_,b,x,T,P=null)=>{const{el:M,type:B,transition:F,children:L,shapeFlag:D}=_;if(D&6){ce(_.component.subTree,b,x,T);return}if(D&128){_.suspense.move(b,x,T);return}if(D&64){B.move(_,b,x,V);return}if(B===Vt){s(M,b,x);for(let H=0;H<L.length;H++)ce(L[H],b,x,T);s(_.anchor,b,x);return}if(B===Ea){C(_,b,x);return}if(T!==2&&D&1&&F)if(T===0)F.beforeEnter(M),s(M,b,x),Se(()=>F.enter(M),P);else{const{leave:H,delayLeave:j,afterLeave:Q}=F,ut=()=>{_.ctx.isUnmounted?i(M):s(M,b,x)},kt=()=>{H(M,()=>{ut(),Q&&Q()})};j?j(M,ut,kt):kt()}else s(M,b,x)},Wt=(_,b,x,T=!1,P=!1)=>{const{type:M,props:B,ref:F,children:L,dynamicChildren:D,shapeFlag:U,patchFlag:H,dirs:j,cacheIndex:Q}=_;if(H===-2&&(P=!1),F!=null&&(xn(),ki(F,null,x,_,!0),wn()),Q!=null&&(b.renderCache[Q]=void 0),U&256){b.ctx.deactivate(_);return}const ut=U&1&&j,kt=!Ti(_);let bt;if(kt&&(bt=B&&B.onVnodeBeforeUnmount)&&Ye(bt,b,_),U&6)Ve(_.component,x,T);else{if(U&128){_.suspense.unmount(x,T);return}ut&&Zn(_,null,b,"beforeUnmount"),U&64?_.type.remove(_,b,x,V,T):D&&!D.hasOnce&&(M!==Vt||H>0&&H&64)?zt(D,b,x,!1,!0):(M===Vt&&H&384||!P&&U&16)&&zt(L,b,x),T&&Ie(_)}(kt&&(bt=B&&B.onVnodeUnmounted)||ut)&&Se(()=>{bt&&Ye(bt,b,_),ut&&Zn(_,null,b,"unmounted")},x)},Ie=_=>{const{type:b,el:x,anchor:T,transition:P}=_;if(b===Vt){fe(x,T);return}if(b===Ea){w(_);return}const M=()=>{i(x),P&&!P.persisted&&P.afterLeave&&P.afterLeave()};if(_.shapeFlag&1&&P&&!P.persisted){const{leave:B,delayLeave:F}=P,L=()=>B(x,M);F?F(_.el,M,L):L()}else M()},fe=(_,b)=>{let x;for(;_!==b;)x=d(_),i(_),_=x;i(b)},Ve=(_,b,x)=>{const{bum:T,scope:P,job:M,subTree:B,um:F,m:L,a:D,parent:U,slots:{__:H}}=_;Ch(L),Ch(D),T&&Go(T),U&&K(H)&&H.forEach(j=>{U.renderCache[j]=void 0}),P.stop(),M&&(M.flags|=8,Wt(B,_,b,x)),F&&Se(F,b),Se(()=>{_.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},zt=(_,b,x,T=!1,P=!1,M=0)=>{for(let B=M;B<_.length;B++)Wt(_[B],b,x,T,P)},I=_=>{if(_.shapeFlag&6)return I(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const b=d(_.anchor||_.el),x=b&&b[my];return x?d(x):b};let z=!1;const W=(_,b,x)=>{_==null?b._vnode&&Wt(b._vnode,null,null,!0):g(b._vnode||null,_,b,null,null,null,x),b._vnode=_,z||(z=!0,mh(),Jf(),z=!1)},V={p:g,um:Wt,m:ce,r:Ie,mt:jt,mc:k,pc:nt,pbc:$,n:I,o:e};return{render:W,hydrate:void 0,createApp:Wy(W)}}function Sa({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function ts({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Ky(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function mp(e,t,n=!1){const s=e.children,i=t.children;if(K(s)&&K(i))for(let o=0;o<s.length;o++){const r=s[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=Rn(i[o]),a.el=r.el),!n&&a.patchFlag!==-2&&mp(r,a)),a.type===Gr&&(a.el=r.el),a.type===Un&&!a.el&&(a.el=r.el)}}function Gy(e){const t=e.slice(),n=[0];let s,i,o,r,a;const l=e.length;for(s=0;s<l;s++){const c=e[s];if(c!==0){if(i=n[n.length-1],e[i]<c){t[s]=i,n.push(s);continue}for(o=0,r=n.length-1;o<r;)a=o+r>>1,e[n[a]]<c?o=a+1:r=a;c<e[n[o]]&&(o>0&&(t[s]=n[o-1]),n[o]=s)}}for(o=n.length,r=n[o-1];o-- >0;)n[o]=r,r=t[r];return n}function _p(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:_p(t)}function Ch(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Xy=Symbol.for("v-scx"),Qy=()=>Ze(Xy);function Bs(e,t,n){return yp(e,t,n)}function yp(e,t,n=Ct){const{immediate:s,deep:i,flush:o,once:r}=n,a=re({},n),l=t&&s||!t&&o!=="post";let c;if(qi){if(o==="sync"){const f=Qy();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=Je,f.resume=Je,f.pause=Je,f}}const h=se;a.call=(f,p,g)=>nn(f,h,p,g);let u=!1;o==="post"?a.scheduler=f=>{Se(f,h&&h.suspense)}:o!=="sync"&&(u=!0,a.scheduler=(f,p)=>{p?f():oc(f)}),a.augmentJob=f=>{t&&(f.flags|=4),u&&(f.flags|=2,h&&(f.id=h.uid,f.i=h))};const d=dy(e,t,a);return qi&&(c?c.push(d):l&&d()),d}function Jy(e,t,n){const s=this.proxy,i=$t(e)?e.includes(".")?bp(s,e):()=>s[e]:e.bind(s,s);let o;tt(t)?o=t:(o=t.handler,n=t);const r=bo(this),a=yp(i,o.bind(s),n);return r(),a}function bp(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const Zy=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ae(t)}Modifiers`]||e[`${xs(t)}Modifiers`];function tb(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||Ct;let i=n;const o=t.startsWith("update:"),r=o&&Zy(s,t.slice(7));r&&(r.trim&&(i=n.map(h=>$t(h)?h.trim():h)),r.number&&(i=n.map(If)));let a,l=s[a=ya(t)]||s[a=ya(Ae(t))];!l&&o&&(l=s[a=ya(xs(t))]),l&&nn(l,e,6,i);const c=s[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,nn(c,e,6,i)}}function vp(e,t,n=!1){const s=t.emitsCache,i=s.get(e);if(i!==void 0)return i;const o=e.emits;let r={},a=!1;if(!tt(e)){const l=c=>{const h=vp(c,t,!0);h&&(a=!0,re(r,h))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(Rt(e)&&s.set(e,null),null):(K(o)?o.forEach(l=>r[l]=null):re(r,o),Rt(e)&&s.set(e,r),r)}function Kr(e,t){return!e||!Nr(t)?!1:(t=t.slice(2).replace(/Once$/,""),_t(e,t[0].toLowerCase()+t.slice(1))||_t(e,xs(t))||_t(e,t))}function Sh(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[o],slots:r,attrs:a,emit:l,render:c,renderCache:h,props:u,data:d,setupState:f,ctx:p,inheritAttrs:g}=e,m=or(e);let y,v;try{if(n.shapeFlag&4){const w=i||s,S=w;y=Xe(c.call(S,w,h,u,f,d,p)),v=a}else{const w=t;y=Xe(w.length>1?w(u,{attrs:a,slots:r,emit:l}):w(u,null)),v=t.props?a:eb(a)}}catch(w){Mi.length=0,jr(w,e,1),y=st(Un)}let C=y;if(v&&g!==!1){const w=Object.keys(v),{shapeFlag:S}=C;w.length&&S&7&&(o&&w.some(Gl)&&(v=nb(v,o)),C=js(C,v,!1,!0))}return n.dirs&&(C=js(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(n.dirs):n.dirs),n.transition&&rc(C,n.transition),y=C,or(m),y}const eb=e=>{let t;for(const n in e)(n==="class"||n==="style"||Nr(n))&&((t||(t={}))[n]=e[n]);return t},nb=(e,t)=>{const n={};for(const s in e)(!Gl(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function sb(e,t,n){const{props:s,children:i,component:o}=e,{props:r,children:a,patchFlag:l}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?Eh(s,r,c):!!r;if(l&8){const h=t.dynamicProps;for(let u=0;u<h.length;u++){const d=h[u];if(r[d]!==s[d]&&!Kr(c,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===r?!1:s?r?Eh(s,r,c):!0:!!r;return!1}function Eh(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const o=s[i];if(t[o]!==e[o]&&!Kr(n,o))return!0}return!1}function ib({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const xp=e=>e.__isSuspense;function ob(e,t){t&&t.pendingBranch?K(e)?t.effects.push(...e):t.effects.push(e):gy(e)}const Vt=Symbol.for("v-fgt"),Gr=Symbol.for("v-txt"),Un=Symbol.for("v-cmt"),Ea=Symbol.for("v-stc"),Mi=[];let Te=null;function X(e=!1){Mi.push(Te=e?null:[])}function rb(){Mi.pop(),Te=Mi[Mi.length-1]||null}let Ui=1;function kh(e,t=!1){Ui+=e,e<0&&Te&&t&&(Te.hasOnce=!0)}function wp(e){return e.dynamicChildren=Ui>0?Te||Rs:null,rb(),Ui>0&&Te&&Te.push(e),e}function it(e,t,n,s,i,o){return wp(R(e,t,n,s,i,o,!0))}function Yi(e,t,n,s,i){return wp(st(e,t,n,s,i,!0))}function ar(e){return e?e.__v_isVNode===!0:!1}function ai(e,t){return e.type===t.type&&e.key===t.key}const Cp=({key:e})=>e??null,Qo=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?$t(e)||oe(e)||tt(e)?{i:ke,r:e,k:t,f:!!n}:e:null);function R(e,t=null,n=null,s=0,i=null,o=e===Vt?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Cp(t),ref:t&&Qo(t),scopeId:tp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ke};return a?(cc(l,n),o&128&&e.normalize(l)):n&&(l.shapeFlag|=$t(n)?8:16),Ui>0&&!r&&Te&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Te.push(l),l}const st=ab;function ab(e,t=null,n=null,s=0,i=null,o=!1){if((!e||e===Py)&&(e=Un),ar(e)){const a=js(e,t,!0);return n&&cc(a,n),Ui>0&&!o&&Te&&(a.shapeFlag&6?Te[Te.indexOf(e)]=a:Te.push(a)),a.patchFlag=-2,a}if(bb(e)&&(e=e.__vccOpts),t){t=lb(t);let{class:a,style:l}=t;a&&!$t(a)&&(t.class=gs(a)),Rt(l)&&(ic(l)&&!K(l)&&(l=re({},l)),t.style=Hr(l))}const r=$t(e)?1:xp(e)?128:_y(e)?64:Rt(e)?4:tt(e)?2:0;return R(e,t,n,s,i,r,o,!0)}function lb(e){return e?ic(e)||hp(e)?re({},e):e:null}function js(e,t,n=!1,s=!1){const{props:i,ref:o,patchFlag:r,children:a,transition:l}=e,c=t?cb(i||{},t):i,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Cp(c),ref:t&&t.ref?n&&o?K(o)?o.concat(Qo(t)):[o,Qo(t)]:Qo(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Vt?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&js(e.ssContent),ssFallback:e.ssFallback&&js(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&rc(h,l.clone(h)),h}function We(e=" ",t=0){return st(Gr,null,e,t)}function gn(e="",t=!1){return t?(X(),Yi(Un,null,e)):st(Un,null,e)}function Xe(e){return e==null||typeof e=="boolean"?st(Un):K(e)?st(Vt,null,e.slice()):ar(e)?Rn(e):st(Gr,null,String(e))}function Rn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:js(e)}function cc(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(K(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),cc(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!hp(t)?t._ctx=ke:i===3&&ke&&(ke.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else tt(t)?(t={default:t,_ctx:ke},n=32):(t=String(t),s&64?(n=16,t=[We(t)]):n=8);e.children=t,e.shapeFlag|=n}function cb(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=gs([t.class,s.class]));else if(i==="style")t.style=Hr([t.style,s.style]);else if(Nr(i)){const o=t[i],r=s[i];r&&o!==r&&!(K(o)&&o.includes(r))&&(t[i]=o?[].concat(o,r):r)}else i!==""&&(t[i]=s[i])}return t}function Ye(e,t,n,s=null){nn(e,t,7,[n,s])}const hb=ap();let ub=0;function db(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||hb,o={uid:ub++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new W_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:dp(s,i),emitsOptions:vp(s,i),emit:null,emitted:null,propsDefaults:Ct,inheritAttrs:s.inheritAttrs,ctx:Ct,data:Ct,props:Ct,attrs:Ct,slots:Ct,refs:Ct,setupState:Ct,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=tb.bind(null,o),e.ce&&e.ce(o),o}let se=null;const fb=()=>se||ke;let lr,pl;{const e=Wr(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),o=>{i.length>1?i.forEach(r=>r(o)):i[0](o)}};lr=t("__VUE_INSTANCE_SETTERS__",n=>se=n),pl=t("__VUE_SSR_SETTERS__",n=>qi=n)}const bo=e=>{const t=se;return lr(e),e.scope.on(),()=>{e.scope.off(),lr(t)}},Th=()=>{se&&se.scope.off(),lr(null)};function Sp(e){return e.vnode.shapeFlag&4}let qi=!1;function pb(e,t=!1,n=!1){t&&pl(t);const{props:s,children:i}=e.vnode,o=Sp(e);Hy(e,s,o,t),jy(e,i,n||t);const r=o?gb(e,t):void 0;return t&&pl(!1),r}function gb(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Ry);const{setup:s}=n;if(s){xn();const i=e.setupContext=s.length>1?_b(e):null,o=bo(e),r=_o(s,e,0,[e.props,i]),a=Ef(r);if(wn(),o(),(a||e.sp)&&!Ti(e)&&ep(e),a){if(r.then(Th,Th),t)return r.then(l=>{Ih(e,l)}).catch(l=>{jr(l,e,0)});e.asyncDep=r}else Ih(e,r)}else Ep(e)}function Ih(e,t,n){tt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Rt(t)&&(e.setupState=Gf(t)),Ep(e)}function Ep(e,t,n){const s=e.type;e.render||(e.render=s.render||Je);{const i=bo(e);xn();try{Dy(e)}finally{wn(),i()}}}const mb={get(e,t){return ee(e,"get",""),e[t]}};function _b(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,mb),slots:e.slots,emit:e.emit,expose:t}}function Xr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Gf(oy(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Ii)return Ii[n](e)},has(t,n){return n in t||n in Ii}})):e.proxy}function yb(e,t=!0){return tt(e)?e.displayName||e.name:e.name||t&&e.__name}function bb(e){return tt(e)&&"__vccOpts"in e}const At=(e,t)=>hy(e,t,qi);function Ki(e,t,n){const s=arguments.length;return s===2?Rt(t)&&!K(t)?ar(t)?st(e,null,[t]):st(e,t):st(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&ar(n)&&(n=[n]),st(e,t,n))}const vb="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let gl;const Mh=typeof window<"u"&&window.trustedTypes;if(Mh)try{gl=Mh.createPolicy("vue",{createHTML:e=>e})}catch{}const kp=gl?e=>gl.createHTML(e):e=>e,xb="http://www.w3.org/2000/svg",wb="http://www.w3.org/1998/Math/MathML",un=typeof document<"u"?document:null,Ph=un&&un.createElement("template"),Cb={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?un.createElementNS(xb,e):t==="mathml"?un.createElementNS(wb,e):n?un.createElement(e,{is:n}):un.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>un.createTextNode(e),createComment:e=>un.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>un.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,o){const r=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{Ph.innerHTML=kp(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=Ph.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Sb=Symbol("_vtc");function Eb(e,t,n){const s=e[Sb];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Ah=Symbol("_vod"),kb=Symbol("_vsh"),Tb=Symbol(""),Ib=/(^|;)\s*display\s*:/;function Mb(e,t,n){const s=e.style,i=$t(n);let o=!1;if(n&&!i){if(t)if($t(t))for(const r of t.split(";")){const a=r.slice(0,r.indexOf(":")).trim();n[a]==null&&Jo(s,a,"")}else for(const r in t)n[r]==null&&Jo(s,r,"");for(const r in n)r==="display"&&(o=!0),Jo(s,r,n[r])}else if(i){if(t!==n){const r=s[Tb];r&&(n+=";"+r),s.cssText=n,o=Ib.test(n)}}else t&&e.removeAttribute("style");Ah in e&&(e[Ah]=o?s.display:"",e[kb]&&(s.display="none"))}const Rh=/\s*!important$/;function Jo(e,t,n){if(K(n))n.forEach(s=>Jo(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=Pb(e,t);Rh.test(n)?e.setProperty(xs(s),n.replace(Rh,""),"important"):e[s]=n}}const Dh=["Webkit","Moz","ms"],ka={};function Pb(e,t){const n=ka[t];if(n)return n;let s=Ae(t);if(s!=="filter"&&s in e)return ka[t]=s;s=Br(s);for(let i=0;i<Dh.length;i++){const o=Dh[i]+s;if(o in e)return ka[t]=o}return t}const Oh="http://www.w3.org/1999/xlink";function Nh(e,t,n,s,i,o=L_(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Oh,t.slice(6,t.length)):e.setAttributeNS(Oh,t,n):n==null||o&&!Mf(n)?e.removeAttribute(t):e.setAttribute(t,o?"":en(n)?String(n):n)}function Lh(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?kp(n):n);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let r=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Mf(n):n==null&&a==="string"?(n="",r=!0):a==="number"&&(n=0,r=!0)}try{e[t]=n}catch{}r&&e.removeAttribute(i||t)}function Tp(e,t,n,s){e.addEventListener(t,n,s)}function Ab(e,t,n,s){e.removeEventListener(t,n,s)}const Fh=Symbol("_vei");function Rb(e,t,n,s,i=null){const o=e[Fh]||(e[Fh]={}),r=o[t];if(s&&r)r.value=s;else{const[a,l]=Db(t);if(s){const c=o[t]=Lb(s,i);Tp(e,a,c,l)}else r&&(Ab(e,a,r,l),o[t]=void 0)}}const Bh=/(?:Once|Passive|Capture)$/;function Db(e){let t;if(Bh.test(e)){t={};let s;for(;s=e.match(Bh);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):xs(e.slice(2)),t]}let Ta=0;const Ob=Promise.resolve(),Nb=()=>Ta||(Ob.then(()=>Ta=0),Ta=Date.now());function Lb(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;nn(Fb(s,n.value),t,5,[s])};return n.value=e,n.attached=Nb(),n}function Fb(e,t){if(K(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const Wh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Bb=(e,t,n,s,i,o)=>{const r=i==="svg";t==="class"?Eb(e,s,r):t==="style"?Mb(e,n,s):Nr(t)?Gl(t)||Rb(e,t,n,s,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Wb(e,t,s,r))?(Lh(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Nh(e,t,s,r,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!$t(s))?Lh(e,Ae(t),s,o,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Nh(e,t,s,r))};function Wb(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Wh(t)&&tt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Wh(t)&&$t(n)?!1:t in e}const Hh=e=>{const t=e.props["onUpdate:modelValue"]||!1;return K(t)?n=>Go(t,n):t},Ia=Symbol("_assign"),Ws={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const i=Lr(t);Tp(e,"change",()=>{const o=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>n?If(cr(r)):cr(r));e[Ia](e.multiple?i?new Set(o):o:o[0]),e._assigning=!0,Ur(()=>{e._assigning=!1})}),e[Ia]=Hh(s)},mounted(e,{value:t}){zh(e,t)},beforeUpdate(e,t,n){e[Ia]=Hh(n)},updated(e,{value:t}){e._assigning||zh(e,t)}};function zh(e,t){const n=e.multiple,s=K(t);if(!(n&&!s&&!Lr(t))){for(let i=0,o=e.options.length;i<o;i++){const r=e.options[i],a=cr(r);if(n)if(s){const l=typeof a;l==="string"||l==="number"?r.selected=t.some(c=>String(c)===String(a)):r.selected=B_(t,a)>-1}else r.selected=t.has(a);else if(zr(cr(r),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function cr(e){return"_value"in e?e._value:e.value}const Hb=re({patchProp:Bb},Cb);let Vh;function zb(){return Vh||(Vh=Yy(Hb))}const Vb=(...e)=>{const t=zb().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=jb(s);if(!i)return;const o=t._component;!tt(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const r=n(i,!1,$b(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},t};function $b(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function jb(e){return $t(e)?document.querySelector(e):e}/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ub=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),Yb=e=>{const t=Ub(e);return t.charAt(0).toUpperCase()+t.slice(1)},qb=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ro={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=({size:e,strokeWidth:t=2,absoluteStrokeWidth:n,color:s,iconNode:i,name:o,class:r,...a},{slots:l})=>Ki("svg",{...Ro,width:e||Ro.width,height:e||Ro.height,stroke:s||Ro.stroke,"stroke-width":n?Number(t)*24/Number(e):t,class:qb("lucide",...o?[`lucide-${$h(Yb(o))}-icon`,`lucide-${$h(o)}`]:["lucide-icon"]),...a},[...i.map(c=>Ki(...c)),...l.default?[l.default()]:[]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=(e,t)=>(n,{slots:s})=>Ki(Kb,{...n,iconNode:t,name:e},s);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=on("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=on("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=on("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=on("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=on("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=on("dumbbell",[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=on("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=on("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=on("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=on("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),ev={class:"main-nav"},nv={class:"nav-container"},sv={class:"nav-links"},iv=Re({__name:"Navigation",setup(e){const t=At(()=>new Date().toISOString().split("T")[0]);return(n,s)=>{const i=yo("router-link");return X(),it("nav",ev,[R("div",nv,[st(i,{to:"/",class:"nav-brand"},{default:On(()=>[st(yt(Ip),{size:24}),s[0]||(s[0]=R("span",null,"FitTracker",-1))]),_:1,__:[0]}),R("div",sv,[st(i,{to:"/",class:"nav-link","active-class":"active",exact:""},{default:On(()=>[st(yt(Zb),{size:18}),s[1]||(s[1]=R("span",null,"Dashboard",-1))]),_:1,__:[1]}),st(i,{to:`/workout/${t.value}`,class:"nav-link","active-class":"active"},{default:On(()=>[st(yt(uc),{size:18}),s[2]||(s[2]=R("span",null,"Workout",-1))]),_:1,__:[2]},8,["to"]),st(i,{to:"/history",class:"nav-link","active-class":"active"},{default:On(()=>[st(yt(Gb),{size:18}),s[3]||(s[3]=R("span",null,"History",-1))]),_:1,__:[3]})])])])}}}),kn=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},ov=kn(iv,[["__scopeId","data-v-e0d11a3d"]]);/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=()=>{};var jh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N=function(e,t){if(!e)throw ei(t)},ei=function(e){return new Error("Firebase Database ("+Pp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},av=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const i=e[n++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[s++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=e[n++],r=e[n++],a=e[n++],l=((i&7)<<18|(o&63)<<12|(r&63)<<6|a&63)-65536;t[s++]=String.fromCharCode(55296+(l>>10)),t[s++]=String.fromCharCode(56320+(l&1023))}else{const o=e[n++],r=e[n++];t[s++]=String.fromCharCode((i&15)<<12|(o&63)<<6|r&63)}}return t.join("")},dc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<e.length;i+=3){const o=e[i],r=i+1<e.length,a=r?e[i+1]:0,l=i+2<e.length,c=l?e[i+2]:0,h=o>>2,u=(o&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,r||(d=64)),s.push(n[h],n[u],n[d],n[f])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ap(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):av(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<e.length;){const o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const c=i<e.length?n[e.charAt(i)]:64;++i;const u=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||a==null||c==null||u==null)throw new lv;const d=o<<2|a>>4;if(s.push(d),c!==64){const f=a<<4&240|c>>2;if(s.push(f),u!==64){const p=c<<6&192|u;s.push(p)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class lv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Rp=function(e){const t=Ap(e);return dc.encodeByteArray(t,!0)},hr=function(e){return Rp(e).replace(/\./g,"")},ml=function(e){try{return dc.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(e){return Dp(void 0,e)}function Dp(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!hv(n)||(e[n]=Dp(e[n],t[n]));return e}function hv(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=()=>uv().__FIREBASE_DEFAULTS__,fv=()=>{if(typeof process>"u"||typeof jh>"u")return;const e=jh.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},pv=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&ml(e[1]);return t&&JSON.parse(t)},Op=()=>{try{return rv()||dv()||fv()||pv()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},gv=e=>Op()?.emulatorHosts?.[e],mv=e=>{const t=gv(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},Np=()=>Op()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _v(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const r={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...e};return[hr(JSON.stringify(n)),hr(JSON.stringify(r)),""].join(".")}const Pi={};function bv(){const e={prod:[],emulator:[]};for(const t of Object.keys(Pi))Pi[t]?e.emulator.push(t):e.prod.push(t);return e}function vv(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Uh=!1;function xv(e,t){if(typeof window>"u"||typeof document>"u"||!fc(window.location.host)||Pi[e]===t||Pi[e]||Uh)return;Pi[e]=t;function n(d){return`__firebase__banner__${d}`}const s="__firebase__banner",o=bv().prod.length>0;function r(){const d=document.getElementById(s);d&&d.remove()}function a(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function l(d,f){d.setAttribute("width","24"),d.setAttribute("id",f),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function c(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{Uh=!0,r()},d}function h(d,f){d.setAttribute("id",f),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function u(){const d=vv(s),f=n("text"),p=document.getElementById(f)||document.createElement("span"),g=n("learnmore"),m=document.getElementById(g)||document.createElement("a"),y=n("preprendIcon"),v=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const C=d.element;a(C),h(m,g);const w=c();l(v,y),C.append(v,p,m,w),document.body.appendChild(C)}o?(p.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",u):u()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wv())}function Cv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sv(){return Pp.NODE_ADMIN===!0}function Ev(){try{return typeof indexedDB=="object"}catch{return!1}}function kv(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="FirebaseError";class vo extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=Tv,Object.setPrototypeOf(this,vo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fp.prototype.create)}}class Fp{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],r=o?Iv(o,s):"Error",a=`${this.serviceName}: ${r} (${i}).`;return new vo(i,a,s)}}function Iv(e,t){return e.replace(Mv,(n,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const Mv=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(e){return JSON.parse(e)}function Ut(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp=function(e){let t={},n={},s={},i="";try{const o=e.split(".");t=Gi(ml(o[0])||""),n=Gi(ml(o[1])||""),i=o[2],s=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:s,signature:i}},Pv=function(e){const t=Bp(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Av=function(e){const t=Bp(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Us(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Yh(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ur(e,t,n){const s={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=t.call(n,e[i],i,e));return s}function dr(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const i of n){if(!s.includes(i))return!1;const o=e[i],r=t[i];if(qh(o)&&qh(r)){if(!dr(o,r))return!1}else if(o!==r)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function qh(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const s=this.W_;if(typeof t=="string")for(let u=0;u<16;u++)s[u]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let u=0;u<16;u++)s[u]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let u=16;u<80;u++){const d=s[u-3]^s[u-8]^s[u-14]^s[u-16];s[u]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],r=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,h;for(let u=0;u<80;u++){u<40?u<20?(c=a^o&(r^a),h=1518500249):(c=o^r^a,h=1859775393):u<60?(c=o&r|a&(o|r),h=2400959708):(c=o^r^a,h=3395469782);const d=(i<<5|i>>>27)+c+l+h+s[u]&4294967295;l=a,a=r,r=(o<<30|o>>>2)&4294967295,o=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+r&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);const s=n-this.blockSize;let i=0;const o=this.buf_;let r=this.inbuf_;for(;i<n;){if(r===0)for(;i<=s;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(o[r]=t.charCodeAt(i),++r,++i,r===this.blockSize){this.compress_(o),r=0;break}}else for(;i<n;)if(o[r]=t[i],++r,++i,r===this.blockSize){this.compress_(o),r=0;break}}this.inbuf_=r,this.total_+=n}digest(){const t=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[s]=this.chain_[i]>>o&255,++s;return t}}function pc(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);if(i>=55296&&i<=56319){const o=i-55296;s++,N(s<e.length,"Surrogate pair missing trail surrogate.");const r=e.charCodeAt(s)-56320;i=65536+(o<<10)+r}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Jr=function(e){let t=0;for(let n=0;n<e.length;n++){const s=e.charCodeAt(n);s<128?t++:s<2048?t+=2:s>=55296&&s<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(e){return e&&e._delegate?e._delegate:e}class Xi{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new Qr;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Fv(t))try{this.getOrInitializeService({instanceIdentifier:rs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});s.resolve(o)}catch{}}}}clearInstance(t=rs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=rs){return this.instances.has(t)}getOptions(t=rs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[o,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);s===a&&r.resolve(i)}return i}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(t),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&t(o,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Lv(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=rs){return this.component?this.component.multipleInstances?t:rs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Lv(e){return e===rs?void 0:e}function Fv(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Nv(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Mt||(Mt={}));const Wv={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},Hv=Mt.INFO,zv={[Mt.DEBUG]:"log",[Mt.VERBOSE]:"log",[Mt.INFO]:"info",[Mt.WARN]:"warn",[Mt.ERROR]:"error"},Vv=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),i=zv[t];if(i)console[i](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Wp{constructor(t){this.name=t,this._logLevel=Hv,this._logHandler=Vv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Mt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Wv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Mt.DEBUG,...t),this._logHandler(this,Mt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Mt.VERBOSE,...t),this._logHandler(this,Mt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Mt.INFO,...t),this._logHandler(this,Mt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Mt.WARN,...t),this._logHandler(this,Mt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Mt.ERROR,...t),this._logHandler(this,Mt.ERROR,...t)}}const $v=(e,t)=>t.some(n=>e instanceof n);let Kh,Gh;function jv(){return Kh||(Kh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Uv(){return Gh||(Gh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hp=new WeakMap,_l=new WeakMap,zp=new WeakMap,Ma=new WeakMap,gc=new WeakMap;function Yv(e){const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",r)},o=()=>{n(Wn(e.result)),i()},r=()=>{s(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",r)});return t.then(n=>{n instanceof IDBCursor&&Hp.set(n,e)}).catch(()=>{}),gc.set(t,e),t}function qv(e){if(_l.has(e))return;const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",r),e.removeEventListener("abort",r)},o=()=>{n(),i()},r=()=>{s(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",r),e.addEventListener("abort",r)});_l.set(e,t)}let yl={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return _l.get(e);if(t==="objectStoreNames")return e.objectStoreNames||zp.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Kv(e){yl=e(yl)}function Gv(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(Pa(this),t,...n);return zp.set(s,t.sort?t.sort():[t]),Wn(s)}:Uv().includes(e)?function(...t){return e.apply(Pa(this),t),Wn(Hp.get(this))}:function(...t){return Wn(e.apply(Pa(this),t))}}function Xv(e){return typeof e=="function"?Gv(e):(e instanceof IDBTransaction&&qv(e),$v(e,jv())?new Proxy(e,yl):e)}function Wn(e){if(e instanceof IDBRequest)return Yv(e);if(Ma.has(e))return Ma.get(e);const t=Xv(e);return t!==e&&(Ma.set(e,t),gc.set(t,e)),t}const Pa=e=>gc.get(e);function Qv(e,t,{blocked:n,upgrade:s,blocking:i,terminated:o}={}){const r=indexedDB.open(e,t),a=Wn(r);return s&&r.addEventListener("upgradeneeded",l=>{s(Wn(r.result),l.oldVersion,l.newVersion,Wn(r.transaction),l)}),n&&r.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Jv=["get","getKey","getAll","getAllKeys","count"],Zv=["put","add","delete","clear"],Aa=new Map;function Xh(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Aa.get(t))return Aa.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,i=Zv.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||Jv.includes(n)))return;const o=async function(r,...a){const l=this.transaction(r,i?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Aa.set(t,o),o}Kv(e=>({...e,get:(t,n,s)=>Xh(t,n)||e.get(t,n,s),has:(t,n)=>!!Xh(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ex(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function ex(e){return e.getComponent()?.type==="VERSION"}const bl="@firebase/app",Qh="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn=new Wp("@firebase/app"),nx="@firebase/app-compat",sx="@firebase/analytics-compat",ix="@firebase/analytics",ox="@firebase/app-check-compat",rx="@firebase/app-check",ax="@firebase/auth",lx="@firebase/auth-compat",cx="@firebase/database",hx="@firebase/data-connect",ux="@firebase/database-compat",dx="@firebase/functions",fx="@firebase/functions-compat",px="@firebase/installations",gx="@firebase/installations-compat",mx="@firebase/messaging",_x="@firebase/messaging-compat",yx="@firebase/performance",bx="@firebase/performance-compat",vx="@firebase/remote-config",xx="@firebase/remote-config-compat",wx="@firebase/storage",Cx="@firebase/storage-compat",Sx="@firebase/firestore",Ex="@firebase/ai",kx="@firebase/firestore-compat",Tx="firebase",Ix="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl="[DEFAULT]",Mx={[bl]:"fire-core",[nx]:"fire-core-compat",[ix]:"fire-analytics",[sx]:"fire-analytics-compat",[rx]:"fire-app-check",[ox]:"fire-app-check-compat",[ax]:"fire-auth",[lx]:"fire-auth-compat",[cx]:"fire-rtdb",[hx]:"fire-data-connect",[ux]:"fire-rtdb-compat",[dx]:"fire-fn",[fx]:"fire-fn-compat",[px]:"fire-iid",[gx]:"fire-iid-compat",[mx]:"fire-fcm",[_x]:"fire-fcm-compat",[yx]:"fire-perf",[bx]:"fire-perf-compat",[vx]:"fire-rc",[xx]:"fire-rc-compat",[wx]:"fire-gcs",[Cx]:"fire-gcs-compat",[Sx]:"fire-fst",[kx]:"fire-fst-compat",[Ex]:"fire-vertex","fire-js":"fire-js",[Tx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new Map,Px=new Map,xl=new Map;function Jh(e,t){try{e.container.addComponent(t)}catch(n){Cn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function pr(e){const t=e.name;if(xl.has(t))return Cn.debug(`There were multiple attempts to register component ${t}.`),!1;xl.set(t,e);for(const n of fr.values())Jh(n,e);for(const n of Px.values())Jh(n,e);return!0}function Ax(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Rx(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hn=new Fp("app","Firebase",Dx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=Ix;function Vp(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s={name:vl,automaticDataCollectionEnabled:!0,...t},i=s.name;if(typeof i!="string"||!i)throw Hn.create("bad-app-name",{appName:String(i)});if(n||(n=Np()),!n)throw Hn.create("no-options");const o=fr.get(i);if(o){if(dr(n,o.options)&&dr(s,o.config))return o;throw Hn.create("duplicate-app",{appName:i})}const r=new Bv(i);for(const l of xl.values())r.addComponent(l);const a=new Ox(n,s,r);return fr.set(i,a),a}function Lx(e=vl){const t=fr.get(e);if(!t&&e===vl&&Np())return Vp();if(!t)throw Hn.create("no-app",{appName:e});return t}function Hs(e,t,n){let s=Mx[e]??e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const r=[`Unable to register library "${s}" with version "${t}":`];i&&r.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&r.push("and"),o&&r.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Cn.warn(r.join(" "));return}pr(new Xi(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="firebase-heartbeat-database",Bx=1,Qi="firebase-heartbeat-store";let Ra=null;function $p(){return Ra||(Ra=Qv(Fx,Bx,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Qi)}catch(n){console.warn(n)}}}}).catch(e=>{throw Hn.create("idb-open",{originalErrorMessage:e.message})})),Ra}async function Wx(e){try{const n=(await $p()).transaction(Qi),s=await n.objectStore(Qi).get(jp(e));return await n.done,s}catch(t){if(t instanceof vo)Cn.warn(t.message);else{const n=Hn.create("idb-get",{originalErrorMessage:t?.message});Cn.warn(n.message)}}}async function Zh(e,t){try{const s=(await $p()).transaction(Qi,"readwrite");await s.objectStore(Qi).put(t,jp(e)),await s.done}catch(n){if(n instanceof vo)Cn.warn(n.message);else{const s=Hn.create("idb-set",{originalErrorMessage:n?.message});Cn.warn(s.message)}}}function jp(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=1024,zx=30;class Vx{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jx(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=tu();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>zx){const i=Ux(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Cn.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=tu(),{heartbeatsToSend:n,unsentEntries:s}=$x(this._heartbeatsCache.heartbeats),i=hr(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Cn.warn(t),""}}}function tu(){return new Date().toISOString().substring(0,10)}function $x(e,t=Hx){const n=[];let s=e.slice();for(const i of e){const o=n.find(r=>r.agent===i.agent);if(o){if(o.dates.push(i.date),eu(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),eu(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class jx{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ev()?kv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Wx(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Zh(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Zh(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function eu(e){return hr(JSON.stringify({version:2,heartbeats:e})).length}function Ux(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(e){pr(new Xi("platform-logger",t=>new tx(t),"PRIVATE")),pr(new Xi("heartbeat",t=>new Vx(t),"PRIVATE")),Hs(bl,Qh,e),Hs(bl,Qh,"esm2020"),Hs("fire-js","")}Yx("");var nu={};const su="@firebase/database",iu="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Up="";function qx(e){Up=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ut(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:Gi(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Tn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Kx(t)}}catch{}return new Gx},hs=Yp("localStorage"),Xx=Yp("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new Wp("@firebase/database"),Qx=function(){let e=1;return function(){return e++}}(),qp=function(e){const t=Ov(e),n=new Dv;n.update(t);const s=n.digest();return dc.encodeByteArray(s)},xo=function(...e){let t="";for(let n=0;n<e.length;n++){const s=e[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?t+=xo.apply(null,s):typeof s=="object"?t+=Ut(s):t+=s,t+=" "}return t};let Ai=null,ou=!0;const Jx=function(e,t){N(!0,"Can't turn on custom loggers persistently."),zs.logLevel=Mt.VERBOSE,Ai=zs.log.bind(zs)},ne=function(...e){if(ou===!0&&(ou=!1,Ai===null&&Xx.get("logging_enabled")===!0&&Jx()),Ai){const t=xo.apply(null,e);Ai(t)}},wo=function(e){return function(...t){ne(e,...t)}},wl=function(...e){const t="FIREBASE INTERNAL ERROR: "+xo(...e);zs.error(t)},Sn=function(...e){const t=`FIREBASE FATAL ERROR: ${xo(...e)}`;throw zs.error(t),new Error(t)},xe=function(...e){const t="FIREBASE WARNING: "+xo(...e);zs.warn(t)},Zx=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&xe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Kp=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},t0=function(e){if(document.readyState==="complete")e();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ys="[MIN_NAME]",ms="[MAX_NAME]",ni=function(e,t){if(e===t)return 0;if(e===Ys||t===ms)return-1;if(t===Ys||e===ms)return 1;{const n=ru(e),s=ru(t);return n!==null?s!==null?n-s===0?e.length-t.length:n-s:-1:s!==null?1:e<t?-1:1}},e0=function(e,t){return e===t?0:e<t?-1:1},li=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ut(t))},mc=function(e){if(typeof e!="object"||e===null)return Ut(e);const t=[];for(const s in e)t.push(s);t.sort();let n="{";for(let s=0;s<t.length;s++)s!==0&&(n+=","),n+=Ut(t[s]),n+=":",n+=mc(e[t[s]]);return n+="}",n},Gp=function(e,t){const n=e.length;if(n<=t)return[e];const s=[];for(let i=0;i<n;i+=t)i+t>n?s.push(e.substring(i,n)):s.push(e.substring(i,i+t));return s};function we(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Xp=function(e){N(!Kp(e),"Invalid JSON number");const t=11,n=52,s=(1<<t-1)-1;let i,o,r,a,l;e===0?(o=0,r=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),s),o=a+s,r=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,r=Math.round(e/Math.pow(2,1-s-n))));const c=[];for(l=n;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);for(l=t;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(i?1:0),c.reverse();const h=c.join("");let u="";for(l=0;l<64;l+=8){let d=parseInt(h.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),u=u+d}return u.toLowerCase()},n0=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},s0=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function i0(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");const s=new Error(e+" at "+t._path.toString()+": "+n);return s.code=e.toUpperCase(),s}const o0=new RegExp("^-?(0*)\\d{1,10}$"),r0=-2147483648,a0=2147483647,ru=function(e){if(o0.test(e)){const t=Number(e);if(t>=r0&&t<=a0)return t}return null},si=function(e){try{e()}catch(t){setTimeout(()=>{const n=t.stack||"";throw xe("Exception was thrown by user callback.",n),t},Math.floor(0))}},l0=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ri=function(e,t){const n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,Rx(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(s=>this.appCheck=s)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,s):n(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){xe(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(t,n,s){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(ne("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,s):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xe(t)}}class Zo{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Zo.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c="5",Qp="v",Jp="s",Zp="r",tg="f",eg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ng="ls",sg="p",Cl="ac",ig="websocket",og="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(t,n,s,i,o=!1,r="",a=!1,l=!1,c=null){this.secure=n,this.namespace=s,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=r,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=hs.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&hs.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function u0(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function ag(e,t,n){N(typeof t=="string","typeof type must == string"),N(typeof n=="object","typeof params must == object");let s;if(t===ig)s=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===og)s=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);u0(e)&&(n.ns=e.namespace);const i=[];return we(n,(o,r)=>{i.push(o+"="+r)}),s+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(){this.counters_={}}incrementCounter(t,n=1){Tn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return cv(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da={},Oa={};function yc(e){const t=e.toString();return Da[t]||(Da[t]=new d0),Da[t]}function f0(e,t){const n=e.toString();return Oa[n]||(Oa[n]=t()),Oa[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<s.length;++i)s[i]&&si(()=>{this.onMessage_(s[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au="start",g0="close",m0="pLPCommand",_0="pRTLPCB",lg="id",cg="pw",hg="ser",y0="cb",b0="seg",v0="ts",x0="d",w0="dframe",ug=1870,dg=30,C0=ug-dg,S0=25e3,E0=3e4;class As{constructor(t,n,s,i,o,r,a){this.connId=t,this.repoInfo=n,this.applicationId=s,this.appCheckToken=i,this.authToken=o,this.transportSessionId=r,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=wo(t),this.stats_=yc(n),this.urlFn=l=>(this.appCheckToken&&(l[Cl]=this.appCheckToken),ag(n,og,l))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new p0(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(E0)),t0(()=>{if(this.isClosed_)return;this.scriptTagHolder=new bc((...o)=>{const[r,a,l,c,h]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,r===au)this.id=a,this.password=l;else if(r===g0)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+r)},(...o)=>{const[r,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(r,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[au]="t",s[hg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[y0]=this.scriptTagHolder.uniqueCallbackIdentifier),s[Qp]=_c,this.transportSessionId&&(s[Jp]=this.transportSessionId),this.lastSessionId&&(s[ng]=this.lastSessionId),this.applicationId&&(s[sg]=this.applicationId),this.appCheckToken&&(s[Cl]=this.appCheckToken),typeof location<"u"&&location.hostname&&eg.test(location.hostname)&&(s[Zp]=tg);const i=this.urlFn(s);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){As.forceAllow_=!0}static forceDisallow(){As.forceDisallow_=!0}static isAvailable(){return As.forceAllow_?!0:!As.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!n0()&&!s0()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=Ut(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Rp(n),i=Gp(s,C0);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[w0]="t",s[lg]=t,s[cg]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=Ut(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class bc{constructor(t,n,s,i){this.onDisconnect=s,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Qx(),window[m0+this.uniqueCallbackIdentifier]=t,window[_0+this.uniqueCallbackIdentifier]=n,this.myIFrame=bc.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const r="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(a){ne("frame writing exception"),a.stack&&ne(a.stack),ne(a)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||ne("No IE domain setting required")}catch{const s=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[lg]=this.myID,t[cg]=this.myPW,t[hg]=this.currentSerial;let n=this.urlFn(t),s="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+dg+s.length<=ug;){const r=this.pendingSegs.shift();s=s+"&"+b0+i+"="+r.seg+"&"+v0+i+"="+r.ts+"&"+x0+i+"="+r.d,i++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,s){this.pendingSegs.push({seg:t,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(s,Math.floor(S0)),o=()=>{clearTimeout(i),s()};this.addTag(t,o)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=t,s.onload=s.onreadystatechange=function(){const i=s.readyState;(!i||i==="loaded"||i==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{ne("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=16384,T0=45e3;let gr=null;typeof MozWebSocket<"u"?gr=MozWebSocket:typeof WebSocket<"u"&&(gr=WebSocket);class De{constructor(t,n,s,i,o,r,a){this.connId=t,this.applicationId=s,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=wo(this.connId),this.stats_=yc(n),this.connURL=De.connectionURL_(n,r,a,i,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,s,i,o){const r={};return r[Qp]=_c,typeof location<"u"&&location.hostname&&eg.test(location.hostname)&&(r[Zp]=tg),n&&(r[Jp]=n),s&&(r[ng]=s),i&&(r[Cl]=i),o&&(r[sg]=o),ag(t,ig,r)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hs.set("previous_websocket_failure",!0);try{let s;Sv(),this.mySock=new gr(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const i=s.message||s.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const i=s.message||s.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){De.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&gr!==null&&!De.forceDisallow_}static previouslyFailed(){return hs.isInMemoryStorage||hs.get("previous_websocket_failure")===!0}markConnectionHealthy(){hs.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=Gi(n);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(N(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const n=Ut(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Gp(n,k0);s.length>1&&this.sendString_(String(s.length));for(let i=0;i<s.length;i++)this.sendString_(s[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(T0))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}De.responsesRequiredToBeHealthy=2;De.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{static get ALL_TRANSPORTS(){return[As,De]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const n=De&&De.isAvailable();let s=n&&!De.previouslyFailed();if(t.webSocketOnly&&(n||xe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[De];else{const i=this.transports_=[];for(const o of Ji.ALL_TRANSPORTS)o&&o.isAvailable()&&i.push(o);Ji.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ji.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=6e4,M0=5e3,P0=10*1024,A0=100*1024,Na="t",lu="d",R0="s",cu="r",D0="e",hu="o",uu="a",du="n",fu="p",O0="h";class N0{constructor(t,n,s,i,o,r,a,l,c,h){this.id=t,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=r,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=wo("c:"+this.id+":"),this.transportManager_=new Ji(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ri(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>A0?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>P0?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Na in t){const n=t[Na];n===uu?this.upgradeIfSecondaryHealthy_():n===cu?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===hu&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=li("t",t),s=li("d",t);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:fu,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:uu,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:du,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=li("t",t),s=li("d",t);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=li(Na,t);if(lu in t){const s=t[lu];if(n===O0){const i={...s};this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===du){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===R0?this.onConnectionShutdown_(s):n===cu?this.onReset_(s):n===D0?wl("Server Error: "+s):n===hu?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wl("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,s=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),_c!==s&&xe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),Ri(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(I0))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ri(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(M0))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:fu,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{put(t,n,s,i){}merge(t,n,s,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,s){}onDisconnectMerge(t,n,s){}onDisconnectCancel(t,n){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(t){this.allowedEvents_=t,this.listeners_={},N(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const s=[...this.listeners_[t]];for(let i=0;i<s.length;i++)s[i].callback.apply(s[i].context,n)}}on(t,n,s){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:s});const i=this.getInitialEvent(t);i&&n.apply(s,i)}off(t,n,s){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!s||s===i[o].context)){i.splice(o,1);return}}validateEventType_(t){N(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends pg{static getInstance(){return new mr}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Lp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return N(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=32,gu=768;class St{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let s=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[s]=this.pieces_[i],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function pt(){return new St("")}function lt(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Yn(e){return e.pieces_.length-e.pieceNum_}function Pt(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new St(e.pieces_,t)}function gg(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function L0(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function mg(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function _g(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new St(t,0)}function Yt(e,t){const n=[];for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);if(t instanceof St)for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);else{const s=t.split("/");for(let i=0;i<s.length;i++)s[i].length>0&&n.push(s[i])}return new St(n,0)}function rt(e){return e.pieceNum_>=e.pieces_.length}function de(e,t){const n=lt(e),s=lt(t);if(n===null)return t;if(n===s)return de(Pt(e),Pt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function yg(e,t){if(Yn(e)!==Yn(t))return!1;for(let n=e.pieceNum_,s=t.pieceNum_;n<=e.pieces_.length;n++,s++)if(e.pieces_[n]!==t.pieces_[s])return!1;return!0}function Ne(e,t){let n=e.pieceNum_,s=t.pieceNum_;if(Yn(e)>Yn(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[s])return!1;++n,++s}return!0}class F0{constructor(t,n){this.errorPrefix_=n,this.parts_=mg(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Jr(this.parts_[s]);bg(this)}}function B0(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Jr(t),bg(e)}function W0(e){const t=e.parts_.pop();e.byteLength_-=Jr(t),e.parts_.length>0&&(e.byteLength_-=1)}function bg(e){if(e.byteLength_>gu)throw new Error(e.errorPrefix_+"has a key path longer than "+gu+" bytes ("+e.byteLength_+").");if(e.parts_.length>pu)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+pu+") or object contains a cycle "+as(e))}function as(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends pg{static getInstance(){return new vc}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[t];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(t){return N(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=1e3,H0=300*1e3,mu=30*1e3,z0=1.3,V0=3e4,$0="server_kill",_u=3;class vn extends fg{constructor(t,n,s,i,o,r,a,l){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=i,this.onServerInfoUpdate_=o,this.authTokenProvider_=r,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=vn.nextPersistentConnectionId_++,this.log_=wo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ci,this.maxReconnectDelay_=H0,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");vc.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&mr.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,s){const i=++this.requestNumber_,o={r:i,a:t,b:n};this.log_(Ut(o)),N(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),s&&(this.requestCBHash_[i]=s)}get(t){this.initConnection_();const n=new Qr,i={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:r=>{const a=r.d;r.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(t,n,s,i){this.initConnection_();const o=t._queryIdentifier,r=t._path.toString();this.log_("Listen called for "+r+" "+o),this.listens.has(r)||this.listens.set(r,new Map),N(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),N(!this.listens.get(r).has(o),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:t,tag:s};this.listens.get(r).set(o,a),this.connected_&&this.sendListen_(a)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(t){const n=t.query,s=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+s+" for "+i);const o={p:s},r="q";t.tag&&(o.q=n._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(r,o,a=>{const l=a.d,c=a.s;vn.warnOnListenWarnings_(l,n),(this.listens.get(s)&&this.listens.get(s).get(i))===t&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(s,i),t.onComplete&&t.onComplete(c,l))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&Tn(t,"w")){const s=Us(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();xe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Av(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=mu)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=Pv(t)?"auth":"gauth",s={cred:t};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,i=>{const o=i.s,r=i.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,s=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(t,n){const s=t._path.toString(),i=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+i),N(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,i)&&this.connected_&&this.sendUnlisten_(s,i,t._queryObject,n)}sendUnlisten_(t,n,s,i){this.log_("Unlisten on "+t+" for "+n);const o={p:t},r="n";i&&(o.q=s,o.t=i),this.sendRequest(r,o)}onDisconnectPut(t,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:s})}onDisconnectMerge(t,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:s})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,s,i){const o={p:n,d:s};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,r=>{i&&setTimeout(()=>{i(r.s,r.d)},Math.floor(0))})}put(t,n,s,i){this.putInternal("p",t,n,s,i)}merge(t,n,s,i){this.putInternal("m",t,n,s,i)}putInternal(t,n,s,i,o){this.initConnection_();const r={p:n,d:s};o!==void 0&&(r.h=o),this.outstandingPuts_.push({action:t,request:r,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,s,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(o.s,o.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const o=s.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Ut(t));const n=t.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):wl("Unrecognized action received from server: "+Ut(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){N(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ci,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ci,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>V0&&(this.reconnectDelay_=ci),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*z0)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+vn.nextConnectionId_++,o=this.lastSessionId;let r=!1,a=null;const l=function(){a?a.close():(r=!0,s())},c=function(u){N(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(u)};this.realtime_={close:l,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[u,d]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);r?ne("getToken() completed but was canceled"):(ne("getToken() completed. Creating connection."),this.authToken_=u&&u.accessToken,this.appCheckToken_=d&&d.token,a=new N0(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,s,f=>{xe(f+" ("+this.repoInfo_.toString()+")"),this.interrupt($0)},o))}catch(u){this.log_("Failed to get token: "+u),r||(this.repoInfo_.nodeAdmin&&xe(u),l())}}}interrupt(t){ne("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ne("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Yh(this.interruptReasons_)&&(this.reconnectDelay_=ci,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let s;n?s=n.map(o=>mc(o)).join("$"):s="default";const i=this.removeListen_(t,s);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(t,n){const s=new St(t).toString();let i;if(this.listens.has(s)){const o=this.listens.get(s);i=o.get(n),o.delete(n),o.size===0&&this.listens.delete(s)}else i=void 0;return i}onAuthRevoked_(t,n){ne("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=_u&&(this.reconnectDelay_=mu,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){ne("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=_u&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+Up.replace(/\./g,"-")]=1,Lp()?t["framework.cordova"]=1:Cv()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=mr.getInstance().currentlyOnline();return Yh(this.interruptReasons_)&&t}}vn.nextPersistentConnectionId_=0;vn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new ot(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const s=new ot(Ys,t),i=new ot(Ys,n);return this.compare(s,i)!==0}minPost(){return ot.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do;class vg extends Zr{static get __EMPTY_NODE(){return Do}static set __EMPTY_NODE(t){Do=t}compare(t,n){return ni(t.name,n.name)}isDefinedOn(t){throw ei("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return ot.MIN}maxPost(){return new ot(ms,Do)}makePost(t,n){return N(typeof t=="string","KeyIndex indexValue must always be a string."),new ot(t,Do)}toString(){return".key"}}const Vs=new vg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(t,n,s,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let r=1;for(;!t.isEmpty();)if(t=t,r=n?s(t.key,n):1,i&&(r*=-1),r<0)this.isReverse_?t=t.left:t=t.right;else if(r===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Gt{constructor(t,n,s,i,o){this.key=t,this.value=n,this.color=s??Gt.RED,this.left=i??ve.EMPTY_NODE,this.right=o??ve.EMPTY_NODE}copy(t,n,s,i,o){return new Gt(t??this.key,n??this.value,s??this.color,i??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let i=this;const o=s(t,i.key);return o<0?i=i.copy(null,null,null,i.left.insert(t,n,s),null):o===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(t,n,s)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ve.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let s,i;if(s=this,n(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(t,s.key)===0){if(s.right.isEmpty())return ve.EMPTY_NODE;i=s.right.min_(),s=s.copy(i.key,i.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Gt.RED=!0;Gt.BLACK=!1;class j0{copy(t,n,s,i,o){return this}insert(t,n,s){return new Gt(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ve{constructor(t,n=ve.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new ve(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Gt.BLACK,null,null))}remove(t){return new ve(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Gt.BLACK,null,null))}get(t){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(t,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(t){let n,s=this.root_,i=null;for(;!s.isEmpty();)if(n=this.comparator_(t,s.key),n===0){if(s.left.isEmpty())return i?i.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(i=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Oo(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Oo(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Oo(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Oo(this.root_,null,this.comparator_,!0,t)}}ve.EMPTY_NODE=new j0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(e,t){return ni(e.name,t.name)}function xc(e,t){return ni(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl;function Y0(e){Sl=e}const xg=function(e){return typeof e=="number"?"number:"+Xp(e):"string:"+e},wg=function(e){if(e.isLeafNode()){const t=e.val();N(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Tn(t,".sv"),"Priority must be a string or number.")}else N(e===Sl||e.isEmpty(),"priority of unexpected type.");N(e===Sl||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yu;class Kt{static set __childrenNodeConstructor(t){yu=t}static get __childrenNodeConstructor(){return yu}constructor(t,n=Kt.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,N(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),wg(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Kt(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Kt.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return rt(t)?this:lt(t)===".priority"?this.priorityNode_:Kt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:Kt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const s=lt(t);return s===null?n:n.isEmpty()&&s!==".priority"?this:(N(s!==".priority"||Yn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Kt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Pt(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+xg(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=Xp(this.value_):t+=this.value_,this.lazyHash_=qp(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Kt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Kt.__childrenNodeConstructor?-1:(N(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,s=typeof this.value_,i=Kt.VALUE_TYPE_ORDER.indexOf(n),o=Kt.VALUE_TYPE_ORDER.indexOf(s);return N(i>=0,"Unknown leaf type: "+n),N(o>=0,"Unknown leaf type: "+s),i===o?s==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Kt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cg,Sg;function q0(e){Cg=e}function K0(e){Sg=e}class G0 extends Zr{compare(t,n){const s=t.node.getPriority(),i=n.node.getPriority(),o=s.compareTo(i);return o===0?ni(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return ot.MIN}maxPost(){return new ot(ms,new Kt("[PRIORITY-POST]",Sg))}makePost(t,n){const s=Cg(t);return new ot(n,new Kt("[PRIORITY-POST]",s))}toString(){return".priority"}}const Ft=new G0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=Math.log(2);class Q0{constructor(t){const n=o=>parseInt(Math.log(o)/X0,10),s=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const i=s(this.count);this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const _r=function(e,t,n,s){e.sort(t);const i=function(l,c){const h=c-l;let u,d;if(h===0)return null;if(h===1)return u=e[l],d=n?n(u):u,new Gt(d,u.node,Gt.BLACK,null,null);{const f=parseInt(h/2,10)+l,p=i(l,f),g=i(f+1,c);return u=e[f],d=n?n(u):u,new Gt(d,u.node,Gt.BLACK,p,g)}},o=function(l){let c=null,h=null,u=e.length;const d=function(p,g){const m=u-p,y=u;u-=p;const v=i(m+1,y),C=e[m],w=n?n(C):C;f(new Gt(w,C.node,g,null,v))},f=function(p){c?(c.left=p,c=p):(h=p,c=p)};for(let p=0;p<l.count;++p){const g=l.nextBitIsOne(),m=Math.pow(2,l.count-(p+1));g?d(m,Gt.BLACK):(d(m,Gt.BLACK),d(m,Gt.RED))}return h},r=new Q0(e.length),a=o(r);return new ve(s||t,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La;const ks={};class mn{static get Default(){return N(ks&&Ft,"ChildrenNode.ts has not been loaded"),La=La||new mn({".priority":ks},{".priority":Ft}),La}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){const n=Us(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof ve?n:null}hasIndex(t){return Tn(this.indexSet_,t.toString())}addIndex(t,n){N(t!==Vs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let i=!1;const o=n.getIterator(ot.Wrap);let r=o.getNext();for(;r;)i=i||t.isDefinedOn(r.node),s.push(r),r=o.getNext();let a;i?a=_r(s,t.getCompare()):a=ks;const l=t.toString(),c={...this.indexSet_};c[l]=t;const h={...this.indexes_};return h[l]=a,new mn(h,c)}addToIndexes(t,n){const s=ur(this.indexes_,(i,o)=>{const r=Us(this.indexSet_,o);if(N(r,"Missing index implementation for "+o),i===ks)if(r.isDefinedOn(t.node)){const a=[],l=n.getIterator(ot.Wrap);let c=l.getNext();for(;c;)c.name!==t.name&&a.push(c),c=l.getNext();return a.push(t),_r(a,r.getCompare())}else return ks;else{const a=n.get(t.name);let l=i;return a&&(l=l.remove(new ot(t.name,a))),l.insert(t,t.node)}});return new mn(s,this.indexSet_)}removeFromIndexes(t,n){const s=ur(this.indexes_,i=>{if(i===ks)return i;{const o=n.get(t.name);return o?i.remove(new ot(t.name,o)):i}});return new mn(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hi;class q{static get EMPTY_NODE(){return hi||(hi=new q(new ve(xc),null,mn.Default))}constructor(t,n,s){this.children_=t,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&wg(this.priorityNode_),this.children_.isEmpty()&&N(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||hi}updatePriority(t){return this.children_.isEmpty()?this:new q(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?hi:n}}getChild(t){const n=lt(t);return n===null?this:this.getImmediateChild(n).getChild(Pt(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(N(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const s=new ot(t,n);let i,o;n.isEmpty()?(i=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(s,this.children_)):(i=this.children_.insert(t,n),o=this.indexMap_.addToIndexes(s,this.children_));const r=i.isEmpty()?hi:this.priorityNode_;return new q(i,r,o)}}updateChild(t,n){const s=lt(t);if(s===null)return n;{N(lt(t)!==".priority"||Yn(t)===1,".priority must be the last token in a path");const i=this.getImmediateChild(s).updateChild(Pt(t),n);return this.updateImmediateChild(s,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let s=0,i=0,o=!0;if(this.forEachChild(Ft,(r,a)=>{n[r]=a.val(t),s++,o&&q.INTEGER_REGEXP_.test(r)?i=Math.max(i,Number(r)):o=!1}),!t&&o&&i<2*s){const r=[];for(const a in n)r[a]=n[a];return r}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+xg(this.getPriority().val())+":"),this.forEachChild(Ft,(n,s)=>{const i=s.hash();i!==""&&(t+=":"+n+":"+i)}),this.lazyHash_=t===""?"":qp(t)}return this.lazyHash_}getPredecessorChildName(t,n,s){const i=this.resolveIndex_(s);if(i){const o=i.getPredecessorKey(new ot(t,n));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new ot(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new ot(n,this.children_.get(n)):null}forEachChild(t,n){const s=this.resolveIndex_(t);return s?s.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(t,i=>i);{const i=this.children_.getIteratorFrom(t.name,ot.Wrap);let o=i.peek();for(;o!=null&&n.compare(o,t)<0;)i.getNext(),o=i.peek();return i}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(t,i=>i);{const i=this.children_.getReverseIteratorFrom(t.name,ot.Wrap);let o=i.peek();for(;o!=null&&n.compare(o,t)>0;)i.getNext(),o=i.peek();return i}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Co?-1:0}withIndex(t){if(t===Vs||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new q(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===Vs||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(Ft),i=n.getIterator(Ft);let o=s.getNext(),r=i.getNext();for(;o&&r;){if(o.name!==r.name||!o.node.equals(r.node))return!1;o=s.getNext(),r=i.getNext()}return o===null&&r===null}else return!1;else return!1}}resolveIndex_(t){return t===Vs?null:this.indexMap_.get(t.toString())}}q.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class J0 extends q{constructor(){super(new ve(xc),q.EMPTY_NODE,mn.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return q.EMPTY_NODE}isEmpty(){return!1}}const Co=new J0;Object.defineProperties(ot,{MIN:{value:new ot(Ys,q.EMPTY_NODE)},MAX:{value:new ot(ms,Co)}});vg.__EMPTY_NODE=q.EMPTY_NODE;Kt.__childrenNodeConstructor=q;Y0(Co);K0(Co);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=!0;function Xt(e,t=null){if(e===null)return q.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),N(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const n=e;return new Kt(n,Xt(t))}if(!(e instanceof Array)&&Z0){const n=[];let s=!1;if(we(e,(r,a)=>{if(r.substring(0,1)!=="."){const l=Xt(a);l.isEmpty()||(s=s||!l.getPriority().isEmpty(),n.push(new ot(r,l)))}}),n.length===0)return q.EMPTY_NODE;const o=_r(n,U0,r=>r.name,xc);if(s){const r=_r(n,Ft.getCompare());return new q(o,Xt(t),new mn({".priority":r},{".priority":Ft}))}else return new q(o,Xt(t),mn.Default)}else{let n=q.EMPTY_NODE;return we(e,(s,i)=>{if(Tn(e,s)&&s.substring(0,1)!=="."){const o=Xt(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(s,o))}}),n.updatePriority(Xt(t))}}q0(Xt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw extends Zr{constructor(t){super(),this.indexPath_=t,N(!rt(t)&&lt(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const s=this.extractChild(t.node),i=this.extractChild(n.node),o=s.compareTo(i);return o===0?ni(t.name,n.name):o}makePost(t,n){const s=Xt(t),i=q.EMPTY_NODE.updateChild(this.indexPath_,s);return new ot(n,i)}maxPost(){const t=q.EMPTY_NODE.updateChild(this.indexPath_,Co);return new ot(ms,t)}toString(){return mg(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew extends Zr{compare(t,n){const s=t.node.compareTo(n.node);return s===0?ni(t.name,n.name):s}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return ot.MIN}maxPost(){return ot.MAX}makePost(t,n){const s=Xt(t);return new ot(n,s)}toString(){return".value"}}const nw=new ew;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(e){return{type:"value",snapshotNode:e}}function qs(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Zi(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function to(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function sw(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(t){this.index_=t}updateChild(t,n,s,i,o,r){N(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=t.getImmediateChild(n);return a.getChild(i).equals(s.getChild(i))&&a.isEmpty()===s.isEmpty()||(r!=null&&(s.isEmpty()?t.hasChild(n)?r.trackChildChange(Zi(n,a)):N(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?r.trackChildChange(qs(n,s)):r.trackChildChange(to(n,s,a))),t.isLeafNode()&&s.isEmpty())?t:t.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(t,n,s){return s!=null&&(t.isLeafNode()||t.forEachChild(Ft,(i,o)=>{n.hasChild(i)||s.trackChildChange(Zi(i,o))}),n.isLeafNode()||n.forEachChild(Ft,(i,o)=>{if(t.hasChild(i)){const r=t.getImmediateChild(i);r.equals(o)||s.trackChildChange(to(i,o,r))}else s.trackChildChange(qs(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?q.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(t){this.indexedFilter_=new wc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=eo.getStartPost_(t),this.endPost_=eo.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,s=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&s}updateChild(t,n,s,i,o,r){return this.matches(new ot(n,s))||(s=q.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,s,i,o,r)}updateFullNode(t,n,s){n.isLeafNode()&&(n=q.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(q.EMPTY_NODE);const o=this;return n.forEachChild(Ft,(r,a)=>{o.matches(new ot(r,a))||(i=i.updateImmediateChild(r,q.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,s)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new eo(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,s,i,o,r){return this.rangedFilter_.matches(new ot(n,s))||(s=q.EMPTY_NODE),t.getImmediateChild(n).equals(s)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,s,i,o,r):this.fullLimitUpdateChild_(t,n,s,o,r)}updateFullNode(t,n,s){let i;if(n.isLeafNode()||n.isEmpty())i=q.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=q.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let r=0;for(;o.hasNext()&&r<this.limit_;){const a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),r++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(q.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let r=0;for(;o.hasNext();){const a=o.getNext();r<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?r++:i=i.updateImmediateChild(a.name,q.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,s)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,s,i,o){let r;if(this.reverse_){const u=this.index_.getCompare();r=(d,f)=>u(f,d)}else r=this.index_.getCompare();const a=t;N(a.numChildren()===this.limit_,"");const l=new ot(n,s),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const u=a.getImmediateChild(n);let d=i.getChildAfterChild(this.index_,c,this.reverse_);for(;d!=null&&(d.name===n||a.hasChild(d.name));)d=i.getChildAfterChild(this.index_,d,this.reverse_);const f=d==null?1:r(d,l);if(h&&!s.isEmpty()&&f>=0)return o?.trackChildChange(to(n,s,u)),a.updateImmediateChild(n,s);{o?.trackChildChange(Zi(n,u));const g=a.updateImmediateChild(n,q.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(o?.trackChildChange(qs(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}}else return s.isEmpty()?t:h&&r(c,l)>=0?(o!=null&&(o.trackChildChange(Zi(c.name,c.node)),o.trackChildChange(qs(n,s))),a.updateImmediateChild(n,s).updateImmediateChild(c.name,q.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ft}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return N(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return N(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ys}hasEnd(){return this.endSet_}getIndexEndValue(){return N(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return N(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ms}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return N(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ft}copy(){const t=new Cc;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function ow(e){return e.loadsAllData()?new wc(e.getIndex()):e.hasLimit()?new iw(e):new eo(e)}function bu(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Ft?n="$priority":e.index_===nw?n="$value":e.index_===Vs?n="$key":(N(e.index_ instanceof tw,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Ut(n),e.startSet_){const s=e.startAfterSet_?"startAfter":"startAt";t[s]=Ut(e.indexStartValue_),e.startNameSet_&&(t[s]+=","+Ut(e.indexStartName_))}if(e.endSet_){const s=e.endBeforeSet_?"endBefore":"endAt";t[s]=Ut(e.indexEndValue_),e.endNameSet_&&(t[s]+=","+Ut(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function vu(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==Ft&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends fg{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(N(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,s,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=i,this.log_=wo("p:rest:"),this.listens_={}}listen(t,n,s,i){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const r=yr.getListenId_(t,s),a={};this.listens_[r]=a;const l=bu(t._queryParams);this.restRequest_(o+".json",l,(c,h)=>{let u=h;if(c===404&&(u=null,c=null),c===null&&this.onDataUpdate_(o,u,!1,s),Us(this.listens_,r)===a){let d;c?c===401?d="permission_denied":d="rest_error:"+c:d="ok",i(d,null)}})}unlisten(t,n){const s=yr.getListenId_(t,n);delete this.listens_[s]}get(t){const n=bu(t._queryParams),s=t._path.toString(),i=new Qr;return this.restRequest_(s+".json",n,(o,r)=>{let a=r;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(s,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);const r=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Rv(n);this.log_("Sending REST request for "+r);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+r+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Gi(a.responseText)}catch{xe("Failed to parse JSON response for "+r+": "+a.responseText)}s(null,l)}else a.status!==401&&a.status!==404&&xe("Got unsuccessful REST response for "+r+" Status: "+a.status),s(a.status);s=null}},a.open("GET",r,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(){this.rootNode_=q.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(){return{value:null,children:new Map}}function kg(e,t,n){if(rt(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{const s=lt(t);e.children.has(s)||e.children.set(s,br());const i=e.children.get(s);t=Pt(t),kg(i,t,n)}}function El(e,t,n){e.value!==null?n(t,e.value):aw(e,(s,i)=>{const o=new St(t.toString()+"/"+s);El(i,o,n)})}function aw(e,t){e.children.forEach((n,s)=>{t(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n={...t};return this.last_&&we(this.last_,(s,i)=>{n[s]=n[s]-i}),this.last_=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu=10*1e3,cw=30*1e3,hw=300*1e3;class uw{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new lw(t);const s=xu+(cw-xu)*Math.random();Ri(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const t=this.statsListener_.get(),n={};let s=!1;we(t,(i,o)=>{o>0&&Tn(this.statsToReport_,i)&&(n[i]=o,s=!0)}),s&&this.server_.reportStats(n),Ri(this.reportStats_.bind(this),Math.floor(Math.random()*2*hw))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Le||(Le={}));function Tg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Sc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ec(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(t,n,s){this.path=t,this.affectedTree=n,this.revert=s,this.type=Le.ACK_USER_WRITE,this.source=Tg()}operationForChild(t){if(rt(this.path)){if(this.affectedTree.value!=null)return N(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new St(t));return new vr(pt(),n,this.revert)}}else return N(lt(this.path)===t,"operationForChild called for unrelated child."),new vr(Pt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(t,n){this.source=t,this.path=n,this.type=Le.LISTEN_COMPLETE}operationForChild(t){return rt(this.path)?new no(this.source,pt()):new no(this.source,Pt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(t,n,s){this.source=t,this.path=n,this.snap=s,this.type=Le.OVERWRITE}operationForChild(t){return rt(this.path)?new _s(this.source,pt(),this.snap.getImmediateChild(t)):new _s(this.source,Pt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(t,n,s){this.source=t,this.path=n,this.children=s,this.type=Le.MERGE}operationForChild(t){if(rt(this.path)){const n=this.children.subtree(new St(t));return n.isEmpty()?null:n.value?new _s(this.source,pt(),n.value):new so(this.source,pt(),n)}else return N(lt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new so(this.source,Pt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t,n,s){this.node_=t,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(rt(t))return this.isFullyInitialized()&&!this.filtered_;const n=lt(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function fw(e,t,n,s){const i=[],o=[];return t.forEach(r=>{r.type==="child_changed"&&e.index_.indexedValueChanged(r.oldSnap,r.snapshotNode)&&o.push(sw(r.childName,r.snapshotNode))}),ui(e,i,"child_removed",t,s,n),ui(e,i,"child_added",t,s,n),ui(e,i,"child_moved",o,s,n),ui(e,i,"child_changed",t,s,n),ui(e,i,"value",t,s,n),i}function ui(e,t,n,s,i,o){const r=s.filter(a=>a.type===n);r.sort((a,l)=>gw(e,a,l)),r.forEach(a=>{const l=pw(e,a,o);i.forEach(c=>{c.respondsTo(a.type)&&t.push(c.createEvent(l,e.query_))})})}function pw(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function gw(e,t,n){if(t.childName==null||n.childName==null)throw ei("Should only compare child_ events.");const s=new ot(t.childName,t.snapshotNode),i=new ot(n.childName,n.snapshotNode);return e.index_.compare(s,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(e,t){return{eventCache:e,serverCache:t}}function Di(e,t,n,s){return ta(new qn(t,n,s),e.serverCache)}function Ig(e,t,n,s){return ta(e.eventCache,new qn(t,n,s))}function xr(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ys(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fa;const mw=()=>(Fa||(Fa=new ve(e0)),Fa);class Dt{static fromObject(t){let n=new Dt(null);return we(t,(s,i)=>{n=n.set(new St(s),i)}),n}constructor(t,n=mw()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:pt(),value:this.value};if(rt(t))return null;{const s=lt(t),i=this.children.get(s);if(i!==null){const o=i.findRootMostMatchingPathAndValue(Pt(t),n);return o!=null?{path:Yt(new St(s),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(rt(t))return this;{const n=lt(t),s=this.children.get(n);return s!==null?s.subtree(Pt(t)):new Dt(null)}}set(t,n){if(rt(t))return new Dt(n,this.children);{const s=lt(t),o=(this.children.get(s)||new Dt(null)).set(Pt(t),n),r=this.children.insert(s,o);return new Dt(this.value,r)}}remove(t){if(rt(t))return this.children.isEmpty()?new Dt(null):new Dt(null,this.children);{const n=lt(t),s=this.children.get(n);if(s){const i=s.remove(Pt(t));let o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new Dt(null):new Dt(this.value,o)}else return this}}get(t){if(rt(t))return this.value;{const n=lt(t),s=this.children.get(n);return s?s.get(Pt(t)):null}}setTree(t,n){if(rt(t))return n;{const s=lt(t),o=(this.children.get(s)||new Dt(null)).setTree(Pt(t),n);let r;return o.isEmpty()?r=this.children.remove(s):r=this.children.insert(s,o),new Dt(this.value,r)}}fold(t){return this.fold_(pt(),t)}fold_(t,n){const s={};return this.children.inorderTraversal((i,o)=>{s[i]=o.fold_(Yt(t,i),n)}),n(t,this.value,s)}findOnPath(t,n){return this.findOnPath_(t,pt(),n)}findOnPath_(t,n,s){const i=this.value?s(n,this.value):!1;if(i)return i;if(rt(t))return null;{const o=lt(t),r=this.children.get(o);return r?r.findOnPath_(Pt(t),Yt(n,o),s):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,pt(),n)}foreachOnPath_(t,n,s){if(rt(t))return this;{this.value&&s(n,this.value);const i=lt(t),o=this.children.get(i);return o?o.foreachOnPath_(Pt(t),Yt(n,i),s):new Dt(null)}}foreach(t){this.foreach_(pt(),t)}foreach_(t,n){this.children.inorderTraversal((s,i)=>{i.foreach_(Yt(t,s),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,s)=>{s.value&&t(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(t){this.writeTree_=t}static empty(){return new He(new Dt(null))}}function Oi(e,t,n){if(rt(t))return new He(new Dt(n));{const s=e.writeTree_.findRootMostValueAndPath(t);if(s!=null){const i=s.path;let o=s.value;const r=de(i,t);return o=o.updateChild(r,n),new He(e.writeTree_.set(i,o))}else{const i=new Dt(n),o=e.writeTree_.setTree(t,i);return new He(o)}}}function wu(e,t,n){let s=e;return we(n,(i,o)=>{s=Oi(s,Yt(t,i),o)}),s}function Cu(e,t){if(rt(t))return He.empty();{const n=e.writeTree_.setTree(t,new Dt(null));return new He(n)}}function kl(e,t){return Cs(e,t)!=null}function Cs(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(de(n.path,t)):null}function Su(e){const t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ft,(s,i)=>{t.push(new ot(s,i))}):e.writeTree_.children.inorderTraversal((s,i)=>{i.value!=null&&t.push(new ot(s,i.value))}),t}function zn(e,t){if(rt(t))return e;{const n=Cs(e,t);return n!=null?new He(new Dt(n)):new He(e.writeTree_.subtree(t))}}function Tl(e){return e.writeTree_.isEmpty()}function Ks(e,t){return Mg(pt(),e.writeTree_,t)}function Mg(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let s=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(N(o.value!==null,"Priority writes must always be leaf nodes"),s=o.value):n=Mg(Yt(e,i),o,n)}),!n.getChild(e).isEmpty()&&s!==null&&(n=n.updateChild(Yt(e,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(e,t){return Dg(t,e)}function _w(e,t,n,s,i){N(s>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:s,visible:i}),i&&(e.visibleWrites=Oi(e.visibleWrites,t,n)),e.lastWriteId=s}function yw(e,t){for(let n=0;n<e.allWrites.length;n++){const s=e.allWrites[n];if(s.writeId===t)return s}return null}function bw(e,t){const n=e.allWrites.findIndex(a=>a.writeId===t);N(n>=0,"removeWrite called with nonexistent writeId.");const s=e.allWrites[n];e.allWrites.splice(n,1);let i=s.visible,o=!1,r=e.allWrites.length-1;for(;i&&r>=0;){const a=e.allWrites[r];a.visible&&(r>=n&&vw(a,s.path)?i=!1:Ne(s.path,a.path)&&(o=!0)),r--}if(i){if(o)return xw(e),!0;if(s.snap)e.visibleWrites=Cu(e.visibleWrites,s.path);else{const a=s.children;we(a,l=>{e.visibleWrites=Cu(e.visibleWrites,Yt(s.path,l))})}return!0}else return!1}function vw(e,t){if(e.snap)return Ne(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Ne(Yt(e.path,n),t))return!0;return!1}function xw(e){e.visibleWrites=Pg(e.allWrites,ww,pt()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function ww(e){return e.visible}function Pg(e,t,n){let s=He.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const r=o.path;let a;if(o.snap)Ne(n,r)?(a=de(n,r),s=Oi(s,a,o.snap)):Ne(r,n)&&(a=de(r,n),s=Oi(s,pt(),o.snap.getChild(a)));else if(o.children){if(Ne(n,r))a=de(n,r),s=wu(s,a,o.children);else if(Ne(r,n))if(a=de(r,n),rt(a))s=wu(s,pt(),o.children);else{const l=Us(o.children,lt(a));if(l){const c=l.getChild(Pt(a));s=Oi(s,pt(),c)}}}else throw ei("WriteRecord should have .snap or .children")}}return s}function Ag(e,t,n,s,i){if(!s&&!i){const o=Cs(e.visibleWrites,t);if(o!=null)return o;{const r=zn(e.visibleWrites,t);if(Tl(r))return n;if(n==null&&!kl(r,pt()))return null;{const a=n||q.EMPTY_NODE;return Ks(r,a)}}}else{const o=zn(e.visibleWrites,t);if(!i&&Tl(o))return n;if(!i&&n==null&&!kl(o,pt()))return null;{const r=function(c){return(c.visible||i)&&(!s||!~s.indexOf(c.writeId))&&(Ne(c.path,t)||Ne(t,c.path))},a=Pg(e.allWrites,r,t),l=n||q.EMPTY_NODE;return Ks(a,l)}}}function Cw(e,t,n){let s=q.EMPTY_NODE;const i=Cs(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Ft,(o,r)=>{s=s.updateImmediateChild(o,r)}),s;if(n){const o=zn(e.visibleWrites,t);return n.forEachChild(Ft,(r,a)=>{const l=Ks(zn(o,new St(r)),a);s=s.updateImmediateChild(r,l)}),Su(o).forEach(r=>{s=s.updateImmediateChild(r.name,r.node)}),s}else{const o=zn(e.visibleWrites,t);return Su(o).forEach(r=>{s=s.updateImmediateChild(r.name,r.node)}),s}}function Sw(e,t,n,s,i){N(s||i,"Either existingEventSnap or existingServerSnap must exist");const o=Yt(t,n);if(kl(e.visibleWrites,o))return null;{const r=zn(e.visibleWrites,o);return Tl(r)?i.getChild(n):Ks(r,i.getChild(n))}}function Ew(e,t,n,s){const i=Yt(t,n),o=Cs(e.visibleWrites,i);if(o!=null)return o;if(s.isCompleteForChild(n)){const r=zn(e.visibleWrites,i);return Ks(r,s.getNode().getImmediateChild(n))}else return null}function kw(e,t){return Cs(e.visibleWrites,t)}function Tw(e,t,n,s,i,o,r){let a;const l=zn(e.visibleWrites,t),c=Cs(l,pt());if(c!=null)a=c;else if(n!=null)a=Ks(l,n);else return[];if(a=a.withIndex(r),!a.isEmpty()&&!a.isLeafNode()){const h=[],u=r.getCompare(),d=o?a.getReverseIteratorFrom(s,r):a.getIteratorFrom(s,r);let f=d.getNext();for(;f&&h.length<i;)u(f,s)!==0&&h.push(f),f=d.getNext();return h}else return[]}function Iw(){return{visibleWrites:He.empty(),allWrites:[],lastWriteId:-1}}function wr(e,t,n,s){return Ag(e.writeTree,e.treePath,t,n,s)}function kc(e,t){return Cw(e.writeTree,e.treePath,t)}function Eu(e,t,n,s){return Sw(e.writeTree,e.treePath,t,n,s)}function Cr(e,t){return kw(e.writeTree,Yt(e.treePath,t))}function Mw(e,t,n,s,i,o){return Tw(e.writeTree,e.treePath,t,n,s,i,o)}function Tc(e,t,n){return Ew(e.writeTree,e.treePath,t,n)}function Rg(e,t){return Dg(Yt(e.treePath,t),e.writeTree)}function Dg(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,s=t.childName;N(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),N(s!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(s);if(i){const o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(s,to(s,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(s,Zi(s,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(s,qs(s,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(s,to(s,t.snapshotNode,i.oldSnap));else throw ei("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(s,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{getCompleteChild(t){return null}getChildAfterChild(t,n,s){return null}}const Og=new Aw;class Ic{constructor(t,n,s=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const s=this.optCompleteServerCache_!=null?new qn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Tc(this.writes_,t,s)}}getChildAfterChild(t,n,s){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ys(this.viewCache_),o=Mw(this.writes_,i,n,1,s,t);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(e){return{filter:e}}function Dw(e,t){N(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),N(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Ow(e,t,n,s,i){const o=new Pw;let r,a;if(n.type===Le.OVERWRITE){const c=n;c.source.fromUser?r=Il(e,t,c.path,c.snap,s,i,o):(N(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!rt(c.path),r=Sr(e,t,c.path,c.snap,s,i,a,o))}else if(n.type===Le.MERGE){const c=n;c.source.fromUser?r=Lw(e,t,c.path,c.children,s,i,o):(N(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),r=Ml(e,t,c.path,c.children,s,i,a,o))}else if(n.type===Le.ACK_USER_WRITE){const c=n;c.revert?r=Ww(e,t,c.path,s,i,o):r=Fw(e,t,c.path,c.affectedTree,s,i,o)}else if(n.type===Le.LISTEN_COMPLETE)r=Bw(e,t,n.path,s,o);else throw ei("Unknown operation type: "+n.type);const l=o.getChanges();return Nw(t,r,l),{viewCache:r,changes:l}}function Nw(e,t,n){const s=t.eventCache;if(s.isFullyInitialized()){const i=s.getNode().isLeafNode()||s.getNode().isEmpty(),o=xr(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!s.getNode().equals(o)||!s.getNode().getPriority().equals(o.getPriority()))&&n.push(Eg(xr(t)))}}function Ng(e,t,n,s,i,o){const r=t.eventCache;if(Cr(s,n)!=null)return t;{let a,l;if(rt(n))if(N(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const c=ys(t),h=c instanceof q?c:q.EMPTY_NODE,u=kc(s,h);a=e.filter.updateFullNode(t.eventCache.getNode(),u,o)}else{const c=wr(s,ys(t));a=e.filter.updateFullNode(t.eventCache.getNode(),c,o)}else{const c=lt(n);if(c===".priority"){N(Yn(n)===1,"Can't have a priority with additional path components");const h=r.getNode();l=t.serverCache.getNode();const u=Eu(s,n,h,l);u!=null?a=e.filter.updatePriority(h,u):a=r.getNode()}else{const h=Pt(n);let u;if(r.isCompleteForChild(c)){l=t.serverCache.getNode();const d=Eu(s,n,r.getNode(),l);d!=null?u=r.getNode().getImmediateChild(c).updateChild(h,d):u=r.getNode().getImmediateChild(c)}else u=Tc(s,c,t.serverCache);u!=null?a=e.filter.updateChild(r.getNode(),c,u,h,i,o):a=r.getNode()}}return Di(t,a,r.isFullyInitialized()||rt(n),e.filter.filtersNodes())}}function Sr(e,t,n,s,i,o,r,a){const l=t.serverCache;let c;const h=r?e.filter:e.filter.getIndexedFilter();if(rt(n))c=h.updateFullNode(l.getNode(),s,null);else if(h.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,s);c=h.updateFullNode(l.getNode(),f,null)}else{const f=lt(n);if(!l.isCompleteForPath(n)&&Yn(n)>1)return t;const p=Pt(n),m=l.getNode().getImmediateChild(f).updateChild(p,s);f===".priority"?c=h.updatePriority(l.getNode(),m):c=h.updateChild(l.getNode(),f,m,p,Og,null)}const u=Ig(t,c,l.isFullyInitialized()||rt(n),h.filtersNodes()),d=new Ic(i,u,o);return Ng(e,u,n,i,d,a)}function Il(e,t,n,s,i,o,r){const a=t.eventCache;let l,c;const h=new Ic(i,t,o);if(rt(n))c=e.filter.updateFullNode(t.eventCache.getNode(),s,r),l=Di(t,c,!0,e.filter.filtersNodes());else{const u=lt(n);if(u===".priority")c=e.filter.updatePriority(t.eventCache.getNode(),s),l=Di(t,c,a.isFullyInitialized(),a.isFiltered());else{const d=Pt(n),f=a.getNode().getImmediateChild(u);let p;if(rt(d))p=s;else{const g=h.getCompleteChild(u);g!=null?gg(d)===".priority"&&g.getChild(_g(d)).isEmpty()?p=g:p=g.updateChild(d,s):p=q.EMPTY_NODE}if(f.equals(p))l=t;else{const g=e.filter.updateChild(a.getNode(),u,p,d,h,r);l=Di(t,g,a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function ku(e,t){return e.eventCache.isCompleteForChild(t)}function Lw(e,t,n,s,i,o,r){let a=t;return s.foreach((l,c)=>{const h=Yt(n,l);ku(t,lt(h))&&(a=Il(e,a,h,c,i,o,r))}),s.foreach((l,c)=>{const h=Yt(n,l);ku(t,lt(h))||(a=Il(e,a,h,c,i,o,r))}),a}function Tu(e,t,n){return n.foreach((s,i)=>{t=t.updateChild(s,i)}),t}function Ml(e,t,n,s,i,o,r,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l=t,c;rt(n)?c=s:c=new Dt(null).setTree(n,s);const h=t.serverCache.getNode();return c.children.inorderTraversal((u,d)=>{if(h.hasChild(u)){const f=t.serverCache.getNode().getImmediateChild(u),p=Tu(e,f,d);l=Sr(e,l,new St(u),p,i,o,r,a)}}),c.children.inorderTraversal((u,d)=>{const f=!t.serverCache.isCompleteForChild(u)&&d.value===null;if(!h.hasChild(u)&&!f){const p=t.serverCache.getNode().getImmediateChild(u),g=Tu(e,p,d);l=Sr(e,l,new St(u),g,i,o,r,a)}}),l}function Fw(e,t,n,s,i,o,r){if(Cr(i,n)!=null)return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(s.value!=null){if(rt(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Sr(e,t,n,l.getNode().getChild(n),i,o,a,r);if(rt(n)){let c=new Dt(null);return l.getNode().forEachChild(Vs,(h,u)=>{c=c.set(new St(h),u)}),Ml(e,t,n,c,i,o,a,r)}else return t}else{let c=new Dt(null);return s.foreach((h,u)=>{const d=Yt(n,h);l.isCompleteForPath(d)&&(c=c.set(h,l.getNode().getChild(d)))}),Ml(e,t,n,c,i,o,a,r)}}function Bw(e,t,n,s,i){const o=t.serverCache,r=Ig(t,o.getNode(),o.isFullyInitialized()||rt(n),o.isFiltered());return Ng(e,r,n,s,Og,i)}function Ww(e,t,n,s,i,o){let r;if(Cr(s,n)!=null)return t;{const a=new Ic(s,t,i),l=t.eventCache.getNode();let c;if(rt(n)||lt(n)===".priority"){let h;if(t.serverCache.isFullyInitialized())h=wr(s,ys(t));else{const u=t.serverCache.getNode();N(u instanceof q,"serverChildren would be complete if leaf node"),h=kc(s,u)}h=h,c=e.filter.updateFullNode(l,h,o)}else{const h=lt(n);let u=Tc(s,h,t.serverCache);u==null&&t.serverCache.isCompleteForChild(h)&&(u=l.getImmediateChild(h)),u!=null?c=e.filter.updateChild(l,h,u,Pt(n),a,o):t.eventCache.getNode().hasChild(h)?c=e.filter.updateChild(l,h,q.EMPTY_NODE,Pt(n),a,o):c=l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(r=wr(s,ys(t)),r.isLeafNode()&&(c=e.filter.updateFullNode(c,r,o)))}return r=t.serverCache.isFullyInitialized()||Cr(s,pt())!=null,Di(t,c,r,e.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(t,n){this.query_=t,this.eventRegistrations_=[];const s=this.query_._queryParams,i=new wc(s.getIndex()),o=ow(s);this.processor_=Rw(o);const r=n.serverCache,a=n.eventCache,l=i.updateFullNode(q.EMPTY_NODE,r.getNode(),null),c=o.updateFullNode(q.EMPTY_NODE,a.getNode(),null),h=new qn(l,r.isFullyInitialized(),i.filtersNodes()),u=new qn(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=ta(u,h),this.eventGenerator_=new dw(this.query_)}get query(){return this.query_}}function zw(e){return e.viewCache_.serverCache.getNode()}function Vw(e){return xr(e.viewCache_)}function $w(e,t){const n=ys(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!rt(t)&&!n.getImmediateChild(lt(t)).isEmpty())?n.getChild(t):null}function Iu(e){return e.eventRegistrations_.length===0}function jw(e,t){e.eventRegistrations_.push(t)}function Mu(e,t,n){const s=[];if(n){N(t==null,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(o=>{const r=o.createCancelEvent(n,i);r&&s.push(r)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){const r=e.eventRegistrations_[o];if(!r.matches(t))i.push(r);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return s}function Pu(e,t,n,s){t.type===Le.MERGE&&t.source.queryId!==null&&(N(ys(e.viewCache_),"We should always have a full cache before handling merges"),N(xr(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=Ow(e.processor_,i,t,n,s);return Dw(e.processor_,o.viewCache),N(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,Lg(e,o.changes,o.viewCache.eventCache.getNode(),null)}function Uw(e,t){const n=e.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ft,(o,r)=>{s.push(qs(o,r))}),n.isFullyInitialized()&&s.push(Eg(n.getNode())),Lg(e,s,n.getNode(),t)}function Lg(e,t,n,s){const i=s?[s]:e.eventRegistrations_;return fw(e.eventGenerator_,t,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Er;class Fg{constructor(){this.views=new Map}}function Yw(e){N(!Er,"__referenceConstructor has already been defined"),Er=e}function qw(){return N(Er,"Reference.ts has not been loaded"),Er}function Kw(e){return e.views.size===0}function Mc(e,t,n,s){const i=t.source.queryId;if(i!==null){const o=e.views.get(i);return N(o!=null,"SyncTree gave us an op for an invalid query."),Pu(o,t,n,s)}else{let o=[];for(const r of e.views.values())o=o.concat(Pu(r,t,n,s));return o}}function Bg(e,t,n,s,i){const o=t._queryIdentifier,r=e.views.get(o);if(!r){let a=wr(n,i?s:null),l=!1;a?l=!0:s instanceof q?(a=kc(n,s),l=!1):(a=q.EMPTY_NODE,l=!1);const c=ta(new qn(a,l,!1),new qn(s,i,!1));return new Hw(t,c)}return r}function Gw(e,t,n,s,i,o){const r=Bg(e,t,s,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,r),jw(r,n),Uw(r,n)}function Xw(e,t,n,s){const i=t._queryIdentifier,o=[];let r=[];const a=Kn(e);if(i==="default")for(const[l,c]of e.views.entries())r=r.concat(Mu(c,n,s)),Iu(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{const l=e.views.get(i);l&&(r=r.concat(Mu(l,n,s)),Iu(l)&&(e.views.delete(i),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!Kn(e)&&o.push(new(qw())(t._repo,t._path)),{removed:o,events:r}}function Wg(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Vn(e,t){let n=null;for(const s of e.views.values())n=n||$w(s,t);return n}function Hg(e,t){if(t._queryParams.loadsAllData())return na(e);{const s=t._queryIdentifier;return e.views.get(s)}}function zg(e,t){return Hg(e,t)!=null}function Kn(e){return na(e)!=null}function na(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kr;function Qw(e){N(!kr,"__referenceConstructor has already been defined"),kr=e}function Jw(){return N(kr,"Reference.ts has not been loaded"),kr}let Zw=1;class Au{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Dt(null),this.pendingWriteTree_=Iw(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Vg(e,t,n,s,i){return _w(e.pendingWriteTree_,t,n,s,i),i?Eo(e,new _s(Tg(),t,n)):[]}function us(e,t,n=!1){const s=yw(e.pendingWriteTree_,t);if(bw(e.pendingWriteTree_,t)){let o=new Dt(null);return s.snap!=null?o=o.set(pt(),!0):we(s.children,r=>{o=o.set(new St(r),!0)}),Eo(e,new vr(s.path,o,n))}else return[]}function So(e,t,n){return Eo(e,new _s(Sc(),t,n))}function tC(e,t,n){const s=Dt.fromObject(n);return Eo(e,new so(Sc(),t,s))}function eC(e,t){return Eo(e,new no(Sc(),t))}function nC(e,t,n){const s=Ac(e,n);if(s){const i=Rc(s),o=i.path,r=i.queryId,a=de(o,t),l=new no(Ec(r),a);return Dc(e,o,l)}else return[]}function $g(e,t,n,s,i=!1){const o=t._path,r=e.syncPointTree_.get(o);let a=[];if(r&&(t._queryIdentifier==="default"||zg(r,t))){const l=Xw(r,t,n,s);Kw(r)&&(e.syncPointTree_=e.syncPointTree_.remove(o));const c=l.removed;if(a=l.events,!i){const h=c.findIndex(d=>d._queryParams.loadsAllData())!==-1,u=e.syncPointTree_.findOnPath(o,(d,f)=>Kn(f));if(h&&!u){const d=e.syncPointTree_.subtree(o);if(!d.isEmpty()){const f=rC(d);for(let p=0;p<f.length;++p){const g=f[p],m=g.query,y=qg(e,g);e.listenProvider_.startListening(Ni(m),io(e,m),y.hashFn,y.onComplete)}}}!u&&c.length>0&&!s&&(h?e.listenProvider_.stopListening(Ni(t),null):c.forEach(d=>{const f=e.queryToTagMap.get(sa(d));e.listenProvider_.stopListening(Ni(d),f)}))}aC(e,c)}return a}function jg(e,t,n,s){const i=Ac(e,s);if(i!=null){const o=Rc(i),r=o.path,a=o.queryId,l=de(r,t),c=new _s(Ec(a),l,n);return Dc(e,r,c)}else return[]}function sC(e,t,n,s){const i=Ac(e,s);if(i){const o=Rc(i),r=o.path,a=o.queryId,l=de(r,t),c=Dt.fromObject(n),h=new so(Ec(a),l,c);return Dc(e,r,h)}else return[]}function iC(e,t,n,s=!1){const i=t._path;let o=null,r=!1;e.syncPointTree_.foreachOnPath(i,(d,f)=>{const p=de(d,i);o=o||Vn(f,p),r=r||Kn(f)});let a=e.syncPointTree_.get(i);a?(r=r||Kn(a),o=o||Vn(a,pt())):(a=new Fg,e.syncPointTree_=e.syncPointTree_.set(i,a));let l;o!=null?l=!0:(l=!1,o=q.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((f,p)=>{const g=Vn(p,pt());g&&(o=o.updateImmediateChild(f,g))}));const c=zg(a,t);if(!c&&!t._queryParams.loadsAllData()){const d=sa(t);N(!e.queryToTagMap.has(d),"View does not exist, but we have a tag");const f=lC();e.queryToTagMap.set(d,f),e.tagToQueryMap.set(f,d)}const h=ea(e.pendingWriteTree_,i);let u=Gw(a,t,n,h,o,l);if(!c&&!r&&!s){const d=Hg(a,t);u=u.concat(cC(e,t,d))}return u}function Pc(e,t,n){const i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(r,a)=>{const l=de(r,t),c=Vn(a,l);if(c)return c});return Ag(i,t,o,n,!0)}function oC(e,t){const n=t._path;let s=null;e.syncPointTree_.foreachOnPath(n,(c,h)=>{const u=de(c,n);s=s||Vn(h,u)});let i=e.syncPointTree_.get(n);i?s=s||Vn(i,pt()):(i=new Fg,e.syncPointTree_=e.syncPointTree_.set(n,i));const o=s!=null,r=o?new qn(s,!0,!1):null,a=ea(e.pendingWriteTree_,t._path),l=Bg(i,t,a,o?r.getNode():q.EMPTY_NODE,o);return Vw(l)}function Eo(e,t){return Ug(t,e.syncPointTree_,null,ea(e.pendingWriteTree_,pt()))}function Ug(e,t,n,s){if(rt(e.path))return Yg(e,t,n,s);{const i=t.get(pt());n==null&&i!=null&&(n=Vn(i,pt()));let o=[];const r=lt(e.path),a=e.operationForChild(r),l=t.children.get(r);if(l&&a){const c=n?n.getImmediateChild(r):null,h=Rg(s,r);o=o.concat(Ug(a,l,c,h))}return i&&(o=o.concat(Mc(i,e,s,n))),o}}function Yg(e,t,n,s){const i=t.get(pt());n==null&&i!=null&&(n=Vn(i,pt()));let o=[];return t.children.inorderTraversal((r,a)=>{const l=n?n.getImmediateChild(r):null,c=Rg(s,r),h=e.operationForChild(r);h&&(o=o.concat(Yg(h,a,l,c)))}),i&&(o=o.concat(Mc(i,e,s,n))),o}function qg(e,t){const n=t.query,s=io(e,n);return{hashFn:()=>(zw(t)||q.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return s?nC(e,n._path,s):eC(e,n._path);{const o=i0(i,n);return $g(e,n,null,o)}}}}function io(e,t){const n=sa(t);return e.queryToTagMap.get(n)}function sa(e){return e._path.toString()+"$"+e._queryIdentifier}function Ac(e,t){return e.tagToQueryMap.get(t)}function Rc(e){const t=e.indexOf("$");return N(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new St(e.substr(0,t))}}function Dc(e,t,n){const s=e.syncPointTree_.get(t);N(s,"Missing sync point for query tag that we're tracking");const i=ea(e.pendingWriteTree_,t);return Mc(s,n,i,null)}function rC(e){return e.fold((t,n,s)=>{if(n&&Kn(n))return[na(n)];{let i=[];return n&&(i=Wg(n)),we(s,(o,r)=>{i=i.concat(r)}),i}})}function Ni(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Jw())(e._repo,e._path):e}function aC(e,t){for(let n=0;n<t.length;++n){const s=t[n];if(!s._queryParams.loadsAllData()){const i=sa(s),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function lC(){return Zw++}function cC(e,t,n){const s=t._path,i=io(e,t),o=qg(e,n),r=e.listenProvider_.startListening(Ni(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(s);if(i)N(!Kn(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,h,u)=>{if(!rt(c)&&h&&Kn(h))return[na(h).query];{let d=[];return h&&(d=d.concat(Wg(h).map(f=>f.query))),we(u,(f,p)=>{d=d.concat(p)}),d}});for(let c=0;c<l.length;++c){const h=l[c];e.listenProvider_.stopListening(Ni(h),io(e,h))}}return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new Oc(n)}node(){return this.node_}}class Nc{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=Yt(this.path_,t);return new Nc(this.syncTree_,n)}node(){return Pc(this.syncTree_,this.path_)}}const hC=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},Ru=function(e,t,n){if(!e||typeof e!="object")return e;if(N(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return uC(e[".sv"],t,n);if(typeof e[".sv"]=="object")return dC(e[".sv"],t);N(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},uC=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:N(!1,"Unexpected server value: "+e)}},dC=function(e,t,n){e.hasOwnProperty("increment")||N(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const s=e.increment;typeof s!="number"&&N(!1,"Unexpected increment value: "+s);const i=t.node();if(N(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return s;const r=i.getValue();return typeof r!="number"?s:r+s},fC=function(e,t,n,s){return Lc(t,new Nc(n,e),s)},Kg=function(e,t,n){return Lc(e,new Oc(t),n)};function Lc(e,t,n){const s=e.getPriority().val(),i=Ru(s,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const r=e,a=Ru(r.getValue(),t,n);return a!==r.getValue()||i!==r.getPriority().val()?new Kt(a,Xt(i)):e}else{const r=e;return o=r,i!==r.getPriority().val()&&(o=o.updatePriority(new Kt(i))),r.forEachChild(Ft,(a,l)=>{const c=Lc(l,t.getImmediateChild(a),n);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t="",n=null,s={children:{},childCount:0}){this.name=t,this.parent=n,this.node=s}}function Bc(e,t){let n=t instanceof St?t:new St(t),s=e,i=lt(n);for(;i!==null;){const o=Us(s.node.children,i)||{children:{},childCount:0};s=new Fc(i,s,o),n=Pt(n),i=lt(n)}return s}function ii(e){return e.node.value}function Gg(e,t){e.node.value=t,Pl(e)}function Xg(e){return e.node.childCount>0}function pC(e){return ii(e)===void 0&&!Xg(e)}function ia(e,t){we(e.node.children,(n,s)=>{t(new Fc(n,e,s))})}function Qg(e,t,n,s){n&&t(e),ia(e,i=>{Qg(i,t,!0)})}function gC(e,t,n){let s=e.parent;for(;s!==null;){if(t(s))return!0;s=s.parent}return!1}function ko(e){return new St(e.parent===null?e.name:ko(e.parent)+"/"+e.name)}function Pl(e){e.parent!==null&&mC(e.parent,e.name,e)}function mC(e,t,n){const s=pC(n),i=Tn(e.node.children,t);s&&i?(delete e.node.children[t],e.node.childCount--,Pl(e)):!s&&!i&&(e.node.children[t]=n.node,e.node.childCount++,Pl(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=/[\[\].#$\/\u0000-\u001F\u007F]/,yC=/[\[\].#$\u0000-\u001F\u007F]/,Ba=10*1024*1024,Jg=function(e){return typeof e=="string"&&e.length!==0&&!_C.test(e)},Zg=function(e){return typeof e=="string"&&e.length!==0&&!yC.test(e)},bC=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Zg(e)},tm=function(e,t,n,s){s&&t===void 0||Wc(pc(e,"value"),t,n)},Wc=function(e,t,n){const s=n instanceof St?new F0(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+as(s));if(typeof t=="function")throw new Error(e+"contains a function "+as(s)+" with contents = "+t.toString());if(Kp(t))throw new Error(e+"contains "+t.toString()+" "+as(s));if(typeof t=="string"&&t.length>Ba/3&&Jr(t)>Ba)throw new Error(e+"contains a string greater than "+Ba+" utf8 bytes "+as(s)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(we(t,(r,a)=>{if(r===".value")i=!0;else if(r!==".priority"&&r!==".sv"&&(o=!0,!Jg(r)))throw new Error(e+" contains an invalid key ("+r+") "+as(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);B0(s,r),Wc(e,a,s),W0(s)}),i&&o)throw new Error(e+' contains ".value" child '+as(s)+" in addition to actual children.")}},em=function(e,t,n,s){if(!Zg(n))throw new Error(pc(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},vC=function(e,t,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),em(e,t,n)},nm=function(e,t){if(lt(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},xC=function(e,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Jg(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!bC(n))throw new Error(pc(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function sm(e,t){let n=null;for(let s=0;s<t.length;s++){const i=t[s],o=i.getPath();n!==null&&!yg(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function sn(e,t,n){sm(e,n),CC(e,s=>Ne(s,t)||Ne(t,s))}function CC(e,t){e.recursionDepth_++;let n=!0;for(let s=0;s<e.eventLists_.length;s++){const i=e.eventLists_[s];if(i){const o=i.path;t(o)?(SC(e.eventLists_[s]),e.eventLists_[s]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function SC(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(n!==null){e.events[t]=null;const s=n.getEventRunner();Ai&&ne("event: "+n.toString()),si(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="repo_interrupt",kC=25;class TC{constructor(t,n,s,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=br(),this.transactionQueueTree_=new Fc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function IC(e,t,n){if(e.stats_=yc(e.repoInfo_),e.forceRestClient_||l0())e.server_=new yr(e.repoInfo_,(s,i,o,r)=>{Du(e,s,i,o,r)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Ou(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ut(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}e.persistentConnection_=new vn(e.repoInfo_,t,(s,i,o,r)=>{Du(e,s,i,o,r)},s=>{Ou(e,s)},s=>{MC(e,s)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(s=>{e.server_.refreshAuthToken(s)}),e.appCheckProvider_.addTokenChangeListener(s=>{e.server_.refreshAppCheckToken(s.token)}),e.statsReporter_=f0(e.repoInfo_,()=>new uw(e.stats_,e.server_)),e.infoData_=new rw,e.infoSyncTree_=new Au({startListening:(s,i,o,r)=>{let a=[];const l=e.infoData_.getNode(s._path);return l.isEmpty()||(a=So(e.infoSyncTree_,s._path,l),setTimeout(()=>{r("ok")},0)),a},stopListening:()=>{}}),zc(e,"connected",!1),e.serverSyncTree_=new Au({startListening:(s,i,o,r)=>(e.server_.listen(s,o,i,(a,l)=>{const c=r(a,l);sn(e.eventQueue_,s._path,c)}),[]),stopListening:(s,i)=>{e.server_.unlisten(s,i)}})}function im(e){const n=e.infoData_.getNode(new St(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Hc(e){return hC({timestamp:im(e)})}function Du(e,t,n,s,i){e.dataUpdateCount++;const o=new St(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let r=[];if(i)if(s){const l=ur(n,c=>Xt(c));r=sC(e.serverSyncTree_,o,l,i)}else{const l=Xt(n);r=jg(e.serverSyncTree_,o,l,i)}else if(s){const l=ur(n,c=>Xt(c));r=tC(e.serverSyncTree_,o,l)}else{const l=Xt(n);r=So(e.serverSyncTree_,o,l)}let a=o;r.length>0&&(a=ra(e,o)),sn(e.eventQueue_,a,r)}function Ou(e,t){zc(e,"connected",t),t===!1&&RC(e)}function MC(e,t){we(t,(n,s)=>{zc(e,n,s)})}function zc(e,t,n){const s=new St("/.info/"+t),i=Xt(n);e.infoData_.updateSnapshot(s,i);const o=So(e.infoSyncTree_,s,i);sn(e.eventQueue_,s,o)}function om(e){return e.nextWriteId_++}function PC(e,t,n){const s=oC(e.serverSyncTree_,t);return s!=null?Promise.resolve(s):e.server_.get(t).then(i=>{const o=Xt(i).withIndex(t._queryParams.getIndex());iC(e.serverSyncTree_,t,n,!0);let r;if(t._queryParams.loadsAllData())r=So(e.serverSyncTree_,t._path,o);else{const a=io(e.serverSyncTree_,t);r=jg(e.serverSyncTree_,t._path,o,a)}return sn(e.eventQueue_,t._path,r),$g(e.serverSyncTree_,t,n,null,!0),o},i=>(oa(e,"get for query "+Ut(t)+" failed: "+i),Promise.reject(new Error(i))))}function AC(e,t,n,s,i){oa(e,"set",{path:t.toString(),value:n,priority:s});const o=Hc(e),r=Xt(n,s),a=Pc(e.serverSyncTree_,t),l=Kg(r,a,o),c=om(e),h=Vg(e.serverSyncTree_,t,l,c,!0);sm(e.eventQueue_,h),e.server_.put(t.toString(),r.val(!0),(d,f)=>{const p=d==="ok";p||xe("set at "+t+" failed: "+d);const g=us(e.serverSyncTree_,c,!p);sn(e.eventQueue_,t,g),OC(e,i,d,f)});const u=hm(e,t);ra(e,u),sn(e.eventQueue_,u,[])}function RC(e){oa(e,"onDisconnectEvents");const t=Hc(e),n=br();El(e.onDisconnect_,pt(),(i,o)=>{const r=fC(i,o,e.serverSyncTree_,t);kg(n,i,r)});let s=[];El(n,pt(),(i,o)=>{s=s.concat(So(e.serverSyncTree_,i,o));const r=hm(e,i);ra(e,r)}),e.onDisconnect_=br(),sn(e.eventQueue_,pt(),s)}function DC(e){e.persistentConnection_&&e.persistentConnection_.interrupt(EC)}function oa(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),ne(n,...t)}function OC(e,t,n,s){t&&si(()=>{if(n==="ok")t(null);else{const i=(n||"error").toUpperCase();let o=i;s&&(o+=": "+s);const r=new Error(o);r.code=i,t(r)}})}function rm(e,t,n){return Pc(e.serverSyncTree_,t,n)||q.EMPTY_NODE}function Vc(e,t=e.transactionQueueTree_){if(t||aa(e,t),ii(t)){const n=lm(e,t);N(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&NC(e,ko(t),n)}else Xg(t)&&ia(t,n=>{Vc(e,n)})}function NC(e,t,n){const s=n.map(c=>c.currentWriteId),i=rm(e,t,s);let o=i;const r=i.hash();for(let c=0;c<n.length;c++){const h=n[c];N(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const u=de(t,h.path);o=o.updateChild(u,h.currentOutputSnapshotRaw)}const a=o.val(!0),l=t;e.server_.put(l.toString(),a,c=>{oa(e,"transaction put response",{path:l.toString(),status:c});let h=[];if(c==="ok"){const u=[];for(let d=0;d<n.length;d++)n[d].status=2,h=h.concat(us(e.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&u.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();aa(e,Bc(e.transactionQueueTree_,t)),Vc(e,e.transactionQueueTree_),sn(e.eventQueue_,t,h);for(let d=0;d<u.length;d++)si(u[d])}else{if(c==="datastale")for(let u=0;u<n.length;u++)n[u].status===3?n[u].status=4:n[u].status=0;else{xe("transaction at "+l.toString()+" failed: "+c);for(let u=0;u<n.length;u++)n[u].status=4,n[u].abortReason=c}ra(e,t)}},r)}function ra(e,t){const n=am(e,t),s=ko(n),i=lm(e,n);return LC(e,i,s),s}function LC(e,t,n){if(t.length===0)return;const s=[];let i=[];const r=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){const l=t[a],c=de(n,l.path);let h=!1,u;if(N(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,u=l.abortReason,i=i.concat(us(e.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=kC)h=!0,u="maxretry",i=i.concat(us(e.serverSyncTree_,l.currentWriteId,!0));else{const d=rm(e,l.path,r);l.currentInputSnapshot=d;const f=t[a].update(d.val());if(f!==void 0){Wc("transaction failed: Data returned ",f,l.path);let p=Xt(f);typeof f=="object"&&f!=null&&Tn(f,".priority")||(p=p.updatePriority(d.getPriority()));const m=l.currentWriteId,y=Hc(e),v=Kg(p,d,y);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=v,l.currentWriteId=om(e),r.splice(r.indexOf(m),1),i=i.concat(Vg(e.serverSyncTree_,l.path,v,l.currentWriteId,l.applyLocally)),i=i.concat(us(e.serverSyncTree_,m,!0))}else h=!0,u="nodata",i=i.concat(us(e.serverSyncTree_,l.currentWriteId,!0))}sn(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,function(d){setTimeout(d,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(u==="nodata"?s.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):s.push(()=>t[a].onComplete(new Error(u),!1,null))))}aa(e,e.transactionQueueTree_);for(let a=0;a<s.length;a++)si(s[a]);Vc(e,e.transactionQueueTree_)}function am(e,t){let n,s=e.transactionQueueTree_;for(n=lt(t);n!==null&&ii(s)===void 0;)s=Bc(s,n),t=Pt(t),n=lt(t);return s}function lm(e,t){const n=[];return cm(e,t,n),n.sort((s,i)=>s.order-i.order),n}function cm(e,t,n){const s=ii(t);if(s)for(let i=0;i<s.length;i++)n.push(s[i]);ia(t,i=>{cm(e,i,n)})}function aa(e,t){const n=ii(t);if(n){let s=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[s]=n[i],s++);n.length=s,Gg(t,n.length>0?n:void 0)}ia(t,s=>{aa(e,s)})}function hm(e,t){const n=ko(am(e,t)),s=Bc(e.transactionQueueTree_,t);return gC(s,i=>{Wa(e,i)}),Wa(e,s),Qg(s,i=>{Wa(e,i)}),n}function Wa(e,t){const n=ii(t);if(n){const s=[];let i=[],o=-1;for(let r=0;r<n.length;r++)n[r].status===3||(n[r].status===1?(N(o===r-1,"All SENT items should be at beginning of queue."),o=r,n[r].status=3,n[r].abortReason="set"):(N(n[r].status===0,"Unexpected transaction status in abort"),n[r].unwatcher(),i=i.concat(us(e.serverSyncTree_,n[r].currentWriteId,!0)),n[r].onComplete&&s.push(n[r].onComplete.bind(null,new Error("set"),!1,null))));o===-1?Gg(t,void 0):n.length=o+1,sn(e.eventQueue_,ko(t),i);for(let r=0;r<s.length;r++)si(s[r])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(e){let t="";const n=e.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let i=n[s];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function BC(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const n of e.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?t[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):xe(`Invalid query segment '${n}' in query '${e}'`)}return t}const Nu=function(e,t){const n=WC(e),s=n.namespace;n.domain==="firebase.com"&&Sn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Sn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Zx();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new rg(n.host,n.secure,s,i,t,"",s!==n.subdomain),path:new St(n.pathString)}},WC=function(e){let t="",n="",s="",i="",o="",r=!0,a="https",l=443;if(typeof e=="string"){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let h=e.indexOf("/");h===-1&&(h=e.length);let u=e.indexOf("?");u===-1&&(u=e.length),t=e.substring(0,Math.min(h,u)),h<u&&(i=FC(e.substring(h,u)));const d=BC(e.substring(Math.min(e.length,u)));c=t.indexOf(":"),c>=0?(r=a==="https"||a==="wss",l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=t.indexOf(".");s=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=s}"ns"in d&&(o=d.ns)}return{host:t,port:l,domain:n,subdomain:s,secure:r,scheme:a,pathString:i,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",HC=function(){let e=0;const t=[];return function(n){const s=n===e;e=n;let i;const o=new Array(8);for(i=7;i>=0;i--)o[i]=Lu.charAt(n%64),n=Math.floor(n/64);N(n===0,"Cannot push at time == 0");let r=o.join("");if(s){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)r+=Lu.charAt(t[i]);return N(r.length===20,"nextPushId: Length should be 20."),r}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(t,n,s,i){this.eventType=t,this.eventRegistration=n,this.snapshot=s,this.prevName=i}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ut(this.snapshot.exportVal())}}class VC{constructor(t,n,s){this.eventRegistration=t,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return N(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(t,n,s,i){this._repo=t,this._path=n,this._queryParams=s,this._orderByCalled=i}get key(){return rt(this._path)?null:gg(this._path)}get ref(){return new In(this._repo,this._path)}get _queryIdentifier(){const t=vu(this._queryParams),n=mc(t);return n==="{}"?"default":n}get _queryObject(){return vu(this._queryParams)}isEqual(t){if(t=ws(t),!(t instanceof $c))return!1;const n=this._repo===t._repo,s=yg(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&s&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+L0(this._path)}}class In extends $c{constructor(t,n){super(t,n,new Cc,!1)}get parent(){const t=_g(this._path);return t===null?null:new In(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class oo{constructor(t,n,s){this._node=t,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const n=new St(t),s=Gs(this.ref,t);return new oo(this._node.getChild(n),s,Ft)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,i)=>t(new oo(i,Gs(this.ref,s),Ft)))}hasChild(t){const n=new St(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function um(e,t){return e=ws(e),e._checkNotDeleted("ref"),t!==void 0?Gs(e._root,t):e._root}function Gs(e,t){return e=ws(e),lt(e._path)===null?vC("child","path",t):em("child","path",t),new In(e._repo,Yt(e._path,t))}function jC(e,t){e=ws(e),nm("push",e._path),tm("push",t,e._path,!0);const n=im(e._repo),s=HC(n),i=Gs(e,s),o=Gs(e,s);let r;return t!=null?r=UC(o,t).then(()=>o):r=Promise.resolve(o),i.then=r.then.bind(r),i.catch=r.then.bind(r,void 0),i}function UC(e,t){e=ws(e),nm("set",e._path),tm("set",t,e._path,!1);const n=new Qr;return AC(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function YC(e){e=ws(e);const t=new $C(()=>{}),n=new jc(t);return PC(e._repo,e,n).then(s=>new oo(s,new In(e._repo,e._path),e._queryParams.getIndex()))}class jc{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){const s=n._queryParams.getIndex();return new zC("value",this,new oo(t.snapshotNode,new In(n._repo,n._path),s))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new VC(this,t,n):null}matches(t){return t instanceof jc?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}Yw(In);Qw(In);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="FIREBASE_DATABASE_EMULATOR_HOST",Al={};let KC=!1;function GC(e,t,n,s){const i=t.lastIndexOf(":"),o=t.substring(0,i),r=fc(o);e.repoInfo_=new rg(t,r,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(e.authTokenProvider_=s)}function XC(e,t,n,s,i){let o=s||e.options.databaseURL;o===void 0&&(e.options.projectId||Sn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ne("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let r=Nu(o,i),a=r.repoInfo,l;typeof process<"u"&&nu&&(l=nu[qC]),l?(o=`http://${l}?ns=${a.namespace}`,r=Nu(o,i),a=r.repoInfo):r.repoInfo.secure;const c=new h0(e.name,e.options,t);xC("Invalid Firebase Database URL",r),rt(r.path)||Sn("Database URL must point to the root of a Firebase Database (not including a child path).");const h=JC(a,e,c,new c0(e,n));return new ZC(h,e)}function QC(e,t){const n=Al[t];(!n||n[e.key]!==e)&&Sn(`Database ${t}(${e.repoInfo_}) has already been deleted.`),DC(e),delete n[e.key]}function JC(e,t,n,s){let i=Al[t.name];i||(i={},Al[t.name]=i);let o=i[e.toURLString()];return o&&Sn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new TC(e,KC,n,s),i[e.toURLString()]=o,o}class ZC{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(IC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new In(this._repo,pt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(QC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Sn("Cannot call "+t+" on a deleted database.")}}function dm(e=Lx(),t){const n=Ax(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const s=mv("database");s&&tS(n,...s)}return n}function tS(e,t,n,s={}){e=ws(e),e._checkNotDeleted("useEmulator");const i=`${t}:${n}`,o=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&dr(s,o.repoInfo_.emulatorOptions))return;Sn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let r;if(o.repoInfo_.nodeAdmin)s.mockUserToken&&Sn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new Zo(Zo.OWNER);else if(s.mockUserToken){const a=typeof s.mockUserToken=="string"?s.mockUserToken:yv(s.mockUserToken,e.app.options.projectId);r=new Zo(a)}fc(t)&&(_v(t),xv("Database",!0)),GC(o,i,s,r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(e){qx(Nx),pr(new Xi("database",(t,{instanceIdentifier:n})=>{const s=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return XC(s,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Hs(su,iu,e),Hs(su,iu,"esm2020")}vn.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};vn.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};eS();const Qe=ye([]),Fu=ye(!0),nS=ye(""),sS=async()=>{Fu.value=!0;const e=um(dm());try{const t=await YC(Gs(e,"dailyWorkout"));if(t.exists()){const n=t.val(),s=[];for(const i in n)s.push({id:i,...n[i]});Qe.value=s,console.log("All workouts fetched once:",Qe)}else Qe.value=[],console.log("No workouts available (fetched once).")}catch(t){nS.value=`Failed to load all workouts. Please try again. Error received : ${t}`}finally{Fu.value=!1}},iS={id:"app"},oS={class:"main-content"},rS=Re({__name:"App",setup(e){return qr(()=>{sS()}),(t,n)=>{const s=yo("router-view");return X(),it("div",iS,[st(ov),R("main",oS,[st(s)])])}}});/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Ps=typeof document<"u";function fm(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function aS(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&fm(e.default)}const gt=Object.assign;function Ha(e,t){const n={};for(const s in t){const i=t[s];n[s]=ze(i)?i.map(e):e(i)}return n}const Li=()=>{},ze=Array.isArray,pm=/#/g,lS=/&/g,cS=/\//g,hS=/=/g,uS=/\?/g,gm=/\+/g,dS=/%5B/g,fS=/%5D/g,mm=/%5E/g,pS=/%60/g,_m=/%7B/g,gS=/%7C/g,ym=/%7D/g,mS=/%20/g;function Uc(e){return encodeURI(""+e).replace(gS,"|").replace(dS,"[").replace(fS,"]")}function _S(e){return Uc(e).replace(_m,"{").replace(ym,"}").replace(mm,"^")}function Rl(e){return Uc(e).replace(gm,"%2B").replace(mS,"+").replace(pm,"%23").replace(lS,"%26").replace(pS,"`").replace(_m,"{").replace(ym,"}").replace(mm,"^")}function yS(e){return Rl(e).replace(hS,"%3D")}function bS(e){return Uc(e).replace(pm,"%23").replace(uS,"%3F")}function vS(e){return e==null?"":bS(e).replace(cS,"%2F")}function ro(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const xS=/\/$/,wS=e=>e.replace(xS,"");function za(e,t,n="/"){let s,i={},o="",r="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=t.slice(0,l),o=t.slice(l+1,a>-1?a:t.length),i=e(o)),a>-1&&(s=s||t.slice(0,a),r=t.slice(a,t.length)),s=kS(s??t,n),{fullPath:s+(o&&"?")+o+r,path:s,query:i,hash:ro(r)}}function CS(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Bu(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function SS(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&Xs(t.matched[s],n.matched[i])&&bm(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Xs(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function bm(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!ES(e[n],t[n]))return!1;return!0}function ES(e,t){return ze(e)?Wu(e,t):ze(t)?Wu(t,e):e===t}function Wu(e,t){return ze(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function kS(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let o=n.length-1,r,a;for(r=0;r<s.length;r++)if(a=s[r],a!==".")if(a==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+s.slice(r).join("/")}const Pn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ao;(function(e){e.pop="pop",e.push="push"})(ao||(ao={}));var Fi;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Fi||(Fi={}));function TS(e){if(!e)if(Ps){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),wS(e)}const IS=/^[^#]+#/;function MS(e,t){return e.replace(IS,"#")+t}function PS(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const la=()=>({left:window.scrollX,top:window.scrollY});function AS(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=PS(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Hu(e,t){return(history.state?history.state.position-t:-1)+e}const Dl=new Map;function RS(e,t){Dl.set(e,t)}function DS(e){const t=Dl.get(e);return Dl.delete(e),t}let OS=()=>location.protocol+"//"+location.host;function vm(e,t){const{pathname:n,search:s,hash:i}=t,o=e.indexOf("#");if(o>-1){let a=i.includes(e.slice(o))?e.slice(o).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),Bu(l,"")}return Bu(n,e)+s+i}function NS(e,t,n,s){let i=[],o=[],r=null;const a=({state:d})=>{const f=vm(e,location),p=n.value,g=t.value;let m=0;if(d){if(n.value=f,t.value=d,r&&r===p){r=null;return}m=g?d.position-g.position:0}else s(f);i.forEach(y=>{y(n.value,p,{delta:m,type:ao.pop,direction:m?m>0?Fi.forward:Fi.back:Fi.unknown})})};function l(){r=n.value}function c(d){i.push(d);const f=()=>{const p=i.indexOf(d);p>-1&&i.splice(p,1)};return o.push(f),f}function h(){const{history:d}=window;d.state&&d.replaceState(gt({},d.state,{scroll:la()}),"")}function u(){for(const d of o)d();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:c,destroy:u}}function zu(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?la():null}}function LS(e){const{history:t,location:n}=window,s={value:vm(e,n)},i={value:t.state};i.value||o(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,c,h){const u=e.indexOf("#"),d=u>-1?(n.host&&document.querySelector("base")?e:e.slice(u))+l:OS()+e+l;try{t[h?"replaceState":"pushState"](c,"",d),i.value=c}catch(f){console.error(f),n[h?"replace":"assign"](d)}}function r(l,c){const h=gt({},t.state,zu(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});o(l,h,!0),s.value=l}function a(l,c){const h=gt({},i.value,t.state,{forward:l,scroll:la()});o(h.current,h,!0);const u=gt({},zu(s.value,l,null),{position:h.position+1},c);o(l,u,!1),s.value=l}return{location:s,state:i,push:a,replace:r}}function FS(e){e=TS(e);const t=LS(e),n=NS(e,t.state,t.location,t.replace);function s(o,r=!0){r||n.pauseListeners(),history.go(o)}const i=gt({location:"",base:e,go:s,createHref:MS.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function BS(e){return typeof e=="string"||e&&typeof e=="object"}function xm(e){return typeof e=="string"||typeof e=="symbol"}const wm=Symbol("");var Vu;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Vu||(Vu={}));function Qs(e,t){return gt(new Error,{type:e,[wm]:!0},t)}function an(e,t){return e instanceof Error&&wm in e&&(t==null||!!(e.type&t))}const $u="[^/]+?",WS={sensitive:!1,strict:!1,start:!0,end:!0},HS=/[.+*?^${}()[\]/\\]/g;function zS(e,t){const n=gt({},WS,t),s=[];let i=n.start?"^":"";const o=[];for(const c of e){const h=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let u=0;u<c.length;u++){const d=c[u];let f=40+(n.sensitive?.25:0);if(d.type===0)u||(i+="/"),i+=d.value.replace(HS,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:g,optional:m,regexp:y}=d;o.push({name:p,repeatable:g,optional:m});const v=y||$u;if(v!==$u){f+=10;try{new RegExp(`(${v})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${v}): `+w.message)}}let C=g?`((?:${v})(?:/(?:${v}))*)`:`(${v})`;u||(C=m&&c.length<2?`(?:/${C})`:"/"+C),m&&(C+="?"),i+=C,f+=20,m&&(f+=-8),g&&(f+=-20),v===".*"&&(f+=-50)}h.push(f)}s.push(h)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const r=new RegExp(i,n.sensitive?"":"i");function a(c){const h=c.match(r),u={};if(!h)return null;for(let d=1;d<h.length;d++){const f=h[d]||"",p=o[d-1];u[p.name]=f&&p.repeatable?f.split("/"):f}return u}function l(c){let h="",u=!1;for(const d of e){(!u||!h.endsWith("/"))&&(h+="/"),u=!1;for(const f of d)if(f.type===0)h+=f.value;else if(f.type===1){const{value:p,repeatable:g,optional:m}=f,y=p in c?c[p]:"";if(ze(y)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const v=ze(y)?y.join("/"):y;if(!v)if(m)d.length<2&&(h.endsWith("/")?h=h.slice(0,-1):u=!0);else throw new Error(`Missing required param "${p}"`);h+=v}}return h||"/"}return{re:r,score:s,keys:o,parse:a,stringify:l}}function VS(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Cm(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const o=VS(s[n],i[n]);if(o)return o;n++}if(Math.abs(i.length-s.length)===1){if(ju(s))return 1;if(ju(i))return-1}return i.length-s.length}function ju(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const $S={type:0,value:""},jS=/[a-zA-Z0-9_]/;function US(e){if(!e)return[[]];if(e==="/")return[[$S]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=0,s=n;const i=[];let o;function r(){o&&i.push(o),o=[]}let a=0,l,c="",h="";function u(){c&&(n===0?o.push({type:0,value:c}):n===1||n===2||n===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(c&&u(),r()):l===":"?(u(),n=1):d();break;case 4:d(),n=s;break;case 1:l==="("?n=2:jS.test(l)?d():(u(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:u(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),u(),r(),i}function YS(e,t,n){const s=zS(US(e.path),n),i=gt(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function qS(e,t){const n=[],s=new Map;t=Ku({strict:!1,end:!0,sensitive:!1},t);function i(u){return s.get(u)}function o(u,d,f){const p=!f,g=Yu(u);g.aliasOf=f&&f.record;const m=Ku(t,u),y=[g];if("alias"in u){const w=typeof u.alias=="string"?[u.alias]:u.alias;for(const S of w)y.push(Yu(gt({},g,{components:f?f.record.components:g.components,path:S,aliasOf:f?f.record:g})))}let v,C;for(const w of y){const{path:S}=w;if(d&&S[0]!=="/"){const A=d.record.path,E=A[A.length-1]==="/"?"":"/";w.path=d.record.path+(S&&E+S)}if(v=YS(w,d,m),f?f.alias.push(v):(C=C||v,C!==v&&C.alias.push(v),p&&u.name&&!qu(v)&&r(u.name)),Sm(v)&&l(v),g.children){const A=g.children;for(let E=0;E<A.length;E++)o(A[E],v,f&&f.children[E])}f=f||v}return C?()=>{r(C)}:Li}function r(u){if(xm(u)){const d=s.get(u);d&&(s.delete(u),n.splice(n.indexOf(d),1),d.children.forEach(r),d.alias.forEach(r))}else{const d=n.indexOf(u);d>-1&&(n.splice(d,1),u.record.name&&s.delete(u.record.name),u.children.forEach(r),u.alias.forEach(r))}}function a(){return n}function l(u){const d=XS(u,n);n.splice(d,0,u),u.record.name&&!qu(u)&&s.set(u.record.name,u)}function c(u,d){let f,p={},g,m;if("name"in u&&u.name){if(f=s.get(u.name),!f)throw Qs(1,{location:u});m=f.record.name,p=gt(Uu(d.params,f.keys.filter(C=>!C.optional).concat(f.parent?f.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),u.params&&Uu(u.params,f.keys.map(C=>C.name))),g=f.stringify(p)}else if(u.path!=null)g=u.path,f=n.find(C=>C.re.test(g)),f&&(p=f.parse(g),m=f.record.name);else{if(f=d.name?s.get(d.name):n.find(C=>C.re.test(d.path)),!f)throw Qs(1,{location:u,currentLocation:d});m=f.record.name,p=gt({},d.params,u.params),g=f.stringify(p)}const y=[];let v=f;for(;v;)y.unshift(v.record),v=v.parent;return{name:m,path:g,params:p,matched:y,meta:GS(y)}}e.forEach(u=>o(u));function h(){n.length=0,s.clear()}return{addRoute:o,resolve:c,removeRoute:r,clearRoutes:h,getRoutes:a,getRecordMatcher:i}}function Uu(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function Yu(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:KS(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function KS(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function qu(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function GS(e){return e.reduce((t,n)=>gt(t,n.meta),{})}function Ku(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function XS(e,t){let n=0,s=t.length;for(;n!==s;){const o=n+s>>1;Cm(e,t[o])<0?s=o:n=o+1}const i=QS(e);return i&&(s=t.lastIndexOf(i,s-1)),s}function QS(e){let t=e;for(;t=t.parent;)if(Sm(t)&&Cm(e,t)===0)return t}function Sm({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function JS(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<s.length;++i){const o=s[i].replace(gm," "),r=o.indexOf("="),a=ro(r<0?o:o.slice(0,r)),l=r<0?null:ro(o.slice(r+1));if(a in t){let c=t[a];ze(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Gu(e){let t="";for(let n in e){const s=e[n];if(n=yS(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(ze(s)?s.map(o=>o&&Rl(o)):[s&&Rl(s)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function ZS(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=ze(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const t1=Symbol(""),Xu=Symbol(""),ca=Symbol(""),Em=Symbol(""),Ol=Symbol("");function di(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Dn(e,t,n,s,i,o=r=>r()){const r=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(Qs(4,{from:n,to:t})):d instanceof Error?l(d):BS(d)?l(Qs(2,{from:t,to:d})):(r&&s.enterCallbacks[i]===r&&typeof d=="function"&&r.push(d),a())},h=o(()=>e.call(s&&s.instances[i],t,n,c));let u=Promise.resolve(h);e.length<3&&(u=u.then(c)),u.catch(d=>l(d))})}function Va(e,t,n,s,i=o=>o()){const o=[];for(const r of e)for(const a in r.components){let l=r.components[a];if(!(t!=="beforeRouteEnter"&&!r.instances[a]))if(fm(l)){const h=(l.__vccOpts||l)[t];h&&o.push(Dn(h,n,s,r,a,i))}else{let c=l();o.push(()=>c.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${r.path}"`);const u=aS(h)?h.default:h;r.mods[a]=h,r.components[a]=u;const f=(u.__vccOpts||u)[t];return f&&Dn(f,n,s,r,a,i)()}))}}return o}function Qu(e){const t=Ze(ca),n=Ze(Em),s=At(()=>{const l=yt(e.to);return t.resolve(l)}),i=At(()=>{const{matched:l}=s.value,{length:c}=l,h=l[c-1],u=n.matched;if(!h||!u.length)return-1;const d=u.findIndex(Xs.bind(null,h));if(d>-1)return d;const f=Ju(l[c-2]);return c>1&&Ju(h)===f&&u[u.length-1].path!==f?u.findIndex(Xs.bind(null,l[c-2])):d}),o=At(()=>i.value>-1&&o1(n.params,s.value.params)),r=At(()=>i.value>-1&&i.value===n.matched.length-1&&bm(n.params,s.value.params));function a(l={}){if(i1(l)){const c=t[yt(e.replace)?"replace":"push"](yt(e.to)).catch(Li);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:At(()=>s.value.href),isActive:o,isExactActive:r,navigate:a}}function e1(e){return e.length===1?e[0]:e}const n1=Re({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Qu,setup(e,{slots:t}){const n=$r(Qu(e)),{options:s}=Ze(ca),i=At(()=>({[Zu(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Zu(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&e1(t.default(n));return e.custom?o:Ki("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),s1=n1;function i1(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function o1(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!ze(i)||i.length!==s.length||s.some((o,r)=>o!==i[r]))return!1}return!0}function Ju(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Zu=(e,t,n)=>e??t??n,r1=Re({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=Ze(Ol),i=At(()=>e.route||s.value),o=Ze(Xu,0),r=At(()=>{let c=yt(o);const{matched:h}=i.value;let u;for(;(u=h[c])&&!u.components;)c++;return c}),a=At(()=>i.value.matched[r.value]);Xo(Xu,At(()=>r.value+1)),Xo(t1,a),Xo(Ol,i);const l=ye();return Bs(()=>[l.value,a.value,e.name],([c,h,u],[d,f,p])=>{h&&(h.instances[u]=c,f&&f!==h&&c&&c===d&&(h.leaveGuards.size||(h.leaveGuards=f.leaveGuards),h.updateGuards.size||(h.updateGuards=f.updateGuards))),c&&h&&(!f||!Xs(h,f)||!d)&&(h.enterCallbacks[u]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=i.value,h=e.name,u=a.value,d=u&&u.components[h];if(!d)return td(n.default,{Component:d,route:c});const f=u.props[h],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,m=Ki(d,gt({},p,t,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(u.instances[h]=null)},ref:l}));return td(n.default,{Component:m,route:c})||m}}});function td(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const a1=r1;function l1(e){const t=qS(e.routes,e),n=e.parseQuery||JS,s=e.stringifyQuery||Gu,i=e.history,o=di(),r=di(),a=di(),l=ry(Pn);let c=Pn;Ps&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Ha.bind(null,I=>""+I),u=Ha.bind(null,vS),d=Ha.bind(null,ro);function f(I,z){let W,V;return xm(I)?(W=t.getRecordMatcher(I),V=z):V=I,t.addRoute(V,W)}function p(I){const z=t.getRecordMatcher(I);z&&t.removeRoute(z)}function g(){return t.getRoutes().map(I=>I.record)}function m(I){return!!t.getRecordMatcher(I)}function y(I,z){if(z=gt({},z||l.value),typeof I=="string"){const x=za(n,I,z.path),T=t.resolve({path:x.path},z),P=i.createHref(x.fullPath);return gt(x,T,{params:d(T.params),hash:ro(x.hash),redirectedFrom:void 0,href:P})}let W;if(I.path!=null)W=gt({},I,{path:za(n,I.path,z.path).path});else{const x=gt({},I.params);for(const T in x)x[T]==null&&delete x[T];W=gt({},I,{params:u(x)}),z.params=u(z.params)}const V=t.resolve(W,z),wt=I.hash||"";V.params=h(d(V.params));const _=CS(s,gt({},I,{hash:_S(wt),path:V.path})),b=i.createHref(_);return gt({fullPath:_,hash:wt,query:s===Gu?ZS(I.query):I.query||{}},V,{redirectedFrom:void 0,href:b})}function v(I){return typeof I=="string"?za(n,I,l.value.path):gt({},I)}function C(I,z){if(c!==I)return Qs(8,{from:z,to:I})}function w(I){return E(I)}function S(I){return w(gt(v(I),{replace:!0}))}function A(I){const z=I.matched[I.matched.length-1];if(z&&z.redirect){const{redirect:W}=z;let V=typeof W=="function"?W(I):W;return typeof V=="string"&&(V=V.includes("?")||V.includes("#")?V=v(V):{path:V},V.params={}),gt({query:I.query,hash:I.hash,params:V.path!=null?{}:I.params},V)}}function E(I,z){const W=c=y(I),V=l.value,wt=I.state,_=I.force,b=I.replace===!0,x=A(W);if(x)return E(gt(v(x),{state:typeof x=="object"?gt({},wt,x.state):wt,force:_,replace:b}),z||W);const T=W;T.redirectedFrom=z;let P;return!_&&SS(s,V,W)&&(P=Qs(16,{to:T,from:V}),ce(V,V,!0,!1)),(P?Promise.resolve(P):$(T,V)).catch(M=>an(M)?an(M,2)?M:le(M):nt(M,T,V)).then(M=>{if(M){if(an(M,2))return E(gt({replace:b},v(M.to),{state:typeof M.to=="object"?gt({},wt,M.to.state):wt,force:_}),z||T)}else M=et(T,V,!0,b,wt);return G(T,V,M),M})}function k(I,z){const W=C(I,z);return W?Promise.reject(W):Promise.resolve()}function O(I){const z=fe.values().next().value;return z&&typeof z.runWithContext=="function"?z.runWithContext(I):I()}function $(I,z){let W;const[V,wt,_]=c1(I,z);W=Va(V.reverse(),"beforeRouteLeave",I,z);for(const x of V)x.leaveGuards.forEach(T=>{W.push(Dn(T,I,z))});const b=k.bind(null,I,z);return W.push(b),zt(W).then(()=>{W=[];for(const x of o.list())W.push(Dn(x,I,z));return W.push(b),zt(W)}).then(()=>{W=Va(wt,"beforeRouteUpdate",I,z);for(const x of wt)x.updateGuards.forEach(T=>{W.push(Dn(T,I,z))});return W.push(b),zt(W)}).then(()=>{W=[];for(const x of _)if(x.beforeEnter)if(ze(x.beforeEnter))for(const T of x.beforeEnter)W.push(Dn(T,I,z));else W.push(Dn(x.beforeEnter,I,z));return W.push(b),zt(W)}).then(()=>(I.matched.forEach(x=>x.enterCallbacks={}),W=Va(_,"beforeRouteEnter",I,z,O),W.push(b),zt(W))).then(()=>{W=[];for(const x of r.list())W.push(Dn(x,I,z));return W.push(b),zt(W)}).catch(x=>an(x,8)?x:Promise.reject(x))}function G(I,z,W){a.list().forEach(V=>O(()=>V(I,z,W)))}function et(I,z,W,V,wt){const _=C(I,z);if(_)return _;const b=z===Pn,x=Ps?history.state:{};W&&(V||b?i.replace(I.fullPath,gt({scroll:b&&x&&x.scroll},wt)):i.push(I.fullPath,wt)),l.value=I,ce(I,z,W,b),le()}let xt;function jt(){xt||(xt=i.listen((I,z,W)=>{if(!Ve.listening)return;const V=y(I),wt=A(V);if(wt){E(gt(wt,{replace:!0,force:!0}),V).catch(Li);return}c=V;const _=l.value;Ps&&RS(Hu(_.fullPath,W.delta),la()),$(V,_).catch(b=>an(b,12)?b:an(b,2)?(E(gt(v(b.to),{force:!0}),V).then(x=>{an(x,20)&&!W.delta&&W.type===ao.pop&&i.go(-1,!1)}).catch(Li),Promise.reject()):(W.delta&&i.go(-W.delta,!1),nt(b,V,_))).then(b=>{b=b||et(V,_,!1),b&&(W.delta&&!an(b,8)?i.go(-W.delta,!1):W.type===ao.pop&&an(b,20)&&i.go(-1,!1)),G(V,_,b)}).catch(Li)}))}let ht=di(),Z=di(),Y;function nt(I,z,W){le(I);const V=Z.list();return V.length?V.forEach(wt=>wt(I,z,W)):console.error(I),Promise.reject(I)}function Et(){return Y&&l.value!==Pn?Promise.resolve():new Promise((I,z)=>{ht.add([I,z])})}function le(I){return Y||(Y=!I,jt(),ht.list().forEach(([z,W])=>I?W(I):z()),ht.reset()),I}function ce(I,z,W,V){const{scrollBehavior:wt}=e;if(!Ps||!wt)return Promise.resolve();const _=!W&&DS(Hu(I.fullPath,0))||(V||!W)&&history.state&&history.state.scroll||null;return Ur().then(()=>wt(I,z,_)).then(b=>b&&AS(b)).catch(b=>nt(b,I,z))}const Wt=I=>i.go(I);let Ie;const fe=new Set,Ve={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,clearRoutes:t.clearRoutes,hasRoute:m,getRoutes:g,resolve:y,options:e,push:w,replace:S,go:Wt,back:()=>Wt(-1),forward:()=>Wt(1),beforeEach:o.add,beforeResolve:r.add,afterEach:a.add,onError:Z.add,isReady:Et,install(I){const z=this;I.component("RouterLink",s1),I.component("RouterView",a1),I.config.globalProperties.$router=z,Object.defineProperty(I.config.globalProperties,"$route",{enumerable:!0,get:()=>yt(l)}),Ps&&!Ie&&l.value===Pn&&(Ie=!0,w(i.location).catch(wt=>{}));const W={};for(const wt in Pn)Object.defineProperty(W,wt,{get:()=>l.value[wt],enumerable:!0});I.provide(ca,z),I.provide(Em,Yf(W)),I.provide(Ol,l);const V=I.unmount;fe.add(I),I.unmount=function(){fe.delete(I),fe.size<1&&(c=Pn,xt&&xt(),xt=null,l.value=Pn,Ie=!1,Y=!1),V()}}};function zt(I){return I.reduce((z,W)=>z.then(()=>O(W)),Promise.resolve())}return Ve}function c1(e,t){const n=[],s=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let r=0;r<o;r++){const a=t.matched[r];a&&(e.matched.find(c=>Xs(c,a))?s.push(a):n.push(a));const l=e.matched[r];l&&(t.matched.find(c=>Xs(c,l))||i.push(l))}return[n,s,i]}function h1(){return Ze(ca)}const u1={class:"empty-state"},d1=Re({__name:"EmptyWorkout",props:{today:{}},setup(e){return(t,n)=>{const s=yo("router-link");return X(),it("div",u1,[st(yt(Ip),{size:48,class:"empty-icon"}),n[1]||(n[1]=R("p",null,"No workouts yet. Start your first workout today!",-1)),st(s,{to:`/workout/${t.today}`,class:"start-first-workout-btn"},{default:On(()=>n[0]||(n[0]=[We(" Start Your First Workout ",-1)])),_:1,__:[0]},8,["to"])])}}}),f1=kn(d1,[["__scopeId","data-v-e68d7992"]]),p1={class:"workouts-section"},g1={class:"workouts-list"},m1={class:"workout-header"},_1={class:"workout-date"},y1={class:"workout-stats"},b1={class:"stat"},v1={class:"stat"},x1={class:"workout-exercises"},w1={class:"exercise-info"},C1={class:"exercise-name"},S1={class:"exercise-sets"},E1={class:"exercise-details"},k1={key:0,class:"pagination"},T1=["disabled"],I1={class:"page-info"},M1=["disabled"],$a=10,P1=Re({__name:"WorkoutSection",props:{workouts:{}},setup(e){const t=ye(1),n=At(()=>Math.ceil(e.workouts.length/$a)),s=At(()=>{const r=(t.value-1)*$a,a=r+$a;return e.workouts.slice(r,a)}),i=r=>{const a=new Date(r),l=new Date,c=new Date(l);return c.setDate(l.getDate()-1),r===l.toISOString().split("T")[0]?"Today":r===c.toISOString().split("T")[0]?"Yesterday":a.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},o=r=>r.exercises.reduce((a,l)=>a+l.sets.length,0);return(r,a)=>(X(),it("div",p1,[a[4]||(a[4]=R("h2",null,"Recent Workouts",-1)),R("div",g1,[(X(!0),it(Vt,null,Oe(s.value,l=>(X(),it("div",{key:l.id,class:"workout-item"},[R("div",m1,[R("div",_1,[R("h3",null,dt(i(l.date)),1),R("span",{class:gs(["workout-status",{completed:l.completed}])},dt(l.completed?"Completed":"In Progress"),3)]),R("div",y1,[R("span",b1,dt(l.exercises.length)+" exercises",1),R("span",v1,dt(o(l))+" sets",1)])]),R("div",x1,[(X(!0),it(Vt,null,Oe(l.exercises,c=>(X(),it("div",{key:c.exerciseId,class:"exercise-summary"},[R("div",w1,[R("span",C1,dt(c.exercise.name),1),R("span",S1,dt(c.sets.length)+" sets",1)]),R("div",E1,[(X(!0),it(Vt,null,Oe(c.sets,h=>(X(),it("span",{key:h.id,class:"set-detail"},dt(h.reps)+dt(h.weight?`  ${h.weight}kg`:"")+dt(h.duration?`  ${h.duration}s`:""),1))),128))])]))),128))])]))),128))]),n.value>1?(X(),it("div",k1,[R("button",{onClick:a[0]||(a[0]=l=>t.value--),disabled:t.value<=1,class:"page-btn"},[st(yt(Qb),{size:16}),a[2]||(a[2]=We(" Previous ",-1))],8,T1),R("span",I1," Page "+dt(t.value)+" of "+dt(n.value),1),R("button",{onClick:a[1]||(a[1]=l=>t.value++),disabled:t.value>=n.value,class:"page-btn"},[a[3]||(a[3]=We(" Next ",-1)),st(yt(Xb),{size:16})],8,M1)])):gn("",!0)]))}}),km=kn(P1,[["__scopeId","data-v-bd228c05"]]),A1={class:"dashboard"},R1={class:"dashboard-header"},D1={class:"header-actions"},O1={class:"dashboard-content"},N1=Re({__name:"DashboardPage",setup(e){const t=At(()=>new Date().toISOString().split("T")[0]);return(n,s)=>{const i=yo("router-link");return X(),it("div",A1,[R("header",R1,[s[1]||(s[1]=R("div",{class:"header-content"},[R("h1",null,"Workout Tracker"),R("p",null,"Track your fitness journey with precision")],-1)),R("div",D1,[st(i,{to:`/workout/${t.value}`,class:"start-workout-btn"},{default:On(()=>[st(yt(uc),{size:18}),s[0]||(s[0]=We(" Start Today's Workout ",-1))]),_:1,__:[0]},8,["to"])])]),R("div",O1,[yt(Qe).length===0?(X(),Yi(f1,{key:0,today:t.value},null,8,["today"])):(X(),Yi(km,{key:1,workouts:yt(Qe)},null,8,["workouts"]))])])}}}),L1=kn(N1,[["__scopeId","data-v-004460a2"]]),F1={class:"exercise-header"},B1={class:"exercise-name"},W1={class:"exercise-description"},H1={class:"muscle-tags"},z1={key:0,class:"selected-indicator"},V1=Re({__name:"ExerciseCard",props:{exercise:{},isSelected:{type:Boolean}},emits:["select"],setup(e){return(t,n)=>(X(),it("div",{class:gs(["exercise-card",{selected:t.isSelected}]),onClick:n[0]||(n[0]=s=>t.$emit("select",t.exercise))},[R("div",F1,[R("h3",B1,dt(t.exercise.name),1),R("span",{class:gs(["difficulty-badge",t.exercise.difficulty])},dt(t.exercise.difficulty),3)]),R("p",W1,dt(t.exercise.description),1),R("div",H1,[(X(!0),it(Vt,null,Oe(t.exercise.targetMuscles,s=>(X(),it("span",{key:s,class:"muscle-tag"},dt(s),1))),128))]),t.isSelected?(X(),it("div",z1,[st(yt(hc),{size:20})])):gn("",!0)],2))}}),$1=kn(V1,[["__scopeId","data-v-7f831a42"]]),j1={class:"set-tracker"},U1={class:"exercise-info"},Y1={class:"sets-container"},q1={class:"set-number"},K1={class:"set-inputs"},G1={class:"input-group"},X1=["onUpdate:modelValue","onChange"],Q1=["value"],J1={key:0,class:"input-group"},Z1=["onUpdate:modelValue"],tE=["value"],eE={key:1,class:"input-group"},nE=["onUpdate:modelValue"],sE=["value"],iE={key:0,class:"set-complete"},oE={class:"set-summary"},rE=Re({__name:"SetTracker",props:{exercise:{},initialSets:{}},emits:["setsUpdated"],setup(e,{emit:t}){const n=e,s=t,i=ye(n.initialSets?.length?n.initialSets:[u()]),o=Array.from({length:50},(p,g)=>(g+1)*2.5),r=[15,30,45,60,90,120,180,240,300],a=At(()=>!["push-ups","pull-ups","planks","mountain climbers","burpees"].includes(n.exercise.name.toLowerCase())),l=At(()=>["planks","mountain climbers"].includes(n.exercise.name.toLowerCase())),c=At(()=>i.value.filter(p=>p.reps>0).length),h=At(()=>i.value.every(p=>p.reps>0)&&i.value.length>0);function u(){return{id:Date.now().toString()+Math.random(),reps:0,weight:0,duration:0,completedAt:new Date}}function d(p){const g=i.value[p];g.reps>0&&(g.completedAt=new Date,p===i.value.length-1&&i.value.length<10&&i.value.push(u())),s("setsUpdated",i.value.filter(m=>m.reps>0))}function f(){i.value.length<10&&i.value.push(u())}return Bs(()=>i.value,()=>{s("setsUpdated",i.value.filter(p=>p.reps>0))},{deep:!0}),(p,g)=>(X(),it("div",j1,[R("div",U1,[R("h3",null,dt(p.exercise.name),1),R("p",null,dt(p.exercise.description),1)]),R("div",Y1,[(X(!0),it(Vt,null,Oe(i.value,(m,y)=>(X(),it("div",{key:m.id,class:gs(["set-row",{completed:m.reps>0}])},[R("span",q1,"Set "+dt(y+1),1),R("div",K1,[R("div",G1,[g[1]||(g[1]=R("label",null,"Reps",-1)),Ls(R("select",{"onUpdate:modelValue":v=>m.reps=v,onChange:v=>d(y),class:"set-select"},[g[0]||(g[0]=R("option",{value:"0"},"Select reps",-1)),(X(),it(Vt,null,Oe(50,v=>R("option",{key:v,value:v},dt(v),9,Q1)),64))],40,X1),[[Ws,m.reps]])]),a.value?(X(),it("div",J1,[g[3]||(g[3]=R("label",null,"Weight (kg)",-1)),Ls(R("select",{"onUpdate:modelValue":v=>m.weight=v,class:"set-select"},[g[2]||(g[2]=R("option",{value:"0"},"Weight",-1)),(X(!0),it(Vt,null,Oe(yt(o),v=>(X(),it("option",{key:v,value:v},dt(v),9,tE))),128))],8,Z1),[[Ws,m.weight]])])):gn("",!0),l.value?(X(),it("div",eE,[g[5]||(g[5]=R("label",null,"Duration (sec)",-1)),Ls(R("select",{"onUpdate:modelValue":v=>m.duration=v,class:"set-select"},[g[4]||(g[4]=R("option",{value:"0"},"Select time",-1)),(X(),it(Vt,null,Oe(r,v=>R("option",{key:v,value:v},dt(v)+"s",9,sE)),64))],8,nE),[[Ws,m.duration]])])):gn("",!0)]),m.reps>0?(X(),it("div",iE,[st(yt(hc),{size:20,class:"complete-icon"})])):gn("",!0)],2))),128))]),R("div",oE,[R("p",null,"Completed Sets: "+dt(c.value)+"/"+dt(i.value.length),1),h.value&&i.value.length<10?(X(),it("button",{key:0,onClick:f,class:"add-set-btn"},[st(yt(Mp),{size:16}),g[6]||(g[6]=We(" Add Another Set ",-1))])):gn("",!0)])]))}}),aE=kn(rE,[["__scopeId","data-v-a5d4a526"]]),lE=[{id:"1",name:"Bench Press",category:"chest",description:"Compound chest pressing movement",targetMuscles:["chest","triceps","shoulders"],difficulty:"intermediate"},{id:"2",name:"Deadlifts",category:"full-body",description:"Complete posterior chain exercise",targetMuscles:["hamstrings","glutes","erector spinae"],difficulty:"advanced"},{id:"3",name:"Sissy Squats",category:"legs",description:"Lower body compound movement",targetMuscles:["quadriceps","glutes","hamstrings"],difficulty:"beginner"},{id:"4",name:"Seated Rows",category:"back",description:"Horizontal pulling exercise",targetMuscles:["lats","rhomboids","rear delts"],difficulty:"beginner"},{id:"5",name:"Biceps curls",category:"arm",description:"Biceps focused movement",targetMuscles:["biceps"],difficulty:"beginner"},{id:"6",name:"Calf Raises",category:"calves",description:"Calf strengthening exercise",targetMuscles:["calves"],difficulty:"beginner"},{id:"7",name:"Legs extentions",category:"legs",description:"Quad strengthening exercise",targetMuscles:["quadriceps"],difficulty:"beginner"},{id:"8",name:"Adductors",category:"legs",description:"Adductor strengthening exercise",targetMuscles:["adductor"],difficulty:"beginner"},{id:"9",name:"Squats",category:"legs",description:"Lower body compound movement",targetMuscles:["quadriceps","glutes","hamstrings"],difficulty:"beginner"},{id:"10",name:"Dips",category:"triceps",description:"Tricep focused compound movement",targetMuscles:["triceps","chest","shoulders"],difficulty:"intermediate"},{id:"11",name:"Lat Pulldowns",category:"back",description:"Vertical pulling movement",targetMuscles:["lats","rhomboids","biceps"],difficulty:"beginner"},{id:"12",name:"Leg Press",category:"legs",description:"Machine-based leg exercise",targetMuscles:["quadriceps","glutes"],difficulty:"beginner"},{id:"13",name:"Push-ups",category:"chest",description:"Classic bodyweight chest exercise",targetMuscles:["chest","triceps","shoulders"],difficulty:"beginner"},{id:"14",name:"Pull-ups",category:"back",description:"Upper body pulling exercise",targetMuscles:["lats","rhomboids","biceps"],difficulty:"intermediate"}],cE="/workout-data.json";class Nl{static async saveWorkout(t){try{const n=dm(),s=um(n,"dailyWorkout");jC(s,t)}catch(n){console.error("Error saving workout:",n)}}static async getHistory(){try{const t=await fetch(cE);return t.ok?await t.json():{workouts:[]}}catch(t){return console.error("Error reading workout history:",t),{workouts:[]}}}static async getWorkoutByDate(t){try{return(await this.getHistory()).workouts.find(s=>s.date===t)||null}catch(n){return console.error("Error getting workout by date:",n),null}}static async exportData(){try{const t=await this.getHistory();return JSON.stringify(t,null,2)}catch(t){return console.error("Error exporting data:",t),JSON.stringify({workouts:[]},null,2)}}static async writeToFile(t){try{if(!(await fetch("/api/save-workout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw new Error("Failed to save workout data")}catch(n){throw console.error("Error writing to file:",n),n}}}const hE={class:"workout-page"},uE={class:"workout-header"},dE={class:"workout-header-content"},fE={key:0},pE=["disabled"],gE={class:"workout-content"},mE={key:0,class:"active-workout"},_E={class:"workout-progress"},yE={class:"progress-bar"},bE={class:"progress-text"},vE={class:"exercise-trackers"},xE={key:1,class:"exercise-selection"},wE={class:"selection-header"},CE={class:"exercise-filters"},SE=["value"],EE={class:"exercises-grid"},kE={key:0,class:"selection-actions"},TE=Re({__name:"WorkoutPage",props:{date:{}},setup(e){const t=e,n=h1(),s=At(()=>t.date||new Date().toISOString().split("T")[0]),i=At(()=>s.value===new Date().toISOString().split("T")[0]),o=ye(lE),r=ye([]),a=ye(null),l=ye(!0),c=ye(""),h=ye(""),u=At(()=>[...new Set(o.value.map(E=>E.category))]),d=At(()=>o.value.filter(E=>{const k=!c.value||E.category===c.value,O=!h.value||E.difficulty===h.value;return k&&O})),f=At(()=>a.value?a.value.exercises.reduce((E,k)=>E+k.sets.length,0):0),p=At(()=>{if(!a.value||a.value.exercises.length===0)return 0;const E=a.value.exercises.length,k=a.value.exercises.filter(O=>O.sets.length>0).length;return Math.round(k/E*100)}),g=At(()=>a.value?.exercises.some(E=>E.sets.length>0)||!1);function m(E){return r.value.some(k=>k.id===E)}function y(E){const k=r.value.findIndex(O=>O.id===E.id);k>=0?r.value.splice(k,1):r.value.push(E)}function v(){if(r.value.length===0)return;const E=r.value.map(k=>({exerciseId:k.id,exercise:k,sets:[],notes:""}));a.value={id:Date.now().toString(),date:s.value,exercises:E,completed:!1},l.value=!1}async function C(E,k){if(!a.value)return;const O=a.value.exercises.findIndex($=>$.exerciseId===E);O>=0&&(a.value.exercises[O].sets=k)}async function w(){a.value&&(a.value.completed=!0,await S(),n.push("/"))}async function S(){a.value&&await Nl.saveWorkout(a.value)}function A(E){return new Date(E).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}return qr(async()=>{const E=await Nl.getWorkoutByDate(s.value);E&&(a.value=E,l.value=!1)}),(E,k)=>(X(),it("div",hE,[R("header",uE,[R("div",dE,[R("h1",null,dt(i.value?"Today's Workout":`Workout - ${A(s.value)}`),1),a.value?(X(),it("p",fE,dt(a.value.exercises.length)+" exercises  "+dt(f.value)+" sets completed ",1)):gn("",!0)]),a.value&&a.value.exercises.length>0?(X(),it("button",{key:0,onClick:w,class:"finish-btn",disabled:!g.value},[st(yt(hc),{size:18}),k[3]||(k[3]=We(" Finish Workout ",-1))],8,pE)):gn("",!0)]),R("div",gE,[!l.value&&a.value?.exercises.length?(X(),it("div",mE,[R("div",_E,[R("div",yE,[R("div",{class:"progress-fill",style:Hr({width:`${p.value}%`})},null,4)]),R("span",bE,dt(p.value)+"% Complete",1)]),R("div",vE,[(X(!0),it(Vt,null,Oe(a.value.exercises,O=>(X(),Yi(aE,{key:O.exerciseId,exercise:O.exercise,"initial-sets":O.sets,onSetsUpdated:$=>C(O.exerciseId,$)},null,8,["exercise","initial-sets","onSetsUpdated"]))),128))]),R("button",{onClick:k[0]||(k[0]=O=>l.value=!0),class:"add-exercise-btn"},[st(yt(Mp),{size:18}),k[4]||(k[4]=We(" Add Another Exercise ",-1))])])):(X(),it("div",xE,[R("div",wE,[R("h2",null,dt(a.value?.exercises.length?"Add Exercise":"Choose Your Exercises"),1),k[5]||(k[5]=R("p",null,"Select exercises for your workout",-1))]),R("div",CE,[Ls(R("select",{"onUpdate:modelValue":k[1]||(k[1]=O=>c.value=O),class:"filter-select"},[k[6]||(k[6]=R("option",{value:""},"All Categories",-1)),(X(!0),it(Vt,null,Oe(u.value,(O,$)=>(X(),it("option",{key:$,value:O},dt(O),9,SE))),128))],512),[[Ws,c.value]]),Ls(R("select",{"onUpdate:modelValue":k[2]||(k[2]=O=>h.value=O),class:"filter-select"},k[7]||(k[7]=[R("option",{value:""},"All Difficulties",-1),R("option",{value:"beginner"},"Beginner",-1),R("option",{value:"intermediate"},"Intermediate",-1),R("option",{value:"advanced"},"Advanced",-1)]),512),[[Ws,h.value]])]),R("div",EE,[(X(!0),it(Vt,null,Oe(d.value,O=>(X(),Yi($1,{key:O.id,exercise:O,"is-selected":m(O.id),onSelect:y},null,8,["exercise","is-selected"]))),128))]),r.value.length>0?(X(),it("div",kE,[R("button",{onClick:v,class:"start-workout-btn"},[st(yt(uc),{size:18}),We(" Start Workout ("+dt(r.value.length)+" exercises) ",1)])])):gn("",!0)]))])]))}}),IE=kn(TE,[["__scopeId","data-v-e8574190"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function To(e){return e+.5|0}const Nn=(e,t,n)=>Math.max(Math.min(e,n),t);function bi(e){return Nn(To(e*2.55),0,255)}function $n(e){return Nn(To(e*255),0,255)}function dn(e){return Nn(To(e/2.55)/100,0,1)}function ed(e){return Nn(To(e*100),0,100)}const Me={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ll=[..."0123456789ABCDEF"],ME=e=>Ll[e&15],PE=e=>Ll[(e&240)>>4]+Ll[e&15],No=e=>(e&240)>>4===(e&15),AE=e=>No(e.r)&&No(e.g)&&No(e.b)&&No(e.a);function RE(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Me[e[1]]*17,g:255&Me[e[2]]*17,b:255&Me[e[3]]*17,a:t===5?Me[e[4]]*17:255}:(t===7||t===9)&&(n={r:Me[e[1]]<<4|Me[e[2]],g:Me[e[3]]<<4|Me[e[4]],b:Me[e[5]]<<4|Me[e[6]],a:t===9?Me[e[7]]<<4|Me[e[8]]:255})),n}const DE=(e,t)=>e<255?t(e):"";function OE(e){var t=AE(e)?ME:PE;return e?"#"+t(e.r)+t(e.g)+t(e.b)+DE(e.a,t):void 0}const NE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Tm(e,t,n){const s=t*Math.min(n,1-n),i=(o,r=(o+e/30)%12)=>n-s*Math.max(Math.min(r-3,9-r,1),-1);return[i(0),i(8),i(4)]}function LE(e,t,n){const s=(i,o=(i+e/60)%6)=>n-n*t*Math.max(Math.min(o,4-o,1),0);return[s(5),s(3),s(1)]}function FE(e,t,n){const s=Tm(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)s[i]*=1-t-n,s[i]+=t;return s}function BE(e,t,n,s,i){return e===i?(t-n)/s+(t<n?6:0):t===i?(n-e)/s+2:(e-t)/s+4}function Yc(e){const n=e.r/255,s=e.g/255,i=e.b/255,o=Math.max(n,s,i),r=Math.min(n,s,i),a=(o+r)/2;let l,c,h;return o!==r&&(h=o-r,c=a>.5?h/(2-o-r):h/(o+r),l=BE(n,s,i,h,o),l=l*60+.5),[l|0,c||0,a]}function qc(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map($n)}function Kc(e,t,n){return qc(Tm,e,t,n)}function WE(e,t,n){return qc(FE,e,t,n)}function HE(e,t,n){return qc(LE,e,t,n)}function Im(e){return(e%360+360)%360}function zE(e){const t=NE.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?bi(+t[5]):$n(+t[5]));const i=Im(+t[2]),o=+t[3]/100,r=+t[4]/100;return t[1]==="hwb"?s=WE(i,o,r):t[1]==="hsv"?s=HE(i,o,r):s=Kc(i,o,r),{r:s[0],g:s[1],b:s[2],a:n}}function VE(e,t){var n=Yc(e);n[0]=Im(n[0]+t),n=Kc(n),e.r=n[0],e.g=n[1],e.b=n[2]}function $E(e){if(!e)return;const t=Yc(e),n=t[0],s=ed(t[1]),i=ed(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${i}%, ${dn(e.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const nd={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},sd={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function jE(){const e={},t=Object.keys(sd),n=Object.keys(nd);let s,i,o,r,a;for(s=0;s<t.length;s++){for(r=a=t[s],i=0;i<n.length;i++)o=n[i],a=a.replace(o,nd[o]);o=parseInt(sd[r],16),e[a]=[o>>16&255,o>>8&255,o&255]}return e}let Lo;function UE(e){Lo||(Lo=jE(),Lo.transparent=[0,0,0,0]);const t=Lo[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const YE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function qE(e){const t=YE.exec(e);let n=255,s,i,o;if(t){if(t[7]!==s){const r=+t[7];n=t[8]?bi(r):Nn(r*255,0,255)}return s=+t[1],i=+t[3],o=+t[5],s=255&(t[2]?bi(s):Nn(s,0,255)),i=255&(t[4]?bi(i):Nn(i,0,255)),o=255&(t[6]?bi(o):Nn(o,0,255)),{r:s,g:i,b:o,a:n}}}function KE(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${dn(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const ja=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Ts=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function GE(e,t,n){const s=Ts(dn(e.r)),i=Ts(dn(e.g)),o=Ts(dn(e.b));return{r:$n(ja(s+n*(Ts(dn(t.r))-s))),g:$n(ja(i+n*(Ts(dn(t.g))-i))),b:$n(ja(o+n*(Ts(dn(t.b))-o))),a:e.a+n*(t.a-e.a)}}function Fo(e,t,n){if(e){let s=Yc(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=Kc(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function Mm(e,t){return e&&Object.assign(t||{},e)}function id(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=$n(e[3]))):(t=Mm(e,{r:0,g:0,b:0,a:1}),t.a=$n(t.a)),t}function XE(e){return e.charAt(0)==="r"?qE(e):zE(e)}class lo{constructor(t){if(t instanceof lo)return t;const n=typeof t;let s;n==="object"?s=id(t):n==="string"&&(s=RE(t)||UE(t)||XE(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=Mm(this._rgb);return t&&(t.a=dn(t.a)),t}set rgb(t){this._rgb=id(t)}rgbString(){return this._valid?KE(this._rgb):void 0}hexString(){return this._valid?OE(this._rgb):void 0}hslString(){return this._valid?$E(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,i=t.rgb;let o;const r=n===o?.5:n,a=2*r-1,l=s.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,s.r=255&c*s.r+o*i.r+.5,s.g=255&c*s.g+o*i.g+.5,s.b=255&c*s.b+o*i.b+.5,s.a=r*s.a+(1-r)*i.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=GE(this._rgb,t._rgb,n)),this}clone(){return new lo(this.rgb)}alpha(t){return this._rgb.a=$n(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=To(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Fo(this._rgb,2,t),this}darken(t){return Fo(this._rgb,2,-t),this}saturate(t){return Fo(this._rgb,1,t),this}desaturate(t){return Fo(this._rgb,1,-t),this}rotate(t){return VE(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ln(){}const QE=(()=>{let e=0;return()=>e++})();function at(e){return e==null}function Nt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ct(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Bt(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Ee(e,t){return Bt(e)?e:t}function J(e,t){return typeof e>"u"?t:e}const JE=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,Pm=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function It(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function vt(e,t,n,s){let i,o,r;if(Nt(e))for(o=e.length,i=0;i<o;i++)t.call(n,e[i],i);else if(ct(e))for(r=Object.keys(e),o=r.length,i=0;i<o;i++)t.call(n,e[r[i]],r[i])}function Tr(e,t){let n,s,i,o;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(i=e[n],o=t[n],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function Ir(e){if(Nt(e))return e.map(Ir);if(ct(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let i=0;for(;i<s;++i)t[n[i]]=Ir(e[n[i]]);return t}return e}function Am(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function ZE(e,t,n,s){if(!Am(e))return;const i=t[e],o=n[e];ct(i)&&ct(o)?co(i,o,s):t[e]=Ir(o)}function co(e,t,n){const s=Nt(t)?t:[t],i=s.length;if(!ct(e))return e;n=n||{};const o=n.merger||ZE;let r;for(let a=0;a<i;++a){if(r=s[a],!ct(r))continue;const l=Object.keys(r);for(let c=0,h=l.length;c<h;++c)o(l[c],e,r,n)}return e}function Bi(e,t){return co(e,t,{merger:tk})}function tk(e,t,n){if(!Am(e))return;const s=t[e],i=n[e];ct(s)&&ct(i)?Bi(s,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Ir(i))}const od={"":e=>e,x:e=>e.x,y:e=>e.y};function ek(e){const t=e.split("."),n=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function nk(e){const t=ek(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function Gn(e,t){return(od[t]||(od[t]=nk(t)))(e)}function Gc(e){return e.charAt(0).toUpperCase()+e.slice(1)}const ho=e=>typeof e<"u",Xn=e=>typeof e=="function",rd=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function sk(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const ft=Math.PI,Ot=2*ft,ik=Ot+ft,Mr=Number.POSITIVE_INFINITY,ok=ft/180,Ht=ft/2,es=ft/4,ad=ft*2/3,Ln=Math.log10,tn=Math.sign;function Wi(e,t,n){return Math.abs(e-t)<n}function ld(e){const t=Math.round(e);e=Wi(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Ln(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function rk(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((i,o)=>i-o).pop(),t}function ak(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Js(e){return!ak(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function lk(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function Rm(e,t,n){let s,i,o;for(s=0,i=e.length;s<i;s++)o=e[s][n],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Fe(e){return e*(ft/180)}function Xc(e){return e*(180/ft)}function cd(e){if(!Bt(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Dm(e,t){const n=t.x-e.x,s=t.y-e.y,i=Math.sqrt(n*n+s*s);let o=Math.atan2(s,n);return o<-.5*ft&&(o+=Ot),{angle:o,distance:i}}function Fl(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ck(e,t){return(e-t+ik)%Ot-ft}function te(e){return(e%Ot+Ot)%Ot}function uo(e,t,n,s){const i=te(e),o=te(t),r=te(n),a=te(o-i),l=te(r-i),c=te(i-o),h=te(i-r);return i===o||i===r||s&&o===r||a>l&&c<h}function Qt(e,t,n){return Math.max(t,Math.min(n,e))}function hk(e){return Qt(e,-32768,32767)}function _n(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function Qc(e,t,n){n=n||(r=>e[r]<t);let s=e.length-1,i=0,o;for(;s-i>1;)o=i+s>>1,n(o)?i=o:s=o;return{lo:i,hi:s}}const yn=(e,t,n,s)=>Qc(e,n,s?i=>{const o=e[i][t];return o<n||o===n&&e[i+1][t]===n}:i=>e[i][t]<n),uk=(e,t,n)=>Qc(e,n,s=>e[s][t]>=n);function dk(e,t,n){let s=0,i=e.length;for(;s<i&&e[s]<t;)s++;for(;i>s&&e[i-1]>n;)i--;return s>0||i<e.length?e.slice(s,i):e}const Om=["push","pop","shift","splice","unshift"];function fk(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Om.forEach(n=>{const s="_onData"+Gc(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...o){const r=i.apply(this,o);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...o)}),r}})})}function hd(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(Om.forEach(o=>{delete e[o]}),delete e._chartjs)}function Nm(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Lm=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Fm(e,t){let n=[],s=!1;return function(...i){n=i,s||(s=!0,Lm.call(window,()=>{s=!1,e.apply(t,n)}))}}function pk(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const Jc=e=>e==="start"?"left":e==="end"?"right":"center",Zt=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,gk=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function Bm(e,t,n){const s=t.length;let i=0,o=s;if(e._sorted){const{iScale:r,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,h=r.axis,{min:u,max:d,minDefined:f,maxDefined:p}=r.getUserBounds();if(f){if(i=Math.min(yn(l,h,u).lo,n?s:yn(t,h,r.getPixelForValue(u)).lo),c){const g=l.slice(0,i+1).reverse().findIndex(m=>!at(m[a.axis]));i-=Math.max(0,g)}i=Qt(i,0,s-1)}if(p){let g=Math.max(yn(l,r.axis,d,!0).hi+1,n?0:yn(t,h,r.getPixelForValue(d),!0).hi+1);if(c){const m=l.slice(g-1).findIndex(y=>!at(y[a.axis]));g+=Math.max(0,m)}o=Qt(g,i,s)-i}else o=s-i}return{start:i,count:o}}function Wm(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=i,!0;const o=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,i),o}const Bo=e=>e===0||e===1,ud=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ot/n)),dd=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ot/n)+1,Hi={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Ht)+1,easeOutSine:e=>Math.sin(e*Ht),easeInOutSine:e=>-.5*(Math.cos(ft*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Bo(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Bo(e)?e:ud(e,.075,.3),easeOutElastic:e=>Bo(e)?e:dd(e,.075,.3),easeInOutElastic(e){return Bo(e)?e:e<.5?.5*ud(e*2,.1125,.45):.5+.5*dd(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Hi.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Hi.easeInBounce(e*2)*.5:Hi.easeOutBounce(e*2-1)*.5+.5};function Zc(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function fd(e){return Zc(e)?e:new lo(e)}function Ua(e){return Zc(e)?e:new lo(e).saturate(.5).darken(.1).hexString()}const mk=["x","y","borderWidth","radius","tension"],_k=["color","borderColor","backgroundColor"];function yk(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:_k},numbers:{type:"number",properties:mk}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function bk(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const pd=new Map;function vk(e,t){t=t||{};const n=e+JSON.stringify(t);let s=pd.get(n);return s||(s=new Intl.NumberFormat(e,t),pd.set(n,s)),s}function Io(e,t,n){return vk(t,n).format(e)}const Hm={values(e){return Nt(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let i,o=e;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),o=xk(e,n)}const r=Ln(Math.abs(o)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Io(e,s,l)},logarithmic(e,t,n){if(e===0)return"0";const s=n[t].significand||e/Math.pow(10,Math.floor(Ln(e)));return[1,2,3,5,10,15].includes(s)||t>.8*n.length?Hm.numeric.call(this,e,t,n):""}};function xk(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var ha={formatters:Hm};function wk(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ha.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const bs=Object.create(null),Bl=Object.create(null);function zi(e,t){if(!t)return e;const n=t.split(".");for(let s=0,i=n.length;s<i;++s){const o=n[s];e=e[o]||(e[o]=Object.create(null))}return e}function Ya(e,t,n){return typeof t=="string"?co(zi(e,t),n):co(zi(e,""),t)}class Ck{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>Ua(i.backgroundColor),this.hoverBorderColor=(s,i)=>Ua(i.borderColor),this.hoverColor=(s,i)=>Ua(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Ya(this,t,n)}get(t){return zi(this,t)}describe(t,n){return Ya(Bl,t,n)}override(t,n){return Ya(bs,t,n)}route(t,n,s,i){const o=zi(this,t),r=zi(this,s),a="_"+n;Object.defineProperties(o,{[a]:{value:o[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=r[i];return ct(l)?Object.assign({},c,l):J(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var Lt=new Ck({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[yk,bk,wk]);function Sk(e){return!e||at(e.size)||at(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Pr(e,t,n,s,i){let o=t[i];return o||(o=t[i]=e.measureText(i).width,n.push(i)),o>s&&(s=o),s}function Ek(e,t,n,s){s=s||{};let i=s.data=s.data||{},o=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(i=s.data={},o=s.garbageCollect=[],s.font=t),e.save(),e.font=t;let r=0;const a=n.length;let l,c,h,u,d;for(l=0;l<a;l++)if(u=n[l],u!=null&&!Nt(u))r=Pr(e,i,o,r,u);else if(Nt(u))for(c=0,h=u.length;c<h;c++)d=u[c],d!=null&&!Nt(d)&&(r=Pr(e,i,o,r,d));e.restore();const f=o.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[o[l]];o.splice(0,f)}return r}function ns(e,t,n){const s=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*s)/s+i}function gd(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Wl(e,t,n,s){zm(e,t,n,s,null)}function zm(e,t,n,s,i){let o,r,a,l,c,h,u,d;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*ok;if(f&&typeof f=="object"&&(o=f.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),e.restore();return}if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:i?e.ellipse(n,s,i/2,g,0,0,Ot):e.arc(n,s,g,0,Ot),e.closePath();break;case"triangle":h=i?i/2:g,e.moveTo(n+Math.sin(m)*h,s-Math.cos(m)*g),m+=ad,e.lineTo(n+Math.sin(m)*h,s-Math.cos(m)*g),m+=ad,e.lineTo(n+Math.sin(m)*h,s-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=g*.516,l=g-c,r=Math.cos(m+es)*l,u=Math.cos(m+es)*(i?i/2-c:l),a=Math.sin(m+es)*l,d=Math.sin(m+es)*(i?i/2-c:l),e.arc(n-u,s-a,c,m-ft,m-Ht),e.arc(n+d,s-r,c,m-Ht,m),e.arc(n+u,s+a,c,m,m+Ht),e.arc(n-d,s+r,c,m+Ht,m+ft),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,h=i?i/2:l,e.rect(n-h,s-l,2*h,2*l);break}m+=es;case"rectRot":u=Math.cos(m)*(i?i/2:g),r=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-u,s-a),e.lineTo(n+d,s-r),e.lineTo(n+u,s+a),e.lineTo(n-d,s+r),e.closePath();break;case"crossRot":m+=es;case"cross":u=Math.cos(m)*(i?i/2:g),r=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-u,s-a),e.lineTo(n+u,s+a),e.moveTo(n+d,s-r),e.lineTo(n-d,s+r);break;case"star":u=Math.cos(m)*(i?i/2:g),r=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-u,s-a),e.lineTo(n+u,s+a),e.moveTo(n+d,s-r),e.lineTo(n-d,s+r),m+=es,u=Math.cos(m)*(i?i/2:g),r=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-u,s-a),e.lineTo(n+u,s+a),e.moveTo(n+d,s-r),e.lineTo(n-d,s+r);break;case"line":r=i?i/2:Math.cos(m)*g,a=Math.sin(m)*g,e.moveTo(n-r,s-a),e.lineTo(n+r,s+a);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(m)*(i?i/2:g),s+Math.sin(m)*g);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function bn(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function ua(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function da(e){e.restore()}function kk(e,t,n,s,i){if(!t)return e.lineTo(n.x,n.y);if(i==="middle"){const o=(t.x+n.x)/2;e.lineTo(o,t.y),e.lineTo(o,n.y)}else i==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Tk(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function Ik(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),at(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Mk(e,t,n,s,i){if(i.strikethrough||i.underline){const o=e.measureText(s),r=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=n-o.actualBoundingBoxAscent,c=n+o.actualBoundingBoxDescent,h=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(r,h),e.lineTo(a,h),e.stroke()}}function Pk(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function vs(e,t,n,s,i,o={}){const r=Nt(t)?t:[t],a=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(e.save(),e.font=i.string,Ik(e,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&Pk(e,o.backdrop),a&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),at(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(c,n,s,o.maxWidth)),e.fillText(c,n,s,o.maxWidth),Mk(e,n,s,c,o),s+=Number(i.lineHeight);e.restore()}function fo(e,t){const{x:n,y:s,w:i,h:o,radius:r}=t;e.arc(n+r.topLeft,s+r.topLeft,r.topLeft,1.5*ft,ft,!0),e.lineTo(n,s+o-r.bottomLeft),e.arc(n+r.bottomLeft,s+o-r.bottomLeft,r.bottomLeft,ft,Ht,!0),e.lineTo(n+i-r.bottomRight,s+o),e.arc(n+i-r.bottomRight,s+o-r.bottomRight,r.bottomRight,Ht,0,!0),e.lineTo(n+i,s+r.topRight),e.arc(n+i-r.topRight,s+r.topRight,r.topRight,0,-Ht,!0),e.lineTo(n+r.topLeft,s)}const Ak=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Rk=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Dk(e,t){const n=(""+e).match(Ak);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const Ok=e=>+e||0;function th(e,t){const n={},s=ct(t),i=s?Object.keys(t):t,o=ct(e)?s?r=>J(e[r],e[t[r]]):r=>e[r]:()=>e;for(const r of i)n[r]=Ok(o(r));return n}function Vm(e){return th(e,{top:"y",right:"x",bottom:"y",left:"x"})}function fs(e){return th(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ae(e){const t=Vm(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function qt(e,t){e=e||{},t=t||Lt.font;let n=J(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=J(e.style,t.style);s&&!(""+s).match(Rk)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:J(e.family,t.family),lineHeight:Dk(J(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:J(e.weight,t.weight),string:""};return i.string=Sk(i),i}function vi(e,t,n,s){let i,o,r;for(i=0,o=e.length;i<o;++i)if(r=e[i],r!==void 0&&r!==void 0)return r}function Nk(e,t,n){const{min:s,max:i}=e,o=Pm(t,(i-s)/2),r=(a,l)=>n&&a===0?0:a+l;return{min:r(s,-Math.abs(o)),max:r(i,o)}}function Qn(e,t){return Object.assign(Object.create(e),t)}function eh(e,t=[""],n,s,i=()=>e[0]){const o=n||e;typeof s>"u"&&(s=Ym("_fallback",e));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:o,_fallback:s,_getTarget:i,override:a=>eh([a,...e],t,o,s)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return jm(a,l,()=>$k(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return _d(a).includes(l)},ownKeys(a){return _d(a)},set(a,l,c){const h=a._storage||(a._storage=i());return a[l]=h[l]=c,delete a._keys,!0}})}function Zs(e,t,n,s){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:$m(e,s),setContext:o=>Zs(e,o,n,s),override:o=>Zs(e.override(o),t,n,s)};return new Proxy(i,{deleteProperty(o,r){return delete o[r],delete e[r],!0},get(o,r,a){return jm(o,r,()=>Fk(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(e,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,r)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(o,r){return Reflect.has(e,r)},ownKeys(){return Reflect.ownKeys(e)},set(o,r,a){return e[r]=a,delete o[r],!0}})}function $m(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:s,isScriptable:Xn(n)?n:()=>n,isIndexable:Xn(s)?s:()=>s}}const Lk=(e,t)=>e?e+Gc(t):t,nh=(e,t)=>ct(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function jm(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function Fk(e,t,n){const{_proxy:s,_context:i,_subProxy:o,_descriptors:r}=e;let a=s[t];return Xn(a)&&r.isScriptable(t)&&(a=Bk(t,a,e,n)),Nt(a)&&a.length&&(a=Wk(t,a,e,r.isIndexable)),nh(t,a)&&(a=Zs(a,i,o&&o[t],r)),a}function Bk(e,t,n,s){const{_proxy:i,_context:o,_subProxy:r,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(o,r||s);return a.delete(e),nh(e,l)&&(l=sh(i._scopes,i,e,l)),l}function Wk(e,t,n,s){const{_proxy:i,_context:o,_subProxy:r,_descriptors:a}=n;if(typeof o.index<"u"&&s(e))return t[o.index%t.length];if(ct(t[0])){const l=t,c=i._scopes.filter(h=>h!==l);t=[];for(const h of l){const u=sh(c,i,e,h);t.push(Zs(u,o,r&&r[e],a))}}return t}function Um(e,t,n){return Xn(e)?e(t,n):e}const Hk=(e,t)=>e===!0?t:typeof e=="string"?Gn(t,e):void 0;function zk(e,t,n,s,i){for(const o of t){const r=Hk(n,o);if(r){e.add(r);const a=Um(r._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(r===!1&&typeof s<"u"&&n!==s)return null}return!1}function sh(e,t,n,s){const i=t._rootScopes,o=Um(t._fallback,n,s),r=[...e,...i],a=new Set;a.add(s);let l=md(a,r,n,o||n,s);return l===null||typeof o<"u"&&o!==n&&(l=md(a,r,o,l,s),l===null)?!1:eh(Array.from(a),[""],i,o,()=>Vk(t,n,s))}function md(e,t,n,s,i){for(;n;)n=zk(e,t,n,s,i);return n}function Vk(e,t,n){const s=e._getTarget();t in s||(s[t]={});const i=s[t];return Nt(i)&&ct(n)?n:i||{}}function $k(e,t,n,s){let i;for(const o of t)if(i=Ym(Lk(o,e),n),typeof i<"u")return nh(e,i)?sh(n,s,e,i):i}function Ym(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function _d(e){let t=e._keys;return t||(t=e._keys=jk(e._scopes)),t}function jk(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}function qm(e,t,n,s){const{iScale:i}=e,{key:o="r"}=this._parsing,r=new Array(s);let a,l,c,h;for(a=0,l=s;a<l;++a)c=a+n,h=t[c],r[a]={r:i.parse(Gn(h,o),c)};return r}const Uk=Number.EPSILON||1e-14,ti=(e,t)=>t<e.length&&!e[t].skip&&e[t],Km=e=>e==="x"?"y":"x";function Yk(e,t,n,s){const i=e.skip?t:e,o=t,r=n.skip?t:n,a=Fl(o,i),l=Fl(r,o);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const u=s*c,d=s*h;return{previous:{x:o.x-u*(r.x-i.x),y:o.y-u*(r.y-i.y)},next:{x:o.x+d*(r.x-i.x),y:o.y+d*(r.y-i.y)}}}function qk(e,t,n){const s=e.length;let i,o,r,a,l,c=ti(e,0);for(let h=0;h<s-1;++h)if(l=c,c=ti(e,h+1),!(!l||!c)){if(Wi(t[h],0,Uk)){n[h]=n[h+1]=0;continue}i=n[h]/t[h],o=n[h+1]/t[h],a=Math.pow(i,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),n[h]=i*r*t[h],n[h+1]=o*r*t[h])}}function Kk(e,t,n="x"){const s=Km(n),i=e.length;let o,r,a,l=ti(e,0);for(let c=0;c<i;++c){if(r=a,a=l,l=ti(e,c+1),!a)continue;const h=a[n],u=a[s];r&&(o=(h-r[n])/3,a[`cp1${n}`]=h-o,a[`cp1${s}`]=u-o*t[c]),l&&(o=(l[n]-h)/3,a[`cp2${n}`]=h+o,a[`cp2${s}`]=u+o*t[c])}}function Gk(e,t="x"){const n=Km(t),s=e.length,i=Array(s).fill(0),o=Array(s);let r,a,l,c=ti(e,0);for(r=0;r<s;++r)if(a=l,l=c,c=ti(e,r+1),!!l){if(c){const h=c[t]-l[t];i[r]=h!==0?(c[n]-l[n])/h:0}o[r]=a?c?tn(i[r-1])!==tn(i[r])?0:(i[r-1]+i[r])/2:i[r-1]:i[r]}qk(e,i,o),Kk(e,o,t)}function Wo(e,t,n){return Math.max(Math.min(e,n),t)}function Xk(e,t){let n,s,i,o,r,a=bn(e[0],t);for(n=0,s=e.length;n<s;++n)r=o,o=a,a=n<s-1&&bn(e[n+1],t),o&&(i=e[n],r&&(i.cp1x=Wo(i.cp1x,t.left,t.right),i.cp1y=Wo(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=Wo(i.cp2x,t.left,t.right),i.cp2y=Wo(i.cp2y,t.top,t.bottom)))}function Qk(e,t,n,s,i){let o,r,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")Gk(e,i);else{let c=s?e[e.length-1]:e[0];for(o=0,r=e.length;o<r;++o)a=e[o],l=Yk(c,a,e[Math.min(o+1,r-(s?0:1))%r],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&Xk(e,n)}function ih(){return typeof window<"u"&&typeof document<"u"}function oh(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Ar(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const fa=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function Jk(e,t){return fa(e).getPropertyValue(t)}const Zk=["top","right","bottom","left"];function ps(e,t,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const o=Zk[i];s[o]=parseFloat(e[t+"-"+o+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const tT=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function eT(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:i,offsetY:o}=s;let r=!1,a,l;if(tT(i,o,e.target))a=i,l=o;else{const c=t.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function ls(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,i=fa(n),o=i.boxSizing==="border-box",r=ps(i,"padding"),a=ps(i,"border","width"),{x:l,y:c,box:h}=eT(e,n),u=r.left+(h&&a.left),d=r.top+(h&&a.top);let{width:f,height:p}=t;return o&&(f-=r.width+a.width,p-=r.height+a.height),{x:Math.round((l-u)/f*n.width/s),y:Math.round((c-d)/p*n.height/s)}}function nT(e,t,n){let s,i;if(t===void 0||n===void 0){const o=e&&oh(e);if(!o)t=e.clientWidth,n=e.clientHeight;else{const r=o.getBoundingClientRect(),a=fa(o),l=ps(a,"border","width"),c=ps(a,"padding");t=r.width-c.width-l.width,n=r.height-c.height-l.height,s=Ar(a.maxWidth,o,"clientWidth"),i=Ar(a.maxHeight,o,"clientHeight")}}return{width:t,height:n,maxWidth:s||Mr,maxHeight:i||Mr}}const Ho=e=>Math.round(e*10)/10;function sT(e,t,n,s){const i=fa(e),o=ps(i,"margin"),r=Ar(i.maxWidth,e,"clientWidth")||Mr,a=Ar(i.maxHeight,e,"clientHeight")||Mr,l=nT(e,t,n);let{width:c,height:h}=l;if(i.boxSizing==="content-box"){const d=ps(i,"border","width"),f=ps(i,"padding");c-=f.width+d.width,h-=f.height+d.height}return c=Math.max(0,c-o.width),h=Math.max(0,s?c/s:h-o.height),c=Ho(Math.min(c,r,l.maxWidth)),h=Ho(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Ho(c/2)),(t!==void 0||n!==void 0)&&s&&l.height&&h>l.height&&(h=l.height,c=Ho(Math.floor(h*s))),{width:c,height:h}}function yd(e,t,n){const s=t||1,i=Math.floor(e.height*s),o=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const r=e.canvas;return r.style&&(n||!r.style.height&&!r.style.width)&&(r.style.height=`${e.height}px`,r.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||r.height!==i||r.width!==o?(e.currentDevicePixelRatio=s,r.height=i,r.width=o,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const iT=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};ih()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function bd(e,t){const n=Jk(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function cs(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function oT(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function rT(e,t,n,s){const i={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},r=cs(e,i,n),a=cs(i,o,n),l=cs(o,t,n),c=cs(r,a,n),h=cs(a,l,n);return cs(c,h,n)}const aT=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},lT=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function $s(e,t,n){return e?aT(t,n):lT()}function Gm(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function Xm(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Qm(e){return e==="angle"?{between:uo,compare:ck,normalize:te}:{between:_n,compare:(t,n)=>t-n,normalize:t=>t}}function vd({start:e,end:t,count:n,loop:s,style:i}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:i}}function cT(e,t,n){const{property:s,start:i,end:o}=n,{between:r,normalize:a}=Qm(s),l=t.length;let{start:c,end:h,loop:u}=e,d,f;if(u){for(c+=l,h+=l,d=0,f=l;d<f&&r(a(t[c%l][s]),i,o);++d)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:u,style:e.style}}function Jm(e,t,n){if(!n)return[e];const{property:s,start:i,end:o}=n,r=t.length,{compare:a,between:l,normalize:c}=Qm(s),{start:h,end:u,loop:d,style:f}=cT(e,t,n),p=[];let g=!1,m=null,y,v,C;const w=()=>l(i,C,y)&&a(i,C)!==0,S=()=>a(o,y)===0||l(o,C,y),A=()=>g||w(),E=()=>!g||S();for(let k=h,O=h;k<=u;++k)v=t[k%r],!v.skip&&(y=c(v[s]),y!==C&&(g=l(y,i,o),m===null&&A()&&(m=a(y,i)===0?k:O),m!==null&&E()&&(p.push(vd({start:m,end:k,loop:d,count:r,style:f})),m=null),O=k,C=y));return m!==null&&p.push(vd({start:m,end:u,loop:d,count:r,style:f})),p}function Zm(e,t){const n=[],s=e.segments;for(let i=0;i<s.length;i++){const o=Jm(s[i],e.points,t);o.length&&n.push(...o)}return n}function hT(e,t,n,s){let i=0,o=t-1;if(n&&!s)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(o+=i);o>i&&e[o%t].skip;)o--;return o%=t,{start:i,end:o}}function uT(e,t,n,s){const i=e.length,o=[];let r=t,a=e[t],l;for(l=t+1;l<=n;++l){const c=e[l%i];c.skip||c.stop?a.skip||(s=!1,o.push({start:t%i,end:(l-1)%i,loop:s}),t=r=c.stop?l:null):(r=l,a.skip&&(t=l)),a=c}return r!==null&&o.push({start:t%i,end:r%i,loop:s}),o}function dT(e,t){const n=e.points,s=e.options.spanGaps,i=n.length;if(!i)return[];const o=!!e._loop,{start:r,end:a}=hT(n,i,o,s);if(s===!0)return xd(e,[{start:r,end:a,loop:o}],n,t);const l=a<r?a+i:a,c=!!e._fullLoop&&r===0&&a===i-1;return xd(e,uT(n,r,l,c),n,t)}function xd(e,t,n,s){return!s||!s.setContext||!n?t:fT(e,t,n,s)}function fT(e,t,n,s){const i=e._chart.getContext(),o=wd(e.options),{_datasetIndex:r,options:{spanGaps:a}}=e,l=n.length,c=[];let h=o,u=t[0].start,d=u;function f(p,g,m,y){const v=a?-1:1;if(p!==g){for(p+=l;n[p%l].skip;)p-=v;for(;n[g%l].skip;)g+=v;p%l!==g%l&&(c.push({start:p%l,end:g%l,loop:m,style:y}),h=y,u=g%l)}}for(const p of t){u=a?u:p.start;let g=n[u%l],m;for(d=u+1;d<=p.end;d++){const y=n[d%l];m=wd(s.setContext(Qn(i,{type:"segment",p0:g,p1:y,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:r}))),pT(m,h)&&f(u,d-1,p.loop,h),g=y,h=m}u<d-1&&f(u,d-1,p.loop,h)}return c}function wd(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function pT(e,t){if(!t)return!1;const n=[],s=function(i,o){return Zc(o)?(n.includes(o)||n.push(o),n.indexOf(o)):o};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function zo(e,t,n){return e.options.clip?e[n]:t[n]}function gT(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:zo(n,t,"left"),right:zo(n,t,"right"),top:zo(s,t,"top"),bottom:zo(s,t,"bottom")}:t}function t_(e,t){const n=t._clip;if(n.disabled)return!1;const s=gT(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class mT{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,i){const o=n.listeners[i],r=n.duration;o.forEach(a=>a({chart:t,initial:n.initial,numSteps:r,currentStep:Math.min(s-n.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=Lm.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const o=s.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(o[r]=o[o.length-1],o.pop());a&&(i.draw(),this._notify(i,s,t,"progress")),o.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),n+=o.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var cn=new mT;const Cd="transparent",_T={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=fd(e||Cd),i=s.valid&&fd(t||Cd);return i&&i.valid?i.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class yT{constructor(t,n,s,i){const o=n[s];i=vi([t.to,i,o,t.from]);const r=vi([t.from,o,i]);this._active=!0,this._fn=t.fn||_T[t.type||typeof r],this._easing=Hi[t.easing]||Hi.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=r,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],o=s-this._start,r=this._duration-o;this._start=s,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=vi([t.to,n,i,t.from]),this._from=vi([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,i=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||n<s),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=o;return}l=n/s%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(o,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class e_{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!ct(t))return;const n=Object.keys(Lt.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const o=t[i];if(!ct(o))return;const r={};for(const a of n)r[a]=o[a];(Nt(o.properties)&&o.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,r)})})}_animateOptions(t,n){const s=n.options,i=vT(t,s);if(!i)return[];const o=this._createAnimations(i,s);return s.$shared&&bT(t.options.$animations,s).then(()=>{t.options=s},()=>{}),o}_createAnimations(t,n){const s=this._properties,i=[],o=t.$animations||(t.$animations={}),r=Object.keys(n),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,n));continue}const h=n[c];let u=o[c];const d=s.get(c);if(u)if(d&&u.active()){u.update(d,h,a);continue}else u.cancel();if(!d||!d.duration){t[c]=h;continue}o[c]=u=new yT(d,t,c,h),i.push(u)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return cn.add(this._chart,s),!0}}function bT(e,t){const n=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const o=e[s[i]];o&&o.active()&&n.push(o.wait())}return Promise.all(n)}function vT(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Sd(e,t){const n=e&&e.options||{},s=n.reverse,i=n.min===void 0?t:0,o=n.max===void 0?t:0;return{start:s?o:i,end:s?i:o}}function xT(e,t,n){if(n===!1)return!1;const s=Sd(e,n),i=Sd(t,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function wT(e){let t,n,s,i;return ct(e)?(t=e.top,n=e.right,s=e.bottom,i=e.left):t=n=s=i=e,{top:t,right:n,bottom:s,left:i,disabled:e===!1}}function n_(e,t){const n=[],s=e._getSortedDatasetMetas(t);let i,o;for(i=0,o=s.length;i<o;++i)n.push(s[i].index);return n}function Ed(e,t,n,s={}){const i=e.keys,o=s.mode==="single";let r,a,l,c;if(t===null)return;let h=!1;for(r=0,a=i.length;r<a;++r){if(l=+i[r],l===n){if(h=!0,s.all)continue;break}c=e.values[l],Bt(c)&&(o||t===0||tn(t)===tn(c))&&(t+=c)}return!h&&!s.all?0:t}function CT(e,t){const{iScale:n,vScale:s}=t,i=n.axis==="x"?"x":"y",o=s.axis==="x"?"x":"y",r=Object.keys(e),a=new Array(r.length);let l,c,h;for(l=0,c=r.length;l<c;++l)h=r[l],a[l]={[i]:h,[o]:e[h]};return a}function qa(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function ST(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function ET(e){const{min:t,max:n,minDefined:s,maxDefined:i}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function kT(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function kd(e,t,n,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const o=e[i.index];if(n&&o>0||!n&&o<0)return i.index}return null}function Td(e,t){const{chart:n,_cachedMeta:s}=e,i=n._stacks||(n._stacks={}),{iScale:o,vScale:r,index:a}=s,l=o.axis,c=r.axis,h=ST(o,r,s),u=t.length;let d;for(let f=0;f<u;++f){const p=t[f],{[l]:g,[c]:m}=p,y=p._stacks||(p._stacks={});d=y[c]=kT(i,h,g),d[a]=m,d._top=kd(d,r,!0,s.type),d._bottom=kd(d,r,!1,s.type);const v=d._visualValues||(d._visualValues={});v[a]=m}}function Ka(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function TT(e,t){return Qn(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function IT(e,t,n){return Qn(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function fi(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const i of t){const o=i._stacks;if(!o||o[s]===void 0||o[s][n]===void 0)return;delete o[s][n],o[s]._visualValues!==void 0&&o[s]._visualValues[n]!==void 0&&delete o[s]._visualValues[n]}}}const Ga=e=>e==="reset"||e==="none",Id=(e,t)=>t?e:Object.assign({},e),MT=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:n_(n,!0),values:null};class Jn{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=qa(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&fi(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(u,d,f,p)=>u==="x"?d:u==="r"?p:f,o=n.xAxisID=J(s.xAxisID,Ka(t,"x")),r=n.yAxisID=J(s.yAxisID,Ka(t,"y")),a=n.rAxisID=J(s.rAxisID,Ka(t,"r")),l=n.indexAxis,c=n.iAxisID=i(l,o,r,a),h=n.vAxisID=i(l,r,o,a);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(r),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&hd(this._data,this),t._stacked&&fi(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(ct(n)){const i=this._cachedMeta;this._data=CT(n,i)}else if(s!==n){if(s){hd(s,this);const i=this._cachedMeta;fi(i),i._parsed=[]}n&&Object.isExtensible(n)&&fk(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const o=n._stacked;n._stacked=qa(n.vScale,n),n.stack!==s.stack&&(i=!0,fi(n),n.stack=s.stack),this._resyncElements(t),(i||o!==n._stacked)&&(Td(this,n._parsed),n._stacked=qa(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:i}=this,{iScale:o,_stacked:r}=s,a=o.axis;let l=t===0&&n===i.length?!0:s._sorted,c=t>0&&s._parsed[t-1],h,u,d;if(this._parsing===!1)s._parsed=i,s._sorted=!0,d=i;else{Nt(i[t])?d=this.parseArrayData(s,i,t,n):ct(i[t])?d=this.parseObjectData(s,i,t,n):d=this.parsePrimitiveData(s,i,t,n);const f=()=>u[a]===null||c&&u[a]<c[a];for(h=0;h<n;++h)s._parsed[h+t]=u=d[h],l&&(f()&&(l=!1),c=u);s._sorted=l}r&&Td(this,d)}parsePrimitiveData(t,n,s,i){const{iScale:o,vScale:r}=t,a=o.axis,l=r.axis,c=o.getLabels(),h=o===r,u=new Array(i);let d,f,p;for(d=0,f=i;d<f;++d)p=d+s,u[d]={[a]:h||o.parse(c[p],p),[l]:r.parse(n[p],p)};return u}parseArrayData(t,n,s,i){const{xScale:o,yScale:r}=t,a=new Array(i);let l,c,h,u;for(l=0,c=i;l<c;++l)h=l+s,u=n[h],a[l]={x:o.parse(u[0],h),y:r.parse(u[1],h)};return a}parseObjectData(t,n,s,i){const{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let h,u,d,f;for(h=0,u=i;h<u;++h)d=h+s,f=n[d],c[h]={x:o.parse(Gn(f,a),d),y:r.parse(Gn(f,l),d)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const i=this.chart,o=this._cachedMeta,r=n[t.axis],a={keys:n_(i,!0),values:n._stacks[t.axis]._visualValues};return Ed(a,r,o.index,{mode:s})}updateRangeFromParsed(t,n,s,i){const o=s[n.axis];let r=o===null?NaN:o;const a=i&&s._stacks[n.axis];i&&a&&(i.values=a,r=Ed(i,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,n){const s=this._cachedMeta,i=s._parsed,o=s._sorted&&t===s.iScale,r=i.length,a=this._getOtherScale(t),l=MT(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:u}=ET(a);let d,f;function p(){f=i[d];const g=f[a.axis];return!Bt(f[t.axis])||h>g||u<g}for(d=0;d<r&&!(!p()&&(this.updateRangeFromParsed(c,t,f,l),o));++d);if(o){for(d=r-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(c,t,f,l);break}}return c}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let i,o,r;for(i=0,o=n.length;i<o;++i)r=n[i][t.axis],Bt(r)&&s.push(r);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,i=n.vScale,o=this.getParsed(t);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=wT(J(this.options.clip,xT(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],o=n.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let h;for(s.dataset&&s.dataset.draw(t,o,a,l),h=a;h<a+l;++h){const u=i[h];u.hidden||(u.active&&c?r.push(u):u.draw(t,o))}for(h=0;h<r.length;++h)r[h].draw(t,o)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const i=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const r=this._cachedMeta.data[t];o=r.$context||(r.$context=IT(this.getContext(),t,r)),o.parsed=this.getParsed(t),o.raw=i.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=TT(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=s,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const i=n==="active",o=this._cachedDataOpts,r=t+"-"+n,a=o[r],l=this.enableOptionSharing&&ho(s);if(a)return Id(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),u=i?[`${t}Hover`,"hover",t,""]:[t,""],d=c.getOptionScopes(this.getDataset(),h),f=Object.keys(Lt.elements[t]),p=()=>this.getContext(s,i,n),g=c.resolveNamedOptions(d,f,p,u);return g.$shared&&(g.$shared=l,o[r]=Object.freeze(Id(g,l))),g}_resolveAnimations(t,n,s){const i=this.chart,o=this._cachedDataOpts,r=`animation-${n}`,a=o[r];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,u=h.datasetAnimationScopeKeys(this._type,n),d=h.getOptionScopes(this.getDataset(),u);l=h.createResolver(d,this.getContext(t,s,n))}const c=new e_(i,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Ga(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),i=this._sharedOptions,o=this.getSharedOptions(s),r=this.includeOptions(n,o)||o!==i;return this.updateSharedOptions(o,n,s),{sharedOptions:o,includeOptions:r}}updateElement(t,n,s,i){Ga(i)?Object.assign(t,s):this._resolveAnimations(n,i).update(t,s)}updateSharedOptions(t,n,s){t&&!Ga(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,i){t.active=i;const o=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(t,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=s.length,o=n.length,r=Math.min(o,i);r&&this.parse(0,r),o>i?this._insertElements(i,o-i,t):o<i&&this._removeElements(o,i-o)}_insertElements(t,n,s=!0){const i=this._cachedMeta,o=i.data,r=t+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=r;a--)c[a]=c[a-n]};for(l(o),a=t;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,n),s&&this.updateElements(o,t,n,"reset")}updateElements(t,n,s,i){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,n);s._stacked&&fi(s,i)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,i]=t;this[n](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function PT(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let s=[];for(let i=0,o=n.length;i<o;i++)s=s.concat(n[i].controller.getAllParsedValues(e));e._cache.$bar=Nm(s.sort((i,o)=>i-o))}return e._cache.$bar}function AT(e){const t=e.iScale,n=PT(t,e.type);let s=t._length,i,o,r,a;const l=()=>{r===32767||r===-32768||(ho(a)&&(s=Math.min(s,Math.abs(r-a)||s)),a=r)};for(i=0,o=n.length;i<o;++i)r=t.getPixelForValue(n[i]),l();for(a=void 0,i=0,o=t.ticks.length;i<o;++i)r=t.getPixelForTick(i),l();return s}function RT(e,t,n,s){const i=n.barThickness;let o,r;return at(i)?(o=t.min*n.categoryPercentage,r=n.barPercentage):(o=i*s,r=1),{chunk:o/s,ratio:r,start:t.pixels[e]-o/2}}function DT(e,t,n,s){const i=t.pixels,o=i[e];let r=e>0?i[e-1]:null,a=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;r===null&&(r=o-(a===null?t.end-t.start:a-o)),a===null&&(a=o+o-r);const c=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/s,ratio:n.barPercentage,start:c}}function OT(e,t,n,s){const i=n.parse(e[0],s),o=n.parse(e[1],s),r=Math.min(i,o),a=Math.max(i,o);let l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:o,min:r,max:a}}function s_(e,t,n,s){return Nt(e)?OT(e,t,n,s):t[n.axis]=n.parse(e,s),t}function Md(e,t,n,s){const i=e.iScale,o=e.vScale,r=i.getLabels(),a=i===o,l=[];let c,h,u,d;for(c=n,h=n+s;c<h;++c)d=t[c],u={},u[i.axis]=a||i.parse(r[c],c),l.push(s_(d,u,o,c));return l}function Xa(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function NT(e,t,n){return e!==0?tn(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function LT(e){let t,n,s,i,o;return e.horizontal?(t=e.base>e.x,n="left",s="right"):(t=e.base<e.y,n="bottom",s="top"),t?(i="end",o="start"):(i="start",o="end"),{start:n,end:s,reverse:t,top:i,bottom:o}}function FT(e,t,n,s){let i=t.borderSkipped;const o={};if(!i){e.borderSkipped=o;return}if(i===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:c,bottom:h}=LT(e);i==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===s?i=c:(n._bottom||0)===s?i=h:(o[Pd(h,r,a,l)]=!0,i=c)),o[Pd(i,r,a,l)]=!0,e.borderSkipped=o}function Pd(e,t,n,s){return s?(e=BT(e,t,n),e=Ad(e,n,t)):e=Ad(e,t,n),e}function BT(e,t,n){return e===t?n:e===n?t:e}function Ad(e,t,n){return e==="start"?t:e==="end"?n:e}function WT(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class HT extends Jn{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,n,s,i){return Md(t,n,s,i)}parseArrayData(t,n,s,i){return Md(t,n,s,i)}parseObjectData(t,n,s,i){const{iScale:o,vScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?a:l,h=r.axis==="x"?a:l,u=[];let d,f,p,g;for(d=s,f=s+i;d<f;++d)g=n[d],p={},p[o.axis]=o.parse(Gn(g,c),d),u.push(s_(Gn(g,h),p,r,d));return u}updateRangeFromParsed(t,n,s,i){super.updateRangeFromParsed(t,n,s,i);const o=s._custom;o&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:s,vScale:i}=n,o=this.getParsed(t),r=o._custom,a=Xa(r)?"["+r.start+", "+r.end+"]":""+i.getLabelForValue(o[i.axis]);return{label:""+s.getLabelForValue(o[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,s,i){const o=i==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,i);for(let f=n;f<n+s;f++){const p=this.getParsed(f),g=o||at(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,h),y=(p._stacks||{})[a.axis],v={horizontal:c,base:g.base,enableBorderRadius:!y||Xa(p._custom)||r===y._top||r===y._bottom,x:c?g.head:m.center,y:c?m.center:g.head,height:c?m.size:Math.abs(g.size),width:c?Math.abs(g.size):m.size};d&&(v.options=u||this.resolveDataElementOptions(f,t[f].active?"active":i));const C=v.options||t[f].options;FT(v,C,y,r),WT(v,C,h.ratio),this.updateElement(t[f],f,v,i)}}_getStacks(t,n){const{iScale:s}=this._cachedMeta,i=s.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),o=s.options.stacked,r=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[s.axis],c=h=>{const u=h._parsed.find(f=>f[s.axis]===l),d=u&&u[h.vScale.axis];if(at(d)||isNaN(d))return!0};for(const h of i)if(!(n!==void 0&&c(h))&&((o===!1||r.indexOf(h.stack)===-1||o===void 0&&h.stack===void 0)&&r.push(h.stack),h.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[J(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,s){const i=this._getStacks(t,s),o=n!==void 0?i.indexOf(n):-1;return o===-1?i.length-1:o}_getRuler(){const t=this.options,n=this._cachedMeta,s=n.iScale,i=[];let o,r;for(o=0,r=n.data.length;o<r;++o)i.push(s.getPixelForValue(this.getParsed(o)[s.axis],o));const a=t.barThickness;return{min:a||AT(n),pixels:i,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:s,index:i},options:{base:o,minBarLength:r}}=this,a=o||0,l=this.getParsed(t),c=l._custom,h=Xa(c);let u=l[n.axis],d=0,f=s?this.applyStack(n,l,s):u,p,g;f!==u&&(d=f-u,f=u),h&&(u=c.barStart,f=c.barEnd-c.barStart,u!==0&&tn(u)!==tn(c.barEnd)&&(d=0),d+=u);const m=!at(o)&&!h?o:d;let y=n.getPixelForValue(m);if(this.chart.getDataVisibility(t)?p=n.getPixelForValue(d+f):p=y,g=p-y,Math.abs(g)<r){g=NT(g,n,a)*r,u===a&&(y-=g/2);const v=n.getPixelForDecimal(0),C=n.getPixelForDecimal(1),w=Math.min(v,C),S=Math.max(v,C);y=Math.max(Math.min(y,S),w),p=y+g,s&&!h&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(p)-n.getValueForPixel(y))}if(y===n.getPixelForValue(a)){const v=tn(g)*n.getLineWidthForValue(a)/2;y+=v,g-=v}return{size:g,base:y,head:p,center:p+g/2}}_calculateBarIndexPixels(t,n){const s=n.scale,i=this.options,o=i.skipNull,r=J(i.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const h=o?this._getStackCount(t):n.stackCount,u=i.barThickness==="flex"?DT(t,n,i,h*c):RT(t,n,i,h*c),d=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(J(d,this.getFirstScaleIdForIndexAxis())),p=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+f;a=u.start+u.chunk*p+u.chunk/2,l=Math.min(r,u.chunk*u.ratio)}else a=s.getPixelForValue(this.getParsed(t)[s.axis],t),l=Math.min(r,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,n=t.vScale,s=t.data,i=s.length;let o=0;for(;o<i;++o)this.getParsed(o)[n.axis]!==null&&!s[o].hidden&&s[o].draw(this._ctx)}}class zT extends Jn{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,s,i){const o=super.parsePrimitiveData(t,n,s,i);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+s).radius;return o}parseArrayData(t,n,s,i){const o=super.parseArrayData(t,n,s,i);for(let r=0;r<o.length;r++){const a=n[s+r];o[r]._custom=J(a[2],this.resolveDataElementOptions(r+s).radius)}return o}parseObjectData(t,n,s,i){const o=super.parseObjectData(t,n,s,i);for(let r=0;r<o.length;r++){const a=n[s+r];o[r]._custom=J(a&&a.r&&+a.r,this.resolveDataElementOptions(r+s).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let s=t.length-1;s>=0;--s)n=Math.max(n,t[s].size(this.resolveDataElementOptions(s))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:o}=n,r=this.getParsed(t),a=i.getLabelForValue(r.x),l=o.getLabelForValue(r.y),c=r._custom;return{label:s[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,s,i){const o=i==="reset",{iScale:r,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),h=r.axis,u=a.axis;for(let d=n;d<n+s;d++){const f=t[d],p=!o&&this.getParsed(d),g={},m=g[h]=o?r.getPixelForDecimal(.5):r.getPixelForValue(p[h]),y=g[u]=o?a.getBasePixel():a.getPixelForValue(p[u]);g.skip=isNaN(m)||isNaN(y),c&&(g.options=l||this.resolveDataElementOptions(d,f.active?"active":i),o&&(g.options.radius=0)),this.updateElement(f,d,g,i)}}resolveDataElementOptions(t,n){const s=this.getParsed(t);let i=super.resolveDataElementOptions(t,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const o=i.radius;return n!=="active"&&(i.radius=0),i.radius+=J(s&&s._custom,o),i}}function VT(e,t,n){let s=1,i=1,o=0,r=0;if(t<Ot){const a=e,l=a+t,c=Math.cos(a),h=Math.sin(a),u=Math.cos(l),d=Math.sin(l),f=(C,w,S)=>uo(C,a,l,!0)?1:Math.max(w,w*n,S,S*n),p=(C,w,S)=>uo(C,a,l,!0)?-1:Math.min(w,w*n,S,S*n),g=f(0,c,u),m=f(Ht,h,d),y=p(ft,c,u),v=p(ft+Ht,h,d);s=(g-y)/2,i=(m-v)/2,o=-(g+y)/2,r=-(m+v)/2}return{ratioX:s,ratioY:i,offsetX:o,offsetY:r}}class rh extends Jn{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:i}}=t.legend.options;return n.labels.map((o,r)=>{const l=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}};constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let o=l=>+s[l];if(ct(s[t])){const{key:l="value"}=this._parsing;o=c=>+Gn(s[c],l)}let r,a;for(r=t,a=t+n;r<a;++r)i._parsed[r]=o(r)}}_getRotation(){return Fe(this.options.rotation-90)}_getCircumference(){return Fe(this.options.circumference)}_getRotationExtents(){let t=Ot,n=-Ot;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,o=i._getRotation(),r=i._getCircumference();t=Math.min(t,o),n=Math.max(n,o+r)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,i=this._cachedMeta,o=i.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-r)/2,0),l=Math.min(JE(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:u}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:p,offsetY:g}=VT(u,h,l),m=(s.width-r)/d,y=(s.height-r)/f,v=Math.max(Math.min(m,y)/2,0),C=Pm(this.options.radius,v),w=Math.max(C*l,0),S=(C-w)/this._getVisibleDatasetWeightTotal();this.offsetX=p*C,this.offsetY=g*C,i.total=this.calculateTotal(),this.outerRadius=C-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*c,0),this.updateElements(o,0,o.length,t)}_circumference(t,n){const s=this.options,i=this._cachedMeta,o=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*o/Ot)}updateElements(t,n,s,i){const o=i==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,h=(a.left+a.right)/2,u=(a.top+a.bottom)/2,d=o&&c.animateScale,f=d?0:this.innerRadius,p=d?0:this.outerRadius,{sharedOptions:g,includeOptions:m}=this._getSharedOptions(n,i);let y=this._getRotation(),v;for(v=0;v<n;++v)y+=this._circumference(v,o);for(v=n;v<n+s;++v){const C=this._circumference(v,o),w=t[v],S={x:h+this.offsetX,y:u+this.offsetY,startAngle:y,endAngle:y+C,circumference:C,outerRadius:p,innerRadius:f};m&&(S.options=g||this.resolveDataElementOptions(v,w.active?"active":i)),y+=C,this.updateElement(w,v,S,i)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,i;for(i=0;i<n.length;i++){const o=t._parsed[i];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(s+=Math.abs(o))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Ot*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],o=Io(n._parsed[t],s.options.locale);return{label:i[t]||"",value:o}}getMaxBorderWidth(t){let n=0;const s=this.chart;let i,o,r,a,l;if(!t){for(i=0,o=s.data.datasets.length;i<o;++i)if(s.isDatasetVisible(i)){r=s.getDatasetMeta(i),t=r.data,a=r.controller;break}}if(!t)return 0;for(i=0,o=t.length;i<o;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,i=t.length;s<i;++s){const o=this.resolveDataElementOptions(s);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(J(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class $T extends Jn{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:i=[],_dataset:o}=n,r=this.chart._animationsDisabled;let{start:a,count:l}=Bm(n,i,r);this._drawStart=a,this._drawCount=l,Wm(n)&&(a=0,l=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!o._decimated,s.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!r,options:c},t),this.updateElements(i,a,l,t)}updateElements(t,n,s,i){const o=i==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:u}=this._getSharedOptions(n,i),d=r.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,m=Js(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||i==="none",v=n+s,C=t.length;let w=n>0&&this.getParsed(n-1);for(let S=0;S<C;++S){const A=t[S],E=y?A:{};if(S<n||S>=v){E.skip=!0;continue}const k=this.getParsed(S),O=at(k[f]),$=E[d]=r.getPixelForValue(k[d],S),G=E[f]=o||O?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,k,l):k[f],S);E.skip=isNaN($)||isNaN(G)||O,E.stop=S>0&&Math.abs(k[d]-w[d])>m,g&&(E.parsed=k,E.raw=c.data[S]),u&&(E.options=h||this.resolveDataElementOptions(S,A.active?"active":i)),y||this.updateElement(A,S,E,i),w=k}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,i=t.data||[];if(!i.length)return s;const o=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class i_ extends Jn{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:i}}=t.legend.options;return n.labels.map((o,r)=>{const l=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],o=Io(n._parsed[t].r,s.options.locale);return{label:i[t]||"",value:o}}parseObjectData(t,n,s,i){return qm.bind(this)(t,n,s,i)}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}getMinMax(){const t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((s,i)=>{const o=this.getParsed(i).r;!isNaN(o)&&this.chart.getDataVisibility(i)&&(o<n.min&&(n.min=o),o>n.max&&(n.max=o))}),n}_updateRadius(){const t=this.chart,n=t.chartArea,s=t.options,i=Math.min(n.right-n.left,n.bottom-n.top),o=Math.max(i/2,0),r=Math.max(s.cutoutPercentage?o/100*s.cutoutPercentage:1,0),a=(o-r)/t.getVisibleDatasetCount();this.outerRadius=o-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,n,s,i){const o=i==="reset",r=this.chart,l=r.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,u=c.yCenter,d=c.getIndexAngle(0)-.5*ft;let f=d,p;const g=360/this.countVisibleElements();for(p=0;p<n;++p)f+=this._computeAngle(p,i,g);for(p=n;p<n+s;p++){const m=t[p];let y=f,v=f+this._computeAngle(p,i,g),C=r.getDataVisibility(p)?c.getDistanceFromCenterForValue(this.getParsed(p).r):0;f=v,o&&(l.animateScale&&(C=0),l.animateRotate&&(y=v=d));const w={x:h,y:u,innerRadius:0,outerRadius:C,startAngle:y,endAngle:v,options:this.resolveDataElementOptions(p,m.active?"active":i)};this.updateElement(m,p,w,i)}}countVisibleElements(){const t=this._cachedMeta;let n=0;return t.data.forEach((s,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(t,n,s){return this.chart.getDataVisibility(t)?Fe(this.resolveDataElementOptions(t,n).angle||s):0}}class jT extends rh{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class UT extends Jn{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const n=this._cachedMeta.vScale,s=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(s[n.axis])}}parseObjectData(t,n,s,i){return qm.bind(this)(t,n,s,i)}update(t){const n=this._cachedMeta,s=n.dataset,i=n.data||[],o=n.iScale.getLabels();if(s.points=i,t!=="resize"){const r=this.resolveDatasetElementOptions(t);this.options.showLine||(r.borderWidth=0);const a={_loop:!0,_fullLoop:o.length===i.length,options:r};this.updateElement(s,void 0,a,t)}this.updateElements(i,0,i.length,t)}updateElements(t,n,s,i){const o=this._cachedMeta.rScale,r=i==="reset";for(let a=n;a<n+s;a++){const l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":i),h=o.getPointPositionForValue(a,this.getParsed(a).r),u=r?o.xCenter:h.x,d=r?o.yCenter:h.y,f={x:u,y:d,angle:h.angle,skip:isNaN(u)||isNaN(d),options:c};this.updateElement(l,a,f,i)}}}class YT extends Jn{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:o}=n,r=this.getParsed(t),a=i.getLabelForValue(r.x),l=o.getLabelForValue(r.y);return{label:s[t]||"",value:"("+a+", "+l+")"}}update(t){const n=this._cachedMeta,{data:s=[]}=n,i=this.chart._animationsDisabled;let{start:o,count:r}=Bm(n,s,i);if(this._drawStart=o,this._drawCount=r,Wm(n)&&(o=0,r=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=s;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},t)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(s,o,r,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,n,s,i){const o=i==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(n,i),u=this.getSharedOptions(h),d=this.includeOptions(i,u),f=r.axis,p=a.axis,{spanGaps:g,segment:m}=this.options,y=Js(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||o||i==="none";let C=n>0&&this.getParsed(n-1);for(let w=n;w<n+s;++w){const S=t[w],A=this.getParsed(w),E=v?S:{},k=at(A[p]),O=E[f]=r.getPixelForValue(A[f],w),$=E[p]=o||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,A,l):A[p],w);E.skip=isNaN(O)||isNaN($)||k,E.stop=w>0&&Math.abs(A[f]-C[f])>y,m&&(E.parsed=A,E.raw=c.data[w]),d&&(E.options=u||this.resolveDataElementOptions(w,S.active?"active":i)),v||this.updateElement(S,w,E,i),C=A}this.updateSharedOptions(u,i,h)}getMaxOverflow(){const t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const s=t.dataset,i=s.options&&s.options.borderWidth||0;if(!n.length)return i;const o=n[0].size(this.resolveDataElementOptions(0)),r=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,o,r)/2}}var qT=Object.freeze({__proto__:null,BarController:HT,BubbleController:zT,DoughnutController:rh,LineController:$T,PieController:jT,PolarAreaController:i_,RadarController:UT,ScatterController:YT});function ss(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ah{static override(t){Object.assign(ah.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return ss()}parse(){return ss()}format(){return ss()}add(){return ss()}diff(){return ss()}startOf(){return ss()}endOf(){return ss()}}var KT={_date:ah};function GT(e,t,n,s){const{controller:i,data:o,_sorted:r}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&r&&o.length){const c=a._reversePixels?uk:yn;if(s){if(i._sharedOptions){const h=o[0],u=typeof h.getRange=="function"&&h.getRange(t);if(u){const d=c(o,t,n-u),f=c(o,t,n+u);return{lo:d.lo,hi:f.hi}}}}else{const h=c(o,t,n);if(l){const{vScale:u}=i._cachedMeta,{_parsed:d}=e,f=d.slice(0,h.lo+1).reverse().findIndex(g=>!at(g[u.axis]));h.lo-=Math.max(0,f);const p=d.slice(h.hi).findIndex(g=>!at(g[u.axis]));h.hi+=Math.max(0,p)}return h}}return{lo:0,hi:o.length-1}}function pa(e,t,n,s,i){const o=e.getSortedVisibleDatasetMetas(),r=n[t];for(let a=0,l=o.length;a<l;++a){const{index:c,data:h}=o[a],{lo:u,hi:d}=GT(o[a],t,r,i);for(let f=u;f<=d;++f){const p=h[f];p.skip||s(p,c,f)}}}function XT(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,i){const o=t?Math.abs(s.x-i.x):0,r=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function Qa(e,t,n,s,i){const o=[];return!i&&!e.isPointInArea(t)||pa(e,n,t,function(a,l,c){!i&&!bn(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function QT(e,t,n,s){let i=[];function o(r,a,l){const{startAngle:c,endAngle:h}=r.getProps(["startAngle","endAngle"],s),{angle:u}=Dm(r,{x:t.x,y:t.y});uo(u,c,h)&&i.push({element:r,datasetIndex:a,index:l})}return pa(e,n,t,o),i}function JT(e,t,n,s,i,o){let r=[];const a=XT(n);let l=Number.POSITIVE_INFINITY;function c(h,u,d){const f=h.inRange(t.x,t.y,i);if(s&&!f)return;const p=h.getCenterPoint(i);if(!(!!o||e.isPointInArea(p))&&!f)return;const m=a(t,p);m<l?(r=[{element:h,datasetIndex:u,index:d}],l=m):m===l&&r.push({element:h,datasetIndex:u,index:d})}return pa(e,n,t,c),r}function Ja(e,t,n,s,i,o){return!o&&!e.isPointInArea(t)?[]:n==="r"&&!s?QT(e,t,n,i):JT(e,t,n,s,i,o)}function Rd(e,t,n,s,i){const o=[],r=n==="x"?"inXRange":"inYRange";let a=!1;return pa(e,n,t,(l,c,h)=>{l[r]&&l[r](t[n],i)&&(o.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,i))}),s&&!a?[]:o}var ZT={modes:{index(e,t,n,s){const i=ls(t,e),o=n.axis||"x",r=n.includeInvisible||!1,a=n.intersect?Qa(e,i,o,s,r):Ja(e,i,o,!1,s,r),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,u=c.data[h];u&&!u.skip&&l.push({element:u,datasetIndex:c.index,index:h})}),l):[]},dataset(e,t,n,s){const i=ls(t,e),o=n.axis||"xy",r=n.includeInvisible||!1;let a=n.intersect?Qa(e,i,o,s,r):Ja(e,i,o,!1,s,r);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(e,t,n,s){const i=ls(t,e),o=n.axis||"xy",r=n.includeInvisible||!1;return Qa(e,i,o,s,r)},nearest(e,t,n,s){const i=ls(t,e),o=n.axis||"xy",r=n.includeInvisible||!1;return Ja(e,i,o,n.intersect,s,r)},x(e,t,n,s){const i=ls(t,e);return Rd(e,i,"x",n.intersect,s)},y(e,t,n,s){const i=ls(t,e);return Rd(e,i,"y",n.intersect,s)}}};const o_=["left","top","right","bottom"];function pi(e,t){return e.filter(n=>n.pos===t)}function Dd(e,t){return e.filter(n=>o_.indexOf(n.pos)===-1&&n.box.axis===t)}function gi(e,t){return e.sort((n,s)=>{const i=t?s:n,o=t?n:s;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function tI(e){const t=[];let n,s,i,o,r,a;for(n=0,s=(e||[]).length;n<s;++n)i=e[n],{position:o,options:{stack:r,stackWeight:a=1}}=i,t.push({index:n,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:r&&o+r,stackWeight:a});return t}function eI(e){const t={};for(const n of e){const{stack:s,pos:i,stackWeight:o}=n;if(!s||!o_.includes(i))continue;const r=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}function nI(e,t){const n=eI(e),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let o,r,a;for(o=0,r=e.length;o<r;++o){a=e[o];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*s:l&&t.availableWidth,a.height=i):(a.width=s,a.height=h?h*i:l&&t.availableHeight)}return n}function sI(e){const t=tI(e),n=gi(t.filter(c=>c.box.fullSize),!0),s=gi(pi(t,"left"),!0),i=gi(pi(t,"right")),o=gi(pi(t,"top"),!0),r=gi(pi(t,"bottom")),a=Dd(t,"x"),l=Dd(t,"y");return{fullSize:n,leftAndTop:s.concat(o),rightAndBottom:i.concat(l).concat(r).concat(a),chartArea:pi(t,"chartArea"),vertical:s.concat(i).concat(l),horizontal:o.concat(r).concat(a)}}function Od(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function r_(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function iI(e,t,n,s){const{pos:i,box:o}=n,r=e.maxPadding;if(!ct(i)){n.size&&(e[i]-=n.size);const u=s[n.stack]||{size:0,count:1};u.size=Math.max(u.size,n.horizontal?o.height:o.width),n.size=u.size/u.count,e[i]+=n.size}o.getPadding&&r_(r,o.getPadding());const a=Math.max(0,t.outerWidth-Od(r,e,"left","right")),l=Math.max(0,t.outerHeight-Od(r,e,"top","bottom")),c=a!==e.w,h=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function oI(e){const t=e.maxPadding;function n(s){const i=Math.max(t[s]-e[s],0);return e[s]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function rI(e,t){const n=t.maxPadding;function s(i){const o={left:0,top:0,right:0,bottom:0};return i.forEach(r=>{o[r]=Math.max(t[r],n[r])}),o}return s(e?["left","right"]:["top","bottom"])}function xi(e,t,n,s){const i=[];let o,r,a,l,c,h;for(o=0,r=e.length,c=0;o<r;++o){a=e[o],l=a.box,l.update(a.width||t.w,a.height||t.h,rI(a.horizontal,t));const{same:u,other:d}=iI(t,n,a,s);c|=u&&i.length,h=h||d,l.fullSize||i.push(a)}return c&&xi(i,t,n,s)||h}function Vo(e,t,n,s,i){e.top=n,e.left=t,e.right=t+s,e.bottom=n+i,e.width=s,e.height=i}function Nd(e,t,n,s){const i=n.padding;let{x:o,y:r}=t;for(const a of e){const l=a.box,c=s[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const u=t.w*h,d=c.size||l.height;ho(c.start)&&(r=c.start),l.fullSize?Vo(l,i.left,r,n.outerWidth-i.right-i.left,d):Vo(l,t.left+c.placed,r,u,d),c.start=r,c.placed+=u,r=l.bottom}else{const u=t.h*h,d=c.size||l.width;ho(c.start)&&(o=c.start),l.fullSize?Vo(l,o,i.top,d,n.outerHeight-i.bottom-i.top):Vo(l,o,t.top+c.placed,d,u),c.start=o,c.placed+=u,o=l.right}}t.x=o,t.y=r}var ie={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const i=ae(e.options.layout.padding),o=Math.max(t-i.width,0),r=Math.max(n-i.height,0),a=sI(e.boxes),l=a.vertical,c=a.horizontal;vt(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const h=l.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/h,hBoxMaxHeight:r/2}),d=Object.assign({},i);r_(d,ae(s));const f=Object.assign({maxPadding:d,w:o,h:r,x:i.left,y:i.top},i),p=nI(l.concat(c),u);xi(a.fullSize,f,u,p),xi(l,f,u,p),xi(c,f,u,p)&&xi(l,f,u,p),oI(f),Nd(a.leftAndTop,f,u,p),f.x+=f.w,f.y+=f.h,Nd(a.rightAndBottom,f,u,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},vt(a.chartArea,g=>{const m=g.box;Object.assign(m,e.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class a_{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,i){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(t){return!0}updateConfig(t){}}class aI extends a_{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const tr="$chartjs",lI={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ld=e=>e===null||e==="";function cI(e,t){const n=e.style,s=e.getAttribute("height"),i=e.getAttribute("width");if(e[tr]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Ld(i)){const o=bd(e,"width");o!==void 0&&(e.width=o)}if(Ld(s))if(e.style.height==="")e.height=e.width/(t||2);else{const o=bd(e,"height");o!==void 0&&(e.height=o)}return e}const l_=iT?{passive:!0}:!1;function hI(e,t,n){e&&e.addEventListener(t,n,l_)}function uI(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,l_)}function dI(e,t){const n=lI[e.type]||e.type,{x:s,y:i}=ls(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:i!==void 0?i:null}}function Rr(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function fI(e,t,n){const s=e.canvas,i=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||Rr(a.addedNodes,s),r=r&&!Rr(a.removedNodes,s);r&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function pI(e,t,n){const s=e.canvas,i=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||Rr(a.removedNodes,s),r=r&&!Rr(a.addedNodes,s);r&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const po=new Map;let Fd=0;function c_(){const e=window.devicePixelRatio;e!==Fd&&(Fd=e,po.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function gI(e,t){po.size||window.addEventListener("resize",c_),po.set(e,t)}function mI(e){po.delete(e),po.size||window.removeEventListener("resize",c_)}function _I(e,t,n){const s=e.canvas,i=s&&oh(s);if(!i)return;const o=Fm((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),r=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||o(c,h)});return r.observe(i),gI(e,o),r}function Za(e,t,n){n&&n.disconnect(),t==="resize"&&mI(e)}function yI(e,t,n){const s=e.canvas,i=Fm(o=>{e.ctx!==null&&n(dI(o,e))},e);return hI(s,t,i),i}class bI extends a_{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(cI(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[tr])return!1;const s=n[tr].initial;["height","width"].forEach(o=>{const r=s[o];at(r)?n.removeAttribute(o):n.setAttribute(o,r)});const i=s.style||{};return Object.keys(i).forEach(o=>{n.style[o]=i[o]}),n.width=n.width,delete n[tr],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),r={attach:fI,detach:pI,resize:_I}[n]||yI;i[n]=r(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),i=s[n];if(!i)return;({attach:Za,detach:Za,resize:Za}[n]||uI)(t,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,i){return sT(t,n,s,i)}isAttached(t){const n=t&&oh(t);return!!(n&&n.isConnected)}}function vI(e){return!ih()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?aI:bI}let Mn=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return Js(this.x)&&Js(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const i={};return t.forEach(o=>{i[o]=s[o]&&s[o].active()?s[o]._to:this[o]}),i}};function xI(e,t){const n=e.options.ticks,s=wI(e),i=Math.min(n.maxTicksLimit||s,s),o=n.major.enabled?SI(t):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>i)return EI(t,c,o,r/i),c;const h=CI(o,t,i);if(r>0){let u,d;const f=r>1?Math.round((l-a)/(r-1)):null;for($o(t,c,h,at(f)?0:a-f,a),u=0,d=r-1;u<d;u++)$o(t,c,h,o[u],o[u+1]);return $o(t,c,h,l,at(f)?t.length:l+f),c}return $o(t,c,h),c}function wI(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(s,i))}function CI(e,t,n){const s=kI(e),i=t.length/n;if(!s)return Math.max(i,1);const o=rk(s);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>i)return l}return Math.max(i,1)}function SI(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function EI(e,t,n,s){let i=0,o=n[0],r;for(s=Math.ceil(s),r=0;r<e.length;r++)r===o&&(t.push(e[r]),i++,o=n[i*s])}function $o(e,t,n,s,i){const o=J(s,0),r=Math.min(J(i,e.length),e.length);let a=0,l,c,h;for(n=Math.ceil(n),i&&(l=i-s,n=l/Math.floor(l/n)),h=o;h<0;)a++,h=Math.round(o+a*n);for(c=Math.max(o,0);c<r;c++)c===h&&(t.push(e[c]),a++,h=Math.round(o+a*n))}function kI(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const TI=e=>e==="left"?"right":e==="right"?"left":e,Bd=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,Wd=(e,t)=>Math.min(t||e,e);function Hd(e,t){const n=[],s=e.length/t,i=e.length;let o=0;for(;o<i;o+=s)n.push(e[Math.floor(o)]);return n}function II(e,t,n){const s=e.ticks.length,i=Math.min(t,s-1),o=e._startPixel,r=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),c;if(!(n&&(s===1?c=Math.max(l-o,r-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<o-a||l>r+a)))return l}function MI(e,t){vt(e,n=>{const s=n.gc,i=s.length/2;let o;if(i>t){for(o=0;o<i;++o)delete n.data[s[o]];s.splice(0,i)}})}function mi(e){return e.drawTicks?e.tickLength:0}function zd(e,t){if(!e.display)return 0;const n=qt(e.font,t),s=ae(e.padding);return(Nt(e.text)?e.text.length:1)*n.lineHeight+s.height}function PI(e,t){return Qn(e,{scale:t,type:"scale"})}function AI(e,t,n){return Qn(e,{tick:n,index:t,type:"tick"})}function RI(e,t,n){let s=Jc(e);return(n&&t!=="right"||!n&&t==="right")&&(s=TI(s)),s}function DI(e,t,n,s){const{top:i,left:o,bottom:r,right:a,chart:l}=e,{chartArea:c,scales:h}=l;let u=0,d,f,p;const g=r-i,m=a-o;if(e.isHorizontal()){if(f=Zt(s,o,a),ct(n)){const y=Object.keys(n)[0],v=n[y];p=h[y].getPixelForValue(v)+g-t}else n==="center"?p=(c.bottom+c.top)/2+g-t:p=Bd(e,n,t);d=a-o}else{if(ct(n)){const y=Object.keys(n)[0],v=n[y];f=h[y].getPixelForValue(v)-m+t}else n==="center"?f=(c.left+c.right)/2-m+t:f=Bd(e,n,t);p=Zt(s,r,i),u=n==="left"?-Ht:Ht}return{titleX:f,titleY:p,maxWidth:d,rotation:u}}class Ss extends Mn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return t=Ee(t,Number.POSITIVE_INFINITY),n=Ee(n,Number.NEGATIVE_INFINITY),s=Ee(s,Number.POSITIVE_INFINITY),i=Ee(i,Number.NEGATIVE_INFINITY),{min:Ee(t,s),max:Ee(n,i),minDefined:Bt(t),maxDefined:Bt(n)}}getMinMax(t){let{min:n,max:s,minDefined:i,maxDefined:o}=this.getUserBounds(),r;if(i&&o)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,t),i||(n=Math.min(n,r.min)),o||(s=Math.max(s,r.max));return n=o&&n>s?s:n,s=i&&n>s?n:s,{min:Ee(n,Ee(s,n)),max:Ee(s,Ee(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){It(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:i,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Nk(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Hd(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=xI(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){It(this.options.afterUpdate,[this])}beforeSetDimensions(){It(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){It(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),It(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){It(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,i,o;for(s=0,i=t.length;s<i;s++)o=t[s],o.label=It(n.callback,[o.value,s,t],this)}afterTickToLabelConversion(){It(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){It(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=Wd(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,o=n.maxRotation;let r=i,a,l,c;if(!this._isVisible()||!n.display||i>=o||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),u=h.widest.width,d=h.highest.height,f=Qt(this.chart.width-u,0,this.maxWidth);a=t.offset?this.maxWidth/s:f/(s-1),u+6>a&&(a=f/(s-(t.offset?.5:1)),l=this.maxHeight-mi(t.grid)-n.padding-zd(t.title,this.chart.options.font),c=Math.sqrt(u*u+d*d),r=Xc(Math.min(Math.asin(Qt((h.highest.height+6)/a,-1,1)),Math.asin(Qt(l/c,-1,1))-Math.asin(Qt(d/c,-1,1)))),r=Math.max(i,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){It(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){It(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=zd(i,n.options.font);if(a?(t.width=this.maxWidth,t.height=mi(o)+l):(t.height=this.maxHeight,t.width=mi(o)+l),s.display&&this.ticks.length){const{first:c,last:h,widest:u,highest:d}=this._getLabelSizes(),f=s.padding*2,p=Fe(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(a){const y=s.mirror?0:m*u.width+g*d.height;t.height=Math.min(this.maxHeight,t.height+y+f)}else{const y=s.mirror?0:g*u.width+m*d.height;t.width=Math.min(this.maxWidth,t.width+y+f)}this._calculatePadding(c,h,m,g)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,i){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=i*t.width,f=s*n.height):(d=s*t.height,f=i*n.width):o==="start"?f=n.width:o==="end"?d=t.width:o!=="inner"&&(d=t.width/2,f=n.width/2),this.paddingLeft=Math.max((d-h+r)*this.width/(this.width-h),0),this.paddingRight=Math.max((f-u+r)*this.width/(this.width-u),0)}else{let h=n.height/2,u=t.height/2;o==="start"?(h=0,u=t.height):o==="end"&&(h=n.height,u=0),this.paddingTop=h+r,this.paddingBottom=u+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){It(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)at(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=Hd(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:i,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(n/Wd(n,s));let c=0,h=0,u,d,f,p,g,m,y,v,C,w,S;for(u=0;u<n;u+=l){if(p=t[u].label,g=this._resolveTickFontOptions(u),i.font=m=g.string,y=o[m]=o[m]||{data:{},gc:[]},v=g.lineHeight,C=w=0,!at(p)&&!Nt(p))C=Pr(i,y.data,y.gc,C,p),w=v;else if(Nt(p))for(d=0,f=p.length;d<f;++d)S=p[d],!at(S)&&!Nt(S)&&(C=Pr(i,y.data,y.gc,C,S),w+=v);r.push(C),a.push(w),c=Math.max(C,c),h=Math.max(w,h)}MI(o,n);const A=r.indexOf(c),E=a.indexOf(h),k=O=>({width:r[O]||0,height:a[O]||0});return{first:k(0),last:k(n-1),widest:k(A),highest:k(E),widths:r,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return hk(this._alignToPixels?ns(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=AI(this.getContext(),t,s))}return this.$context||(this.$context=PI(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Fe(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,i=this.options,{grid:o,position:r,border:a}=i,l=o.offset,c=this.isHorizontal(),u=this.ticks.length+(l?1:0),d=mi(o),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,y=function(Z){return ns(s,Z,g)};let v,C,w,S,A,E,k,O,$,G,et,xt;if(r==="top")v=y(this.bottom),E=this.bottom-d,O=v-m,G=y(t.top)+m,xt=t.bottom;else if(r==="bottom")v=y(this.top),G=t.top,xt=y(t.bottom)-m,E=v+m,O=this.top+d;else if(r==="left")v=y(this.right),A=this.right-d,k=v-m,$=y(t.left)+m,et=t.right;else if(r==="right")v=y(this.left),$=t.left,et=y(t.right)-m,A=v+m,k=this.left+d;else if(n==="x"){if(r==="center")v=y((t.top+t.bottom)/2+.5);else if(ct(r)){const Z=Object.keys(r)[0],Y=r[Z];v=y(this.chart.scales[Z].getPixelForValue(Y))}G=t.top,xt=t.bottom,E=v+m,O=E+d}else if(n==="y"){if(r==="center")v=y((t.left+t.right)/2);else if(ct(r)){const Z=Object.keys(r)[0],Y=r[Z];v=y(this.chart.scales[Z].getPixelForValue(Y))}A=v-m,k=A-d,$=t.left,et=t.right}const jt=J(i.ticks.maxTicksLimit,u),ht=Math.max(1,Math.ceil(u/jt));for(C=0;C<u;C+=ht){const Z=this.getContext(C),Y=o.setContext(Z),nt=a.setContext(Z),Et=Y.lineWidth,le=Y.color,ce=nt.dash||[],Wt=nt.dashOffset,Ie=Y.tickWidth,fe=Y.tickColor,Ve=Y.tickBorderDash||[],zt=Y.tickBorderDashOffset;w=II(this,C,l),w!==void 0&&(S=ns(s,w,Et),c?A=k=$=et=S:E=O=G=xt=S,f.push({tx1:A,ty1:E,tx2:k,ty2:O,x1:$,y1:G,x2:et,y2:xt,width:Et,color:le,borderDash:ce,borderDashOffset:Wt,tickWidth:Ie,tickColor:fe,tickBorderDash:Ve,tickBorderDashOffset:zt}))}return this._ticksLength=u,this._borderValue=v,f}_computeLabelItems(t){const n=this.axis,s=this.options,{position:i,ticks:o}=s,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:u}=o,d=mi(s.grid),f=d+h,p=u?-h:f,g=-Fe(this.labelRotation),m=[];let y,v,C,w,S,A,E,k,O,$,G,et,xt="middle";if(i==="top")A=this.bottom-p,E=this._getXAxisLabelAlignment();else if(i==="bottom")A=this.top+p,E=this._getXAxisLabelAlignment();else if(i==="left"){const ht=this._getYAxisLabelAlignment(d);E=ht.textAlign,S=ht.x}else if(i==="right"){const ht=this._getYAxisLabelAlignment(d);E=ht.textAlign,S=ht.x}else if(n==="x"){if(i==="center")A=(t.top+t.bottom)/2+f;else if(ct(i)){const ht=Object.keys(i)[0],Z=i[ht];A=this.chart.scales[ht].getPixelForValue(Z)+f}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")S=(t.left+t.right)/2-f;else if(ct(i)){const ht=Object.keys(i)[0],Z=i[ht];S=this.chart.scales[ht].getPixelForValue(Z)}E=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?xt="top":l==="end"&&(xt="bottom"));const jt=this._getLabelSizes();for(y=0,v=a.length;y<v;++y){C=a[y],w=C.label;const ht=o.setContext(this.getContext(y));k=this.getPixelForTick(y)+o.labelOffset,O=this._resolveTickFontOptions(y),$=O.lineHeight,G=Nt(w)?w.length:1;const Z=G/2,Y=ht.color,nt=ht.textStrokeColor,Et=ht.textStrokeWidth;let le=E;r?(S=k,E==="inner"&&(y===v-1?le=this.options.reverse?"left":"right":y===0?le=this.options.reverse?"right":"left":le="center"),i==="top"?c==="near"||g!==0?et=-G*$+$/2:c==="center"?et=-jt.highest.height/2-Z*$+$:et=-jt.highest.height+$/2:c==="near"||g!==0?et=$/2:c==="center"?et=jt.highest.height/2-Z*$:et=jt.highest.height-G*$,u&&(et*=-1),g!==0&&!ht.showLabelBackdrop&&(S+=$/2*Math.sin(g))):(A=k,et=(1-G)*$/2);let ce;if(ht.showLabelBackdrop){const Wt=ae(ht.backdropPadding),Ie=jt.heights[y],fe=jt.widths[y];let Ve=et-Wt.top,zt=0-Wt.left;switch(xt){case"middle":Ve-=Ie/2;break;case"bottom":Ve-=Ie;break}switch(E){case"center":zt-=fe/2;break;case"right":zt-=fe;break;case"inner":y===v-1?zt-=fe:y>0&&(zt-=fe/2);break}ce={left:zt,top:Ve,width:fe+Wt.width,height:Ie+Wt.height,color:ht.backdropColor}}m.push({label:w,font:O,textOffset:et,options:{rotation:g,color:Y,strokeColor:nt,strokeWidth:Et,textAlign:le,textBaseline:xt,translation:[S,A],backdrop:ce}})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Fe(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:i,padding:o}}=this.options,r=this._getLabelSizes(),a=t+o,l=r.widest.width;let c,h;return n==="left"?i?(h=this.right+o,s==="near"?c="left":s==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,s==="near"?c="right":s==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?i?(h=this.left+o,s==="near"?c="right":s==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,s==="near"?c="left":s==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:i,width:o,height:r}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,i,o,r),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(o=>o.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const a=(l,c,h)=>{!h.width||!h.color||(s.save(),s.lineWidth=h.width,s.strokeStyle=h.color,s.setLineDash(h.borderDash||[]),s.lineDashOffset=h.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(o=0,r=i.length;o<r;++o){const l=i[o];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:i}}=this,o=s.setContext(this.getContext()),r=s.display?o.width:0;if(!r)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,u,d;this.isHorizontal()?(c=ns(t,this.left,r)-r/2,h=ns(t,this.right,a)+a/2,u=d=l):(u=ns(t,this.top,r)-r/2,d=ns(t,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=o.width,n.strokeStyle=o.color,n.beginPath(),n.moveTo(c,u),n.lineTo(h,d),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&ua(s,i);const o=this.getLabelItems(t);for(const r of o){const a=r.options,l=r.font,c=r.label,h=r.textOffset;vs(s,c,0,h,l,a)}i&&da(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const o=qt(s.font),r=ae(s.padding),a=s.align;let l=o.lineHeight/2;n==="bottom"||n==="center"||ct(n)?(l+=r.bottom,Nt(s.text)&&(l+=o.lineHeight*(s.text.length-1))):l+=r.top;const{titleX:c,titleY:h,maxWidth:u,rotation:d}=DI(this,l,n,a);vs(t,s.text,0,0,o,{color:s.color,maxWidth:u,rotation:d,textAlign:RI(a,n,i),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=J(t.grid&&t.grid.z,-1),i=J(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Ss.prototype.draw?[{z:n,draw:o=>{this.draw(o)}}]:[{z:s,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let o,r;for(o=0,r=n.length;o<r;++o){const a=n[o];a[s]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return qt(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class jo{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;LI(n)&&(s=this.register(n));const i=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in i||(i[o]=t,OI(t,r,s),this.override&&Lt.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,i=this.scope;s in n&&delete n[s],i&&s in Lt[i]&&(delete Lt[i][s],this.override&&delete bs[s])}}function OI(e,t,n){const s=co(Object.create(null),[n?Lt.get(n):{},Lt.get(t),e.defaults]);Lt.set(t,s),e.defaultRoutes&&NI(t,e.defaultRoutes),e.descriptors&&Lt.describe(t,e.descriptors)}function NI(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),i=s.pop(),o=[e].concat(s).join("."),r=t[n].split("."),a=r.pop(),l=r.join(".");Lt.route(o,i,l,a)})}function LI(e){return"id"in e&&"defaults"in e}class FI{constructor(){this.controllers=new jo(Jn,"datasets",!0),this.elements=new jo(Mn,"elements"),this.plugins=new jo(Object,"plugins"),this.scales=new jo(Ss,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(i=>{const o=s||this._getRegistryForType(i);s||o.isForType(i)||o===this.plugins&&i.id?this._exec(t,o,i):vt(i,r=>{const a=s||this._getRegistryForType(r);this._exec(t,a,r)})})}_exec(t,n,s){const i=Gc(t);It(s["before"+i],[],s),n[t](s),It(s["after"+i],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var Ge=new FI;class BI{constructor(){this._init=[]}notify(t,n,s,i){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=i?this._descriptors(t).filter(i):this._descriptors(t),r=this._notify(o,t,n,s);return n==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,n,s,i){i=i||{};for(const o of t){const r=o.plugin,a=r[s],l=[n,i,o.options];if(It(a,l,r)===!1&&i.cancelable)return!1}return!0}invalidate(){at(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,i=J(s.options&&s.options.plugins,{}),o=WI(s);return i===!1&&!n?[]:zI(t,o,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,i=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,s),t,"stop"),this._notify(i(s,n),t,"start")}}function WI(e){const t={},n=[],s=Object.keys(Ge.plugins.items);for(let o=0;o<s.length;o++)n.push(Ge.getPlugin(s[o]));const i=e.plugins||[];for(let o=0;o<i.length;o++){const r=i[o];n.indexOf(r)===-1&&(n.push(r),t[r.id]=!0)}return{plugins:n,localIds:t}}function HI(e,t){return!t&&e===!1?null:e===!0?{}:e}function zI(e,{plugins:t,localIds:n},s,i){const o=[],r=e.getContext();for(const a of t){const l=a.id,c=HI(s[l],i);c!==null&&o.push({plugin:a,options:VI(e.config,{plugin:a,local:n[l]},c,r)})}return o}function VI(e,{plugin:t,local:n},s,i){const o=e.pluginScopeKeys(t),r=e.getOptionScopes(s,o);return n&&t.defaults&&r.push(t.defaults),e.createResolver(r,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Hl(e,t){const n=Lt.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function $I(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function jI(e,t){return e===t?"_index_":"_value_"}function Vd(e){if(e==="x"||e==="y"||e==="r")return e}function UI(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function zl(e,...t){if(Vd(e))return e;for(const n of t){const s=n.axis||UI(n.position)||e.length>1&&Vd(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function $d(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function YI(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return $d(e,"x",n[0])||$d(e,"y",n[0])}return{}}function qI(e,t){const n=bs[e.type]||{scales:{}},s=t.scales||{},i=Hl(e.type,t),o=Object.create(null);return Object.keys(s).forEach(r=>{const a=s[r];if(!ct(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=zl(r,a,YI(r,e),Lt.scales[a.type]),c=jI(l,i),h=n.scales||{};o[r]=Bi(Object.create(null),[{axis:l},a,h[l],h[c]])}),e.data.datasets.forEach(r=>{const a=r.type||e.type,l=r.indexAxis||Hl(a,t),h=(bs[a]||{}).scales||{};Object.keys(h).forEach(u=>{const d=$I(u,l),f=r[d+"AxisID"]||d;o[f]=o[f]||Object.create(null),Bi(o[f],[{axis:d},s[f],h[u]])})}),Object.keys(o).forEach(r=>{const a=o[r];Bi(a,[Lt.scales[a.type],Lt.scale])}),o}function h_(e){const t=e.options||(e.options={});t.plugins=J(t.plugins,{}),t.scales=qI(e,t)}function u_(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function KI(e){return e=e||{},e.data=u_(e.data),h_(e),e}const jd=new Map,d_=new Set;function Uo(e,t){let n=jd.get(e);return n||(n=t(),jd.set(e,n),d_.add(n)),n}const _i=(e,t,n)=>{const s=Gn(t,n);s!==void 0&&e.add(s)};class GI{constructor(t){this._config=KI(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=u_(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),h_(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Uo(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Uo(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Uo(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return Uo(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let i=s.get(t);return(!i||n)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,n,s){const{options:i,type:o}=this,r=this._cachedScopes(t,s),a=r.get(n);if(a)return a;const l=new Set;n.forEach(h=>{t&&(l.add(t),h.forEach(u=>_i(l,t,u))),h.forEach(u=>_i(l,i,u)),h.forEach(u=>_i(l,bs[o]||{},u)),h.forEach(u=>_i(l,Lt,u)),h.forEach(u=>_i(l,Bl,u))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),d_.has(n)&&r.set(n,c),c}chartOptionScopes(){const{options:t,type:n}=this;return[t,bs[n]||{},Lt.datasets[n]||{},{type:n},Lt,Bl]}resolveNamedOptions(t,n,s,i=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=Ud(this._resolverCache,t,i);let l=r;if(QI(r,n)){o.$shared=!1,s=Xn(s)?s():s;const c=this.createResolver(t,s,a);l=Zs(r,s,c)}for(const c of n)o[c]=l[c];return o}createResolver(t,n,s=[""],i){const{resolver:o}=Ud(this._resolverCache,t,s);return ct(n)?Zs(o,n,void 0,i):o}}function Ud(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const i=n.join();let o=s.get(i);return o||(o={resolver:eh(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,o)),o}const XI=e=>ct(e)&&Object.getOwnPropertyNames(e).some(t=>Xn(e[t]));function QI(e,t){const{isScriptable:n,isIndexable:s}=$m(e);for(const i of t){const o=n(i),r=s(i),a=(r||o)&&e[i];if(o&&(Xn(a)||XI(a))||r&&Nt(a))return!0}return!1}var JI="4.5.0";const ZI=["top","bottom","left","right","chartArea"];function Yd(e,t){return e==="top"||e==="bottom"||ZI.indexOf(e)===-1&&t==="x"}function qd(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function Kd(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),It(n&&n.onComplete,[e],t)}function tM(e){const t=e.chart,n=t.options.animation;It(n&&n.onProgress,[e],t)}function f_(e){return ih()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const er={},Gd=e=>{const t=f_(e);return Object.values(er).filter(n=>n.canvas===t).pop()};function eM(e,t,n){const s=Object.keys(e);for(const i of s){const o=+i;if(o>=t){const r=e[i];delete e[i],(n>0||o>t)&&(e[o+n]=r)}}}function nM(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}class Vl{static defaults=Lt;static instances=er;static overrides=bs;static registry=Ge;static version=JI;static getChart=Gd;static register(...t){Ge.add(...t),Xd()}static unregister(...t){Ge.remove(...t),Xd()}constructor(t,n){const s=this.config=new GI(n),i=f_(t),o=Gd(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||vI(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=QE(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new BI,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=pk(u=>this.update(u),r.resizeDelay||0),this._dataChanges=[],er[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}cn.listen(this,"complete",Kd),cn.listen(this,"progress",tM),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:i,_aspectRatio:o}=this;return at(t)?n&&o?o:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ge}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():yd(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return gd(this.canvas,this.ctx),this}stop(){return cn.stop(this),this}resize(t,n){cn.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,i=this.canvas,o=s.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(i,t,n,o),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,yd(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),It(s.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};vt(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,i=Object.keys(s).reduce((r,a)=>(r[a]=!1,r),{});let o=[];n&&(o=o.concat(Object.keys(n).map(r=>{const a=n[r],l=zl(r,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),vt(o,r=>{const a=r.options,l=a.id,c=zl(l,a),h=J(a.type,r.dtype);(a.position===void 0||Yd(a.position,c)!==Yd(r.dposition))&&(a.position=r.dposition),i[l]=!0;let u=null;if(l in s&&s[l].type===h)u=s[l];else{const d=Ge.getScale(h);u=new d({id:l,type:h,ctx:this.ctx,chart:this}),s[u.id]=u}u.init(a,t)}),vt(i,(r,a)=>{r||delete s[a]}),vt(s,r=>{ie.configure(this,r,r.options),ie.addBox(this,r)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((i,o)=>i.index-o.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(qd("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,i)=>{n.filter(o=>o===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const o=n[s];let r=this.getDatasetMeta(s);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(s),r=this.getDatasetMeta(s)),r.type=a,r.indexAxis=o.indexAxis||Hl(a,this.options),r.order=o.order||0,r.index=s,r.label=""+o.label,r.visible=this.isDatasetVisible(s),r.controller)r.controller.updateIndex(s),r.controller.linkScales();else{const l=Ge.getController(a),{datasetElementType:c,dataElementType:h}=Lt.datasets[a];Object.assign(l,{dataElementType:Ge.getElement(h),datasetElementType:c&&Ge.getElement(c)}),r.controller=new l(this,s),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){vt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:u}=this.getDatasetMeta(c),d=!i&&o.indexOf(u)===-1;u.buildOrUpdateElements(d),r=Math.max(+u.getMaxOverflow(),r)}r=this._minPadding=s.layout.autoPadding?r:0,this._updateLayout(r),i||vt(o,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(qd("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){vt(this.scales,t=>{ie.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!rd(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:o}of n){const r=s==="_removeElements"?-o:o;eM(t,i,r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=o=>new Set(t.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),i=s(0);for(let o=1;o<n;o++)if(!rd(i,s(o)))return;return Array.from(i).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ie.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],vt(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,o)=>{i._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Xn(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(cn.has(this)?this.attached&&!cn.running(this)&&cn.start(this):(this.draw(),Kd({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let i,o;for(i=0,o=n.length;i<o;++i){const r=n[i];(!t||r.visible)&&s.push(r)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},i=t_(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&ua(n,i),t.controller.draw(),i&&da(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return bn(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,i){const o=ZT.modes[n];return typeof o=="function"?o(this,t,s,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let i=s.filter(o=>o&&o._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=Qn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const i=s?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,i);ho(n)?(o.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),r.update(o,{visible:s}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),cn.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),gd(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete er[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(o,r)=>{n.addEventListener(this,o,r),t[o]=r},i=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};vt(this.options.events,o=>s(o,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(n.removeEventListener(this,l,c),delete t[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let r;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",o),s("detach",r)};r=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():r()}unbindEvents(){vt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},vt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const i=s?"set":"remove";let o,r,a,l;for(n==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){r=t[a];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[i+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!Tr(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const i=this.options.hover,o=(l,c)=>l.filter(h=>!c.some(u=>h.datasetIndex===u.datasetIndex&&h.index===u.index)),r=o(n,t),a=s?t:o(t,n);r.length&&this.updateHoverStyle(r,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=r=>(r.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const o=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(o||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:i=[],options:o}=this,r=n,a=this._getActiveElements(t,i,s,r),l=sk(t),c=nM(t,this._lastEvent,s,l);s&&(this._lastEvent=null,It(o.onHover,[t,a,this],this),l&&It(o.onClick,[t,a,this],this));const h=!Tr(a,i);return(h||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,h}_getActiveElements(t,n,s,i){if(t.type==="mouseout")return[];if(!s)return n;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,i)}}function Xd(){return vt(Vl.instances,e=>e._plugins.invalidate())}function sM(e,t,n){const{startAngle:s,x:i,y:o,outerRadius:r,innerRadius:a,options:l}=t,{borderWidth:c,borderJoinStyle:h}=l,u=Math.min(c/r,te(s-n));if(e.beginPath(),e.arc(i,o,r-c/2,s+u/2,n-u/2),a>0){const d=Math.min(c/a,te(s-n));e.arc(i,o,a+c/2,n-d/2,s+d/2,!0)}else{const d=Math.min(c/2,r*te(s-n));if(h==="round")e.arc(i,o,d,n-ft/2,s+ft/2,!0);else if(h==="bevel"){const f=2*d*d,p=-f*Math.cos(n+ft/2)+i,g=-f*Math.sin(n+ft/2)+o,m=f*Math.cos(s+ft/2)+i,y=f*Math.sin(s+ft/2)+o;e.lineTo(p,g),e.lineTo(m,y)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function iM(e,t,n){const{startAngle:s,pixelMargin:i,x:o,y:r,outerRadius:a,innerRadius:l}=t;let c=i/a;e.beginPath(),e.arc(o,r,a,s-c,n+c),l>i?(c=i/l,e.arc(o,r,l,n+c,s-c,!0)):e.arc(o,r,i,n+Ht,s-Ht),e.closePath(),e.clip()}function oM(e){return th(e,["outerStart","outerEnd","innerStart","innerEnd"])}function rM(e,t,n,s){const i=oM(e.options.borderRadius),o=(n-t)/2,r=Math.min(o,s*t/2),a=l=>{const c=(n-Math.min(o,l))*s/2;return Qt(l,0,Math.min(o,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Qt(i.innerStart,0,r),innerEnd:Qt(i.innerEnd,0,r)}}function Is(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function Dr(e,t,n,s,i,o){const{x:r,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=t,u=Math.max(t.outerRadius+s+n-c,0),d=h>0?h+s+n+c:0;let f=0;const p=i-l;if(s){const ht=h>0?h-s:0,Z=u>0?u-s:0,Y=(ht+Z)/2,nt=Y!==0?p*Y/(Y+s):p;f=(p-nt)/2}const g=Math.max(.001,p*u-n/ft)/u,m=(p-g)/2,y=l+m+f,v=i-m-f,{outerStart:C,outerEnd:w,innerStart:S,innerEnd:A}=rM(t,d,u,v-y),E=u-C,k=u-w,O=y+C/E,$=v-w/k,G=d+S,et=d+A,xt=y+S/G,jt=v-A/et;if(e.beginPath(),o){const ht=(O+$)/2;if(e.arc(r,a,u,O,ht),e.arc(r,a,u,ht,$),w>0){const Et=Is(k,$,r,a);e.arc(Et.x,Et.y,w,$,v+Ht)}const Z=Is(et,v,r,a);if(e.lineTo(Z.x,Z.y),A>0){const Et=Is(et,jt,r,a);e.arc(Et.x,Et.y,A,v+Ht,jt+Math.PI)}const Y=(v-A/d+(y+S/d))/2;if(e.arc(r,a,d,v-A/d,Y,!0),e.arc(r,a,d,Y,y+S/d,!0),S>0){const Et=Is(G,xt,r,a);e.arc(Et.x,Et.y,S,xt+Math.PI,y-Ht)}const nt=Is(E,y,r,a);if(e.lineTo(nt.x,nt.y),C>0){const Et=Is(E,O,r,a);e.arc(Et.x,Et.y,C,y-Ht,O)}}else{e.moveTo(r,a);const ht=Math.cos(O)*u+r,Z=Math.sin(O)*u+a;e.lineTo(ht,Z);const Y=Math.cos($)*u+r,nt=Math.sin($)*u+a;e.lineTo(Y,nt)}e.closePath()}function aM(e,t,n,s,i){const{fullCircles:o,startAngle:r,circumference:a}=t;let l=t.endAngle;if(o){Dr(e,t,n,s,l,i);for(let c=0;c<o;++c)e.fill();isNaN(a)||(l=r+(a%Ot||Ot))}return Dr(e,t,n,s,l,i),e.fill(),l}function lM(e,t,n,s,i){const{fullCircles:o,startAngle:r,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:h,borderDash:u,borderDashOffset:d,borderRadius:f}=l,p=l.borderAlign==="inner";if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=d,p?(e.lineWidth=c*2,e.lineJoin=h||"round"):(e.lineWidth=c,e.lineJoin=h||"bevel");let g=t.endAngle;if(o){Dr(e,t,n,s,g,i);for(let m=0;m<o;++m)e.stroke();isNaN(a)||(g=r+(a%Ot||Ot))}p&&iM(e,t,g),l.selfJoin&&g-r>=ft&&f===0&&h!=="miter"&&sM(e,t,g),o||(Dr(e,t,n,s,g,i),e.stroke())}class cM extends Mn{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,s){const i=this.getProps(["x","y"],s),{angle:o,distance:r}=Dm(i,{x:t,y:n}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:h,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),d=(this.options.spacing+this.options.borderWidth)/2,f=J(u,l-a),p=uo(o,a,l)&&a!==l,g=f>=Ot||p,m=_n(r,c+d,h+d);return g&&m}getCenterPoint(t){const{x:n,y:s,startAngle:i,endAngle:o,innerRadius:r,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,h=(i+o)/2,u=(r+a+c+l)/2;return{x:n+Math.cos(h)*u,y:s+Math.sin(h)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:s}=this,i=(n.offset||0)/4,o=(n.spacing||0)/2,r=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>Ot?Math.floor(s/Ot):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*i,Math.sin(a)*i);const l=1-Math.sin(Math.min(ft,s||0)),c=i*l;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,aM(t,this,c,o,r),lM(t,this,c,o,r),t.restore()}}function p_(e,t,n=t){e.lineCap=J(n.borderCapStyle,t.borderCapStyle),e.setLineDash(J(n.borderDash,t.borderDash)),e.lineDashOffset=J(n.borderDashOffset,t.borderDashOffset),e.lineJoin=J(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=J(n.borderWidth,t.borderWidth),e.strokeStyle=J(n.borderColor,t.borderColor)}function hM(e,t,n){e.lineTo(n.x,n.y)}function uM(e){return e.stepped?kk:e.tension||e.cubicInterpolationMode==="monotone"?Tk:hM}function g_(e,t,n={}){const s=e.length,{start:i=0,end:o=s-1}=n,{start:r,end:a}=t,l=Math.max(i,r),c=Math.min(o,a),h=i<r&&o<r||i>a&&o>a;return{count:s,start:l,loop:t.loop,ilen:c<l&&!h?s+c-l:c-l}}function dM(e,t,n,s){const{points:i,options:o}=t,{count:r,start:a,loop:l,ilen:c}=g_(i,n,s),h=uM(o);let{move:u=!0,reverse:d}=s||{},f,p,g;for(f=0;f<=c;++f)p=i[(a+(d?c-f:f))%r],!p.skip&&(u?(e.moveTo(p.x,p.y),u=!1):h(e,g,p,d,o.stepped),g=p);return l&&(p=i[(a+(d?c:0))%r],h(e,g,p,d,o.stepped)),!!l}function fM(e,t,n,s){const i=t.points,{count:o,start:r,ilen:a}=g_(i,n,s),{move:l=!0,reverse:c}=s||{};let h=0,u=0,d,f,p,g,m,y;const v=w=>(r+(c?a-w:w))%o,C=()=>{g!==m&&(e.lineTo(h,m),e.lineTo(h,g),e.lineTo(h,y))};for(l&&(f=i[v(0)],e.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=i[v(d)],f.skip)continue;const w=f.x,S=f.y,A=w|0;A===p?(S<g?g=S:S>m&&(m=S),h=(u*h+w)/++u):(C(),e.lineTo(w,S),p=A,u=0,g=m=S),y=S}C()}function $l(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?fM:dM}function pM(e){return e.stepped?oT:e.tension||e.cubicInterpolationMode==="monotone"?rT:cs}function gM(e,t,n,s){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,s)&&i.closePath()),p_(e,t.options),e.stroke(i)}function mM(e,t,n,s){const{segments:i,options:o}=t,r=$l(t);for(const a of i)p_(e,o,a.style),e.beginPath(),r(e,t,a,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const _M=typeof Path2D=="function";function yM(e,t,n,s){_M&&!t.options.segment?gM(e,t,n,s):mM(e,t,n,s)}class ga extends Mn{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;Qk(this._points,s,t,i,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=dT(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,i=t[n],o=this.points,r=Zm(this,{property:n,start:i,end:i});if(!r.length)return;const a=[],l=pM(s);let c,h;for(c=0,h=r.length;c<h;++c){const{start:u,end:d}=r[c],f=o[u],p=o[d];if(f===p){a.push(f);continue}const g=Math.abs((i-f[n])/(p[n]-f[n])),m=l(f,p,g,s.stepped);m[n]=t[n],a.push(m)}return a.length===1?a[0]:a}pathSegment(t,n,s){return $l(this)(t,this,n,s)}path(t,n,s){const i=this.segments,o=$l(this);let r=this._loop;n=n||0,s=s||this.points.length-n;for(const a of i)r&=o(t,this,a,{start:n,end:n+s-1});return!!r}draw(t,n,s,i){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),yM(t,this,s,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Qd(e,t,n,s){const i=e.options,{[n]:o}=e.getProps([n],s);return Math.abs(t-o)<i.radius+i.hitRadius}class bM extends Mn{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,s){const i=this.options,{x:o,y:r}=this.getProps(["x","y"],s);return Math.pow(t-o,2)+Math.pow(n-r,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,n){return Qd(this,t,"x",n)}inYRange(t,n){return Qd(this,t,"y",n)}getCenterPoint(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const s=n&&t.borderWidth||0;return(n+s)*2}draw(t,n){const s=this.options;this.skip||s.radius<.1||!bn(this,n,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,Wl(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function m_(e,t){const{x:n,y:s,base:i,width:o,height:r}=e.getProps(["x","y","base","width","height"],t);let a,l,c,h,u;return e.horizontal?(u=r/2,a=Math.min(n,i),l=Math.max(n,i),c=s-u,h=s+u):(u=o/2,a=n-u,l=n+u,c=Math.min(s,i),h=Math.max(s,i)),{left:a,top:c,right:l,bottom:h}}function Fn(e,t,n,s){return e?0:Qt(t,n,s)}function vM(e,t,n){const s=e.options.borderWidth,i=e.borderSkipped,o=Vm(s);return{t:Fn(i.top,o.top,0,n),r:Fn(i.right,o.right,0,t),b:Fn(i.bottom,o.bottom,0,n),l:Fn(i.left,o.left,0,t)}}function xM(e,t,n){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,o=fs(i),r=Math.min(t,n),a=e.borderSkipped,l=s||ct(i);return{topLeft:Fn(!l||a.top||a.left,o.topLeft,0,r),topRight:Fn(!l||a.top||a.right,o.topRight,0,r),bottomLeft:Fn(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:Fn(!l||a.bottom||a.right,o.bottomRight,0,r)}}function wM(e){const t=m_(e),n=t.right-t.left,s=t.bottom-t.top,i=vM(e,n/2,s/2),o=xM(e,n/2,s/2);return{outer:{x:t.left,y:t.top,w:n,h:s,radius:o},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function tl(e,t,n,s){const i=t===null,o=n===null,a=e&&!(i&&o)&&m_(e,s);return a&&(i||_n(t,a.left,a.right))&&(o||_n(n,a.top,a.bottom))}function CM(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function SM(e,t){e.rect(t.x,t.y,t.w,t.h)}function el(e,t,n={}){const s=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,o=(e.x+e.w!==n.x+n.w?t:0)-s,r=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+s,y:e.y+i,w:e.w+o,h:e.h+r,radius:e.radius}}class EM extends Mn{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:s,backgroundColor:i}}=this,{inner:o,outer:r}=wM(this),a=CM(r.radius)?fo:SM;t.save(),(r.w!==o.w||r.h!==o.h)&&(t.beginPath(),a(t,el(r,n,o)),t.clip(),a(t,el(o,-n,r)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),a(t,el(o,n)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,n,s){return tl(this,t,n,s)}inXRange(t,n){return tl(this,t,null,n)}inYRange(t,n){return tl(this,null,t,n)}getCenterPoint(t){const{x:n,y:s,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(n+i)/2:n,y:o?s:(s+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}var kM=Object.freeze({__proto__:null,ArcElement:cM,BarElement:EM,LineElement:ga,PointElement:bM});const jl=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Jd=jl.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function __(e){return jl[e%jl.length]}function y_(e){return Jd[e%Jd.length]}function TM(e,t){return e.borderColor=__(t),e.backgroundColor=y_(t),++t}function IM(e,t){return e.backgroundColor=e.data.map(()=>__(t++)),t}function MM(e,t){return e.backgroundColor=e.data.map(()=>y_(t++)),t}function PM(e){let t=0;return(n,s)=>{const i=e.getDatasetMeta(s).controller;i instanceof rh?t=IM(n,t):i instanceof i_?t=MM(n,t):i&&(t=TM(n,t))}}function Zd(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function AM(e){return e&&(e.borderColor||e.backgroundColor)}function RM(){return Lt.borderColor!=="rgba(0,0,0,0.1)"||Lt.backgroundColor!=="rgba(0,0,0,0.1)"}var DM={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:s},options:i}=e.config,{elements:o}=i,r=Zd(s)||AM(i)||o&&Zd(o)||RM();if(!n.forceOverride&&r)return;const a=PM(e);s.forEach(a)}};function OM(e,t,n,s,i){const o=i.samples||s;if(o>=n)return e.slice(t,t+n);const r=[],a=(n-2)/(o-2);let l=0;const c=t+n-1;let h=t,u,d,f,p,g;for(r[l++]=e[h],u=0;u<o-2;u++){let m=0,y=0,v;const C=Math.floor((u+1)*a)+1+t,w=Math.min(Math.floor((u+2)*a)+1,n)+t,S=w-C;for(v=C;v<w;v++)m+=e[v].x,y+=e[v].y;m/=S,y/=S;const A=Math.floor(u*a)+1+t,E=Math.min(Math.floor((u+1)*a)+1,n)+t,{x:k,y:O}=e[h];for(f=p=-1,v=A;v<E;v++)p=.5*Math.abs((k-m)*(e[v].y-O)-(k-e[v].x)*(y-O)),p>f&&(f=p,d=e[v],g=v);r[l++]=d,h=g}return r[l++]=e[c],r}function NM(e,t,n,s){let i=0,o=0,r,a,l,c,h,u,d,f,p,g;const m=[],y=t+n-1,v=e[t].x,w=e[y].x-v;for(r=t;r<t+n;++r){a=e[r],l=(a.x-v)/w*s,c=a.y;const S=l|0;if(S===h)c<p?(p=c,u=r):c>g&&(g=c,d=r),i=(o*i+a.x)/++o;else{const A=r-1;if(!at(u)&&!at(d)){const E=Math.min(u,d),k=Math.max(u,d);E!==f&&E!==A&&m.push({...e[E],x:i}),k!==f&&k!==A&&m.push({...e[k],x:i})}r>0&&A!==f&&m.push(e[A]),m.push(a),h=S,o=0,p=g=c,u=d=f=r}}return m}function b_(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function tf(e){e.data.datasets.forEach(t=>{b_(t)})}function LM(e,t){const n=t.length;let s=0,i;const{iScale:o}=e,{min:r,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(s=Qt(yn(t,o.axis,r).lo,0,n-1)),c?i=Qt(yn(t,o.axis,a).hi+1,s,n)-s:i=n-s,{start:s,count:i}}var FM={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled){tf(e);return}const s=e.width;e.data.datasets.forEach((i,o)=>{const{_data:r,indexAxis:a}=i,l=e.getDatasetMeta(o),c=r||i.data;if(vi([a,e.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=e.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||e.options.parsing)return;let{start:u,count:d}=LM(l,c);const f=n.threshold||4*s;if(d<=f){b_(i);return}at(r)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(n.algorithm){case"lttb":p=OM(c,u,d,s,n);break;case"min-max":p=NM(c,u,d,s);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=p})},destroy(e){tf(e)}};function BM(e,t,n){const s=e.segments,i=e.points,o=t.points,r=[];for(const a of s){let{start:l,end:c}=a;c=ma(l,c,i);const h=Ul(n,i[l],i[c],a.loop);if(!t.segments){r.push({source:a,target:h,start:i[l],end:i[c]});continue}const u=Zm(t,h);for(const d of u){const f=Ul(n,o[d.start],o[d.end],d.loop),p=Jm(a,i,f);for(const g of p)r.push({source:g,target:d,start:{[n]:ef(h,f,"start",Math.max)},end:{[n]:ef(h,f,"end",Math.min)}})}}return r}function Ul(e,t,n,s){if(s)return;let i=t[e],o=n[e];return e==="angle"&&(i=te(i),o=te(o)),{property:e,start:i,end:o}}function WM(e,t){const{x:n=null,y:s=null}=e||{},i=t.points,o=[];return t.segments.forEach(({start:r,end:a})=>{a=ma(r,a,i);const l=i[r],c=i[a];s!==null?(o.push({x:l.x,y:s}),o.push({x:c.x,y:s})):n!==null&&(o.push({x:n,y:l.y}),o.push({x:n,y:c.y}))}),o}function ma(e,t,n){for(;t>e;t--){const s=n[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function ef(e,t,n,s){return e&&t?s(e[n],t[n]):e?e[n]:t?t[n]:0}function v_(e,t){let n=[],s=!1;return Nt(e)?(s=!0,n=e):n=WM(e,t),n.length?new ga({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function nf(e){return e&&e.fill!==!1}function HM(e,t,n){let i=e[t].fill;const o=[t];let r;if(!n)return i;for(;i!==!1&&o.indexOf(i)===-1;){if(!Bt(i))return i;if(r=e[i],!r)return!1;if(r.visible)return i;o.push(i),i=r.fill}return!1}function zM(e,t,n){const s=UM(e);if(ct(s))return isNaN(s.value)?!1:s;let i=parseFloat(s);return Bt(i)&&Math.floor(i)===i?VM(s[0],t,i,n):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function VM(e,t,n,s){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=s?!1:n}function $M(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:ct(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function jM(e,t,n){let s;return e==="start"?s=n:e==="end"?s=t.options.reverse?t.min:t.max:ct(e)?s=e.value:s=t.getBaseValue(),s}function UM(e){const t=e.options,n=t.fill;let s=J(n&&n.target,n);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function YM(e){const{scale:t,index:n,line:s}=e,i=[],o=s.segments,r=s.points,a=qM(t,n);a.push(v_({x:null,y:t.bottom},s));for(let l=0;l<o.length;l++){const c=o[l];for(let h=c.start;h<=c.end;h++)KM(i,r[h],a)}return new ga({points:i,options:{}})}function qM(e,t){const n=[],s=e.getMatchingVisibleMetas("line");for(let i=0;i<s.length;i++){const o=s[i];if(o.index===t)break;o.hidden||n.unshift(o.dataset)}return n}function KM(e,t,n){const s=[];for(let i=0;i<n.length;i++){const o=n[i],{first:r,last:a,point:l}=GM(o,t,"x");if(!(!l||r&&a)){if(r)s.unshift(l);else if(e.push(l),!a)break}}e.push(...s)}function GM(e,t,n){const s=e.interpolate(t,n);if(!s)return{};const i=s[n],o=e.segments,r=e.points;let a=!1,l=!1;for(let c=0;c<o.length;c++){const h=o[c],u=r[h.start][n],d=r[h.end][n];if(_n(i,u,d)){a=i===u,l=i===d;break}}return{first:a,last:l,point:s}}class x_{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,s){const{x:i,y:o,radius:r}=this;return n=n||{start:0,end:Ot},t.arc(i,o,r,n.end,n.start,!0),!s.bounds}interpolate(t){const{x:n,y:s,radius:i}=this,o=t.angle;return{x:n+Math.cos(o)*i,y:s+Math.sin(o)*i,angle:o}}}function XM(e){const{chart:t,fill:n,line:s}=e;if(Bt(n))return QM(t,n);if(n==="stack")return YM(e);if(n==="shape")return!0;const i=JM(e);return i instanceof x_?i:v_(i,s)}function QM(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function JM(e){return(e.scale||{}).getPointPositionForValue?tP(e):ZM(e)}function ZM(e){const{scale:t={},fill:n}=e,s=$M(n,t);if(Bt(s)){const i=t.isHorizontal();return{x:i?s:null,y:i?null:s}}return null}function tP(e){const{scale:t,fill:n}=e,s=t.options,i=t.getLabels().length,o=s.reverse?t.max:t.min,r=jM(n,t,o),a=[];if(s.grid.circular){const l=t.getPointPositionForValue(0,o);return new x_({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(r)})}for(let l=0;l<i;++l)a.push(t.getPointPositionForValue(l,r));return a}function nl(e,t,n){const s=XM(t),{chart:i,index:o,line:r,scale:a,axis:l}=t,c=r.options,h=c.fill,u=c.backgroundColor,{above:d=u,below:f=u}=h||{},p=i.getDatasetMeta(o),g=t_(i,p);s&&r.points.length&&(ua(e,n),eP(e,{line:r,target:s,above:d,below:f,area:n,scale:a,axis:l,clip:g}),da(e))}function eP(e,t){const{line:n,target:s,above:i,below:o,area:r,scale:a,clip:l}=t,c=n._loop?"angle":t.axis;e.save();let h=o;o!==i&&(c==="x"?(sf(e,s,r.top),sl(e,{line:n,target:s,color:i,scale:a,property:c,clip:l}),e.restore(),e.save(),sf(e,s,r.bottom)):c==="y"&&(of(e,s,r.left),sl(e,{line:n,target:s,color:o,scale:a,property:c,clip:l}),e.restore(),e.save(),of(e,s,r.right),h=i)),sl(e,{line:n,target:s,color:h,scale:a,property:c,clip:l}),e.restore()}function sf(e,t,n){const{segments:s,points:i}=t;let o=!0,r=!1;e.beginPath();for(const a of s){const{start:l,end:c}=a,h=i[l],u=i[ma(l,c,i)];o?(e.moveTo(h.x,h.y),o=!1):(e.lineTo(h.x,n),e.lineTo(h.x,h.y)),r=!!t.pathSegment(e,a,{move:r}),r?e.closePath():e.lineTo(u.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function of(e,t,n){const{segments:s,points:i}=t;let o=!0,r=!1;e.beginPath();for(const a of s){const{start:l,end:c}=a,h=i[l],u=i[ma(l,c,i)];o?(e.moveTo(h.x,h.y),o=!1):(e.lineTo(n,h.y),e.lineTo(h.x,h.y)),r=!!t.pathSegment(e,a,{move:r}),r?e.closePath():e.lineTo(n,u.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function sl(e,t){const{line:n,target:s,property:i,color:o,scale:r,clip:a}=t,l=BM(n,s,i);for(const{source:c,target:h,start:u,end:d}of l){const{style:{backgroundColor:f=o}={}}=c,p=s!==!0;e.save(),e.fillStyle=f,nP(e,r,a,p&&Ul(i,u,d)),e.beginPath();const g=!!n.pathSegment(e,c);let m;if(p){g?e.closePath():rf(e,s,d,i);const y=!!s.pathSegment(e,h,{move:g,reverse:!0});m=g&&y,m||rf(e,s,u,i)}e.closePath(),e.fill(m?"evenodd":"nonzero"),e.restore()}}function nP(e,t,n,s){const i=t.chart.chartArea,{property:o,start:r,end:a}=s||{};if(o==="x"||o==="y"){let l,c,h,u;o==="x"?(l=r,c=i.top,h=a,u=i.bottom):(l=i.left,c=r,h=i.right,u=a),e.beginPath(),n&&(l=Math.max(l,n.left),h=Math.min(h,n.right),c=Math.max(c,n.top),u=Math.min(u,n.bottom)),e.rect(l,c,h-l,u-c),e.clip()}}function rf(e,t,n,s){const i=t.interpolate(n,s);i&&e.lineTo(i.x,i.y)}var sP={id:"filler",afterDatasetsUpdate(e,t,n){const s=(e.data.datasets||[]).length,i=[];let o,r,a,l;for(r=0;r<s;++r)o=e.getDatasetMeta(r),a=o.dataset,l=null,a&&a.options&&a instanceof ga&&(l={visible:e.isDatasetVisible(r),index:r,fill:zM(a,r,s),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,i.push(l);for(r=0;r<s;++r)l=i[r],!(!l||l.fill===!1)&&(l.fill=HM(i,r,n.propagate))},beforeDraw(e,t,n){const s=n.drawTime==="beforeDraw",i=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let r=i.length-1;r>=0;--r){const a=i[r].$filler;a&&(a.line.updateControlPoints(o,a.axis),s&&a.fill&&nl(e.ctx,a,o))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=e.getSortedVisibleDatasetMetas();for(let i=s.length-1;i>=0;--i){const o=s[i].$filler;nf(o)&&nl(e.ctx,o,e.chartArea)}},beforeDatasetDraw(e,t,n){const s=t.meta.$filler;!nf(s)||n.drawTime!=="beforeDatasetDraw"||nl(e.ctx,s,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const af=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},iP=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class lf extends Mn{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=It(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=qt(s.font),o=i.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=af(s,o);let c,h;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(r,o,a,l)+10):(h=this.maxHeight,c=this._fitCols(r,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,i){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=i+a;let u=t;o.textAlign="left",o.textBaseline="middle";let d=-1,f=-h;return this.legendItems.forEach((p,g)=>{const m=s+n/2+o.measureText(p.text).width;(g===0||c[c.length-1]+m+2*a>r)&&(u+=h,c[c.length-(g>0?0:1)]=0,f+=h,d++),l[g]={left:0,top:f,row:d,width:m,height:i},c[c.length-1]+=m+a}),u}_fitCols(t,n,s,i){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=r-t;let u=a,d=0,f=0,p=0,g=0;return this.legendItems.forEach((m,y)=>{const{itemWidth:v,itemHeight:C}=oP(s,n,o,m,i);y>0&&f+C+2*a>h&&(u+=d+a,c.push({width:d,height:f}),p+=d+a,g++,d=f=0),l[y]={left:p,top:f,col:g,width:v,height:C},d=Math.max(d,v),f+=C+a}),u+=d,c.push({width:d,height:f}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:o}}=this,r=$s(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=Zt(s,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Zt(s,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+i}else{let a=0,l=Zt(s,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Zt(s,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;ua(t,this),this._draw(),da(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:i}=this,{align:o,labels:r}=t,a=Lt.color,l=$s(t.rtl,this.left,this.width),c=qt(r.font),{padding:h}=r,u=c.size,d=u/2;let f;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:p,boxHeight:g,itemHeight:m}=af(r,u),y=function(A,E,k){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;i.save();const O=J(k.lineWidth,1);if(i.fillStyle=J(k.fillStyle,a),i.lineCap=J(k.lineCap,"butt"),i.lineDashOffset=J(k.lineDashOffset,0),i.lineJoin=J(k.lineJoin,"miter"),i.lineWidth=O,i.strokeStyle=J(k.strokeStyle,a),i.setLineDash(J(k.lineDash,[])),r.usePointStyle){const $={radius:g*Math.SQRT2/2,pointStyle:k.pointStyle,rotation:k.rotation,borderWidth:O},G=l.xPlus(A,p/2),et=E+d;zm(i,$,G,et,r.pointStyleWidth&&p)}else{const $=E+Math.max((u-g)/2,0),G=l.leftForLtr(A,p),et=fs(k.borderRadius);i.beginPath(),Object.values(et).some(xt=>xt!==0)?fo(i,{x:G,y:$,w:p,h:g,radius:et}):i.rect(G,$,p,g),i.fill(),O!==0&&i.stroke()}i.restore()},v=function(A,E,k){vs(i,k.text,A,E+m/2,c,{strikethrough:k.hidden,textAlign:l.textAlign(k.textAlign)})},C=this.isHorizontal(),w=this._computeTitleHeight();C?f={x:Zt(o,this.left+h,this.right-s[0]),y:this.top+h+w,line:0}:f={x:this.left+h,y:Zt(o,this.top+w+h,this.bottom-n[0].height),line:0},Gm(this.ctx,t.textDirection);const S=m+h;this.legendItems.forEach((A,E)=>{i.strokeStyle=A.fontColor,i.fillStyle=A.fontColor;const k=i.measureText(A.text).width,O=l.textAlign(A.textAlign||(A.textAlign=r.textAlign)),$=p+d+k;let G=f.x,et=f.y;l.setWidth(this.width),C?E>0&&G+$+h>this.right&&(et=f.y+=S,f.line++,G=f.x=Zt(o,this.left+h,this.right-s[f.line])):E>0&&et+S>this.bottom&&(G=f.x=G+n[f.line].width+h,f.line++,et=f.y=Zt(o,this.top+w+h,this.bottom-n[f.line].height));const xt=l.x(G);if(y(xt,et,A),G=gk(O,G+p+d,C?G+$:this.right,t.rtl),v(l.x(G),et,A),C)f.x+=$+h;else if(typeof A.text!="string"){const jt=c.lineHeight;f.y+=w_(A,jt)+h}else f.y+=S}),Xm(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=qt(n.font),i=ae(n.padding);if(!n.display)return;const o=$s(t.rtl,this.left,this.width),r=this.ctx,a=n.position,l=s.size/2,c=i.top+l;let h,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),h=this.top+c,u=Zt(t.align,u,this.right-d);else{const p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);h=c+Zt(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const f=Zt(a,u,u+d);r.textAlign=o.textAlign(Jc(a)),r.textBaseline="middle",r.strokeStyle=n.color,r.fillStyle=n.color,r.font=s.string,vs(r,n.text,f,h,s)}_computeTitleHeight(){const t=this.options.title,n=qt(t.font),s=ae(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,i,o;if(_n(t,this.left,this.right)&&_n(n,this.top,this.bottom)){for(o=this.legendHitBoxes,s=0;s<o.length;++s)if(i=o[s],_n(t,i.left,i.left+i.width)&&_n(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!lP(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,o=iP(i,s);i&&!o&&It(n.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!o&&It(n.onHover,[t,s,this],this)}else s&&It(n.onClick,[t,s,this],this)}}function oP(e,t,n,s,i){const o=rP(s,e,t,n),r=aP(i,s,t.lineHeight);return{itemWidth:o,itemHeight:r}}function rP(e,t,n,s){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((o,r)=>o.length>r.length?o:r)),t+n.size/2+s.measureText(i).width}function aP(e,t,n){let s=e;return typeof t.text!="string"&&(s=w_(t,n)),s}function w_(e,t){const n=e.text?e.text.length:0;return t*n}function lP(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var cP={id:"legend",_element:lf,start(e,t,n){const s=e.legend=new lf({ctx:e.ctx,options:n,chart:e});ie.configure(e,s,n),ie.addBox(e,s)},stop(e){ie.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;ie.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:o,useBorderRadius:r,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=ae(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class lh extends Mn{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const i=Nt(s.text)?s.text.length:1;this._padding=ae(s.padding);const o=i*qt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:i,right:o,options:r}=this,a=r.align;let l=0,c,h,u;return this.isHorizontal()?(h=Zt(a,s,o),u=n+t,c=o-s):(r.position==="left"?(h=s+t,u=Zt(a,i,n),l=ft*-.5):(h=o-t,u=Zt(a,n,i),l=ft*.5),c=i-n),{titleX:h,titleY:u,maxWidth:c,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=qt(n.font),o=s.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);vs(t,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:Jc(n.align),textBaseline:"middle",translation:[r,a]})}}function hP(e,t){const n=new lh({ctx:e.ctx,options:t,chart:e});ie.configure(e,n,t),ie.addBox(e,n),e.titleBlock=n}var uP={id:"title",_element:lh,start(e,t,n){hP(e,n)},stop(e){const t=e.titleBlock;ie.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;ie.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Yo=new WeakMap;var dP={id:"subtitle",start(e,t,n){const s=new lh({ctx:e.ctx,options:n,chart:e});ie.configure(e,s,n),ie.addBox(e,s),Yo.set(e,s)},stop(e){ie.removeBox(e,Yo.get(e)),Yo.delete(e)},beforeUpdate(e,t,n){const s=Yo.get(e);ie.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const wi={average(e){if(!e.length)return!1;let t,n,s=new Set,i=0,o=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),i+=l.y,++o}}return o===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:i/o}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,i=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=e.length;o<r;++o){const l=e[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=Fl(t,c);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function qe(e,t){return t&&(Nt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function hn(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function fP(e,t){const{element:n,datasetIndex:s,index:i}=t,o=e.getDatasetMeta(s).controller,{label:r,value:a}=o.getLabelAndValue(i);return{chart:e,label:r,parsed:o.getParsed(i),raw:e.data.datasets[s].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function cf(e,t){const n=e.chart.ctx,{body:s,footer:i,title:o}=e,{boxWidth:r,boxHeight:a}=t,l=qt(t.bodyFont),c=qt(t.titleFont),h=qt(t.footerFont),u=o.length,d=i.length,f=s.length,p=ae(t.padding);let g=p.height,m=0,y=s.reduce((w,S)=>w+S.before.length+S.lines.length+S.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,u&&(g+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),y){const w=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*w+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*h.lineHeight+(d-1)*t.footerSpacing);let v=0;const C=function(w){m=Math.max(m,n.measureText(w).width+v)};return n.save(),n.font=c.string,vt(e.title,C),n.font=l.string,vt(e.beforeBody.concat(e.afterBody),C),v=t.displayColors?r+2+t.boxPadding:0,vt(s,w=>{vt(w.before,C),vt(w.lines,C),vt(w.after,C)}),v=0,n.font=h.string,vt(e.footer,C),n.restore(),m+=p.width,{width:m,height:g}}function pP(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function gP(e,t,n,s){const{x:i,width:o}=s,r=n.caretSize+n.caretPadding;if(e==="left"&&i+o+r>t.width||e==="right"&&i-o-r<0)return!0}function mP(e,t,n,s){const{x:i,width:o}=n,{width:r,chartArea:{left:a,right:l}}=e;let c="center";return s==="center"?c=i<=(a+l)/2?"left":"right":i<=o/2?c="left":i>=r-o/2&&(c="right"),gP(c,e,t,n)&&(c="center"),c}function hf(e,t,n){const s=n.yAlign||t.yAlign||pP(e,n);return{xAlign:n.xAlign||t.xAlign||mP(e,t,n,s),yAlign:s}}function _P(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function yP(e,t,n){let{y:s,height:i}=e;return t==="top"?s+=n:t==="bottom"?s-=i+n:s-=i/2,s}function uf(e,t,n,s){const{caretSize:i,caretPadding:o,cornerRadius:r}=e,{xAlign:a,yAlign:l}=n,c=i+o,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:f}=fs(r);let p=_P(t,a);const g=yP(t,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(h,d)+i:a==="right"&&(p+=Math.max(u,f)+i),{x:Qt(p,0,s.width-t.width),y:Qt(g,0,s.height-t.height)}}function qo(e,t,n){const s=ae(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function df(e){return qe([],hn(e))}function bP(e,t,n){return Qn(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function ff(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const C_={beforeTitle:ln,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:ln,beforeBody:ln,beforeLabel:ln,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return at(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ln,afterBody:ln,beforeFooter:ln,footer:ln,afterFooter:ln};function me(e,t,n,s){const i=e[t].call(n,s);return typeof i>"u"?C_[t].call(n,s):i}class pf extends Mn{static positioners=wi;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,o=new e_(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=bP(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,i=me(s,"beforeTitle",this,t),o=me(s,"title",this,t),r=me(s,"afterTitle",this,t);let a=[];return a=qe(a,hn(i)),a=qe(a,hn(o)),a=qe(a,hn(r)),a}getBeforeBody(t,n){return df(me(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,i=[];return vt(t,o=>{const r={before:[],lines:[],after:[]},a=ff(s,o);qe(r.before,hn(me(a,"beforeLabel",this,o))),qe(r.lines,me(a,"label",this,o)),qe(r.after,hn(me(a,"afterLabel",this,o))),i.push(r)}),i}getAfterBody(t,n){return df(me(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,i=me(s,"beforeFooter",this,t),o=me(s,"footer",this,t),r=me(s,"afterFooter",this,t);let a=[];return a=qe(a,hn(i)),a=qe(a,hn(o)),a=qe(a,hn(r)),a}_createItems(t){const n=this._active,s=this.chart.data,i=[],o=[],r=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(fP(this.chart,n[l]));return t.filter&&(a=a.filter((h,u,d)=>t.filter(h,u,d,s))),t.itemSort&&(a=a.sort((h,u)=>t.itemSort(h,u,s))),vt(a,h=>{const u=ff(t.callbacks,h);i.push(me(u,"labelColor",this,h)),o.push(me(u,"labelPointStyle",this,h)),r.push(me(u,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),i=this._active;let o,r=[];if(!i.length)this.opacity!==0&&(o={opacity:0});else{const a=wi[s.position].call(this,i,this._eventPosition);r=this._createItems(s),this.title=this.getTitle(r,s),this.beforeBody=this.getBeforeBody(r,s),this.body=this.getBody(r,s),this.afterBody=this.getAfterBody(r,s),this.footer=this.getFooter(r,s);const l=this._size=cf(this,s),c=Object.assign({},a,l),h=hf(this.chart,s,c),u=uf(s,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,o={opacity:1,x:u.x,y:u.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,i){const o=this.getCaretPosition(t,s,i);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(t,n,s){const{xAlign:i,yAlign:o}=this,{caretSize:r,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:u}=fs(a),{x:d,y:f}=t,{width:p,height:g}=n;let m,y,v,C,w,S;return o==="center"?(w=f+g/2,i==="left"?(m=d,y=m-r,C=w+r,S=w-r):(m=d+p,y=m+r,C=w-r,S=w+r),v=m):(i==="left"?y=d+Math.max(l,h)+r:i==="right"?y=d+p-Math.max(c,u)-r:y=this.caretX,o==="top"?(C=f,w=C-r,m=y-r,v=y+r):(C=f+g,w=C+r,m=y+r,v=y-r),S=C),{x1:m,x2:y,x3:v,y1:C,y2:w,y3:S}}drawTitle(t,n,s){const i=this.title,o=i.length;let r,a,l;if(o){const c=$s(s.rtl,this.x,this.width);for(t.x=qo(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",r=qt(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=r.string,l=0;l<o;++l)n.fillText(i[l],c.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a,l+1===o&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,i,o){const r=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=o,h=qt(o.bodyFont),u=qo(this,"left",o),d=i.x(u),f=l<h.lineHeight?(h.lineHeight-l)/2:0,p=n.y+f;if(o.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=i.leftForLtr(d,c)+c/2,y=p+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,Wl(t,g,m,y),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,Wl(t,g,m,y)}else{t.lineWidth=ct(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const g=i.leftForLtr(d,c),m=i.leftForLtr(i.xPlus(d,1),c-2),y=fs(r.borderRadius);Object.values(y).some(v=>v!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,fo(t,{x:g,y:p,w:c,h:l,radius:y}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),fo(t,{x:m,y:p+1,w:c-2,h:l-2,radius:y}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(g,p,c,l),t.strokeRect(g,p,c,l),t.fillStyle=r.backgroundColor,t.fillRect(m,p+1,c-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:i}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=s,u=qt(s.bodyFont);let d=u.lineHeight,f=0;const p=$s(s.rtl,this.x,this.width),g=function(k){n.fillText(k,p.x(t.x+f),t.y+d/2),t.y+=d+o},m=p.textAlign(r);let y,v,C,w,S,A,E;for(n.textAlign=r,n.textBaseline="middle",n.font=u.string,t.x=qo(this,m,s),n.fillStyle=s.bodyColor,vt(this.beforeBody,g),f=a&&m!=="right"?r==="center"?c/2+h:c+2+h:0,w=0,A=i.length;w<A;++w){for(y=i[w],v=this.labelTextColors[w],n.fillStyle=v,vt(y.before,g),C=y.lines,a&&C.length&&(this._drawColorBox(n,t,w,p,s),d=Math.max(u.lineHeight,l)),S=0,E=C.length;S<E;++S)g(C[S]),d=u.lineHeight;vt(y.after,g)}f=0,d=u.lineHeight,vt(this.afterBody,g),t.y-=o}drawFooter(t,n,s){const i=this.footer,o=i.length;let r,a;if(o){const l=$s(s.rtl,this.x,this.width);for(t.x=qo(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",r=qt(s.footerFont),n.fillStyle=s.footerColor,n.font=r.string,a=0;a<o;++a)n.fillText(i[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+s.footerSpacing}}drawBackground(t,n,s,i){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=t,{width:c,height:h}=s,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=fs(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+u,l),r==="top"&&this.drawCaret(t,n,s,i),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),r==="center"&&o==="right"&&this.drawCaret(t,n,s,i),n.lineTo(a+c,l+h-p),n.quadraticCurveTo(a+c,l+h,a+c-p,l+h),r==="bottom"&&this.drawCaret(t,n,s,i),n.lineTo(a+f,l+h),n.quadraticCurveTo(a,l+h,a,l+h-f),r==="center"&&o==="left"&&this.drawCaret(t,n,s,i),n.lineTo(a,l+u),n.quadraticCurveTo(a,l,a+u,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,i=s&&s.x,o=s&&s.y;if(i||o){const r=wi[t.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=cf(this,t),l=Object.assign({},r,this._size),c=hf(n,t,l),h=uf(t,l,c,n);(i._to!==h.x||o._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const r=ae(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(o,t,i,n),Gm(t,n.textDirection),o.y+=r.top,this.drawTitle(o,t,n),this.drawBody(o,t,n),this.drawFooter(o,t,n),Xm(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!Tr(s,i),r=this._positionChanged(i,n);(o||r)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,o=this._active||[],r=this._getActiveElements(t,o,n,s),a=this._positionChanged(r,t),l=n||!Tr(r,o)||a;return l&&(this._active=r,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,s,i){const o=this.options;if(t.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const r=this.chart.getElementsAtEventForMode(t,o.mode,o,s);return o.reverse&&r.reverse(),r}_positionChanged(t,n){const{caretX:s,caretY:i,options:o}=this,r=wi[o.position].call(this,t,n);return r!==!1&&(s!==r.x||i!==r.y)}}var vP={id:"tooltip",_element:pf,positioners:wi,afterInit(e,t,n){n&&(e.tooltip=new pf({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:C_},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},xP=Object.freeze({__proto__:null,Colors:DM,Decimation:FM,Filler:sP,Legend:cP,SubTitle:dP,Title:uP,Tooltip:vP});const wP=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function CP(e,t,n,s){const i=e.indexOf(t);if(i===-1)return wP(e,t,n,s);const o=e.lastIndexOf(t);return i!==o?n:i}const SP=(e,t)=>e===null?null:Qt(Math.round(e),0,t);function gf(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class EP extends Ss{static id="category";static defaults={ticks:{callback:gf}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:i,label:o}of n)s[i]===o&&s.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(at(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:CP(s,t,J(n,t),this._addedLabels),SP(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,i=[];let o=this.getLabels();o=t===0&&n===o.length-1?o:o.slice(t,n+1),this._valueRange=Math.max(o.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let r=t;r<=n;r++)i.push({value:r});return i}getLabelForValue(t){return gf.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function kP(e,t){const n=[],{bounds:i,step:o,min:r,max:a,precision:l,count:c,maxTicks:h,maxDigits:u,includeBounds:d}=e,f=o||1,p=h-1,{min:g,max:m}=t,y=!at(r),v=!at(a),C=!at(c),w=(m-g)/(u+1);let S=ld((m-g)/p/f)*f,A,E,k,O;if(S<1e-14&&!y&&!v)return[{value:g},{value:m}];O=Math.ceil(m/S)-Math.floor(g/S),O>p&&(S=ld(O*S/p/f)*f),at(l)||(A=Math.pow(10,l),S=Math.ceil(S*A)/A),i==="ticks"?(E=Math.floor(g/S)*S,k=Math.ceil(m/S)*S):(E=g,k=m),y&&v&&o&&lk((a-r)/o,S/1e3)?(O=Math.round(Math.min((a-r)/S,h)),S=(a-r)/O,E=r,k=a):C?(E=y?r:E,k=v?a:k,O=c-1,S=(k-E)/O):(O=(k-E)/S,Wi(O,Math.round(O),S/1e3)?O=Math.round(O):O=Math.ceil(O));const $=Math.max(cd(S),cd(E));A=Math.pow(10,at(l)?$:l),E=Math.round(E*A)/A,k=Math.round(k*A)/A;let G=0;for(y&&(d&&E!==r?(n.push({value:r}),E<r&&G++,Wi(Math.round((E+G*S)*A)/A,r,mf(r,w,e))&&G++):E<r&&G++);G<O;++G){const et=Math.round((E+G*S)*A)/A;if(v&&et>a)break;n.push({value:et})}return v&&d&&k!==a?n.length&&Wi(n[n.length-1].value,a,mf(a,w,e))?n[n.length-1].value=a:n.push({value:a}):(!v||k===a)&&n.push({value:k}),n}function mf(e,t,{horizontal:n,minRotation:s}){const i=Fe(s),o=(n?Math.sin(i):Math.cos(i))||.001,r=.75*t*(""+e).length;return Math.min(t/o,r)}class Or extends Ss{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return at(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:i,max:o}=this;const r=l=>i=n?i:l,a=l=>o=s?o:l;if(t){const l=tn(i),c=tn(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(i===o){let l=o===0?1:Math.abs(o*.05);a(o+l),t||r(i-l)}this.min=i,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},o=this._range||this,r=kP(i,o);return t.bounds==="ticks"&&Rm(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const i=(s-n)/Math.max(t.length-1,1)/2;n-=i,s+=i}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return Io(t,this.chart.options.locale,this.options.ticks.format)}}class TP extends Or{static id="linear";static defaults={ticks:{callback:ha.formatters.numeric}};determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Bt(t)?t:0,this.max=Bt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=Fe(this.options.ticks.minRotation),i=(t?Math.sin(s):Math.cos(s))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,o.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const go=e=>Math.floor(Ln(e)),is=(e,t)=>Math.pow(10,go(e)+t);function _f(e){return e/Math.pow(10,go(e))===1}function yf(e,t,n){const s=Math.pow(10,n),i=Math.floor(e/s);return Math.ceil(t/s)-i}function IP(e,t){const n=t-e;let s=go(n);for(;yf(e,t,s)>10;)s++;for(;yf(e,t,s)<10;)s--;return Math.min(s,go(e))}function MP(e,{min:t,max:n}){t=Ee(e.min,t);const s=[],i=go(t);let o=IP(t,n),r=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=i>o?Math.pow(10,i):0,c=Math.round((t-l)*r)/r,h=Math.floor((t-l)/a/10)*a*10;let u=Math.floor((c-h)/Math.pow(10,o)),d=Ee(e.min,Math.round((l+h+u*Math.pow(10,o))*r)/r);for(;d<n;)s.push({value:d,major:_f(d),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(o++,u=2,r=o>=0?1:r),d=Math.round((l+h+u*Math.pow(10,o))*r)/r;const f=Ee(e.max,d);return s.push({value:f,major:_f(f),significand:u}),s}class PP extends Ss{static id="logarithmic";static defaults={ticks:{callback:ha.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const s=Or.prototype.parse.apply(this,[t,n]);if(s===0){this._zero=!0;return}return Bt(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Bt(t)?Math.max(0,t):null,this.max=Bt(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Bt(this._userMin)&&(this.min=t===is(this.min,0)?is(this.min,-1):is(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let s=this.min,i=this.max;const o=a=>s=t?s:a,r=a=>i=n?i:a;s===i&&(s<=0?(o(1),r(10)):(o(is(s,-1)),r(is(i,1)))),s<=0&&o(is(i,-1)),i<=0&&r(is(s,1)),this.min=s,this.max=i}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},s=MP(n,this);return t.bounds==="ticks"&&Rm(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":Io(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ln(t),this._valueRange=Ln(this.max)-Ln(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ln(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}function Yl(e){const t=e.ticks;if(t.display&&e.display){const n=ae(t.backdropPadding);return J(t.font&&t.font.size,Lt.font.size)+n.height}return 0}function AP(e,t,n){return n=Nt(n)?n:[n],{w:Ek(e,t.string,n),h:n.length*t.lineHeight}}function bf(e,t,n,s,i){return e===s||e===i?{start:t-n/2,end:t+n/2}:e<s||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function RP(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),s=[],i=[],o=e._pointLabels.length,r=e.options.pointLabels,a=r.centerPointLabels?ft/o:0;for(let l=0;l<o;l++){const c=r.setContext(e.getPointLabelContext(l));i[l]=c.padding;const h=e.getPointPosition(l,e.drawingArea+i[l],a),u=qt(c.font),d=AP(e.ctx,u,e._pointLabels[l]);s[l]=d;const f=te(e.getIndexAngle(l)+a),p=Math.round(Xc(f)),g=bf(p,h.x,d.w,0,180),m=bf(p,h.y,d.h,90,270);DP(n,t,f,g,m)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=LP(e,s,i)}function DP(e,t,n,s,i){const o=Math.abs(Math.sin(n)),r=Math.abs(Math.cos(n));let a=0,l=0;s.start<t.l?(a=(t.l-s.start)/o,e.l=Math.min(e.l,t.l-a)):s.end>t.r&&(a=(s.end-t.r)/o,e.r=Math.max(e.r,t.r+a)),i.start<t.t?(l=(t.t-i.start)/r,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/r,e.b=Math.max(e.b,t.b+l))}function OP(e,t,n){const s=e.drawingArea,{extra:i,additionalAngle:o,padding:r,size:a}=n,l=e.getPointPosition(t,s+i+r,o),c=Math.round(Xc(te(l.angle+Ht))),h=WP(l.y,a.h,c),u=FP(c),d=BP(l.x,a.w,u);return{visible:!0,x:l.x,y:h,textAlign:u,left:d,top:h,right:d+a.w,bottom:h+a.h}}function NP(e,t){if(!t)return!0;const{left:n,top:s,right:i,bottom:o}=e;return!(bn({x:n,y:s},t)||bn({x:n,y:o},t)||bn({x:i,y:s},t)||bn({x:i,y:o},t))}function LP(e,t,n){const s=[],i=e._pointLabels.length,o=e.options,{centerPointLabels:r,display:a}=o.pointLabels,l={extra:Yl(o)/2,additionalAngle:r?ft/i:0};let c;for(let h=0;h<i;h++){l.padding=n[h],l.size=t[h];const u=OP(e,h,l);s.push(u),a==="auto"&&(u.visible=NP(u,c),u.visible&&(c=u))}return s}function FP(e){return e===0||e===180?"center":e<180?"left":"right"}function BP(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function WP(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function HP(e,t,n){const{left:s,top:i,right:o,bottom:r}=n,{backdropColor:a}=t;if(!at(a)){const l=fs(t.borderRadius),c=ae(t.backdropPadding);e.fillStyle=a;const h=s-c.left,u=i-c.top,d=o-s+c.width,f=r-i+c.height;Object.values(l).some(p=>p!==0)?(e.beginPath(),fo(e,{x:h,y:u,w:d,h:f,radius:l}),e.fill()):e.fillRect(h,u,d,f)}}function zP(e,t){const{ctx:n,options:{pointLabels:s}}=e;for(let i=t-1;i>=0;i--){const o=e._pointLabelItems[i];if(!o.visible)continue;const r=s.setContext(e.getPointLabelContext(i));HP(n,r,o);const a=qt(r.font),{x:l,y:c,textAlign:h}=o;vs(n,e._pointLabels[i],l,c+a.lineHeight/2,a,{color:r.color,textAlign:h,textBaseline:"middle"})}}function S_(e,t,n,s){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,Ot);else{let o=e.getPointPosition(0,t);i.moveTo(o.x,o.y);for(let r=1;r<s;r++)o=e.getPointPosition(r,t),i.lineTo(o.x,o.y)}}function VP(e,t,n,s,i){const o=e.ctx,r=t.circular,{color:a,lineWidth:l}=t;!r&&!s||!a||!l||n<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(i.dash||[]),o.lineDashOffset=i.dashOffset,o.beginPath(),S_(e,n,r,s),o.closePath(),o.stroke(),o.restore())}function $P(e,t,n){return Qn(e,{label:n,index:t,type:"pointLabel"})}class jP extends Or{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ha.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=ae(Yl(this.options)/2),n=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(n,s)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=Bt(t)&&!isNaN(t)?t:0,this.max=Bt(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Yl(this.options))}generateTickLabels(t){Or.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,s)=>{const i=It(this.options.pointLabels.callback,[n,s],this);return i||i===0?i:""}).filter((n,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?RP(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,s,i){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((s-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,s,i))}getIndexAngle(t){const n=Ot/(this._pointLabels.length||1),s=this.options.startAngle||0;return te(t*n+Fe(s))}getDistanceFromCenterForValue(t){if(at(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(at(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const s=n[t];return $P(this.getContext(),t,s)}}getPointPosition(t,n,s=0){const i=this.getIndexAngle(t)-Ht+s;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:s,right:i,bottom:o}=this._pointLabelItems[t];return{left:n,top:s,right:i,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),S_(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:s,grid:i,border:o}=n,r=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&zP(this,r),i.display&&this.ticks.forEach((h,u)=>{if(u!==0||u===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const d=this.getContext(u),f=i.setContext(d),p=o.setContext(d);VP(this,f,l,r,p)}}),s.display){for(t.save(),a=r-1;a>=0;a--){const h=s.setContext(this.getPointLabelContext(a)),{color:u,lineWidth:d}=h;!d||!u||(t.lineWidth=d,t.strokeStyle=u,t.setLineDash(h.borderDash),t.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,s=n.ticks;if(!s.display)return;const i=this.getIndexAngle(0);let o,r;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=s.setContext(this.getContext(l)),h=qt(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=h.string,r=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const u=ae(c.backdropPadding);t.fillRect(-r/2-u.left,-o-h.size/2-u.top,r+u.width,h.size+u.height)}vs(t,a.label,0,-o,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}const _a={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},be=Object.keys(_a);function vf(e,t){return e-t}function xf(e,t){if(at(t))return null;const n=e._adapter,{parser:s,round:i,isoWeekday:o}=e._parseOpts;let r=t;return typeof s=="function"&&(r=s(r)),Bt(r)||(r=typeof s=="string"?n.parse(r,s):n.parse(r)),r===null?null:(i&&(r=i==="week"&&(Js(o)||o===!0)?n.startOf(r,"isoWeek",o):n.startOf(r,i)),+r)}function wf(e,t,n,s){const i=be.length;for(let o=be.indexOf(e);o<i-1;++o){const r=_a[be[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((n-t)/(a*r.size))<=s)return be[o]}return be[i-1]}function UP(e,t,n,s,i){for(let o=be.length-1;o>=be.indexOf(n);o--){const r=be[o];if(_a[r].common&&e._adapter.diff(i,s,r)>=t-1)return r}return be[n?be.indexOf(n):0]}function YP(e){for(let t=be.indexOf(e)+1,n=be.length;t<n;++t)if(_a[be[t]].common)return be[t]}function Cf(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:i}=Qc(n,t),o=n[s]>=t?n[s]:n[i];e[o]=!0}}function qP(e,t,n,s){const i=e._adapter,o=+i.startOf(t[0].value,s),r=t[t.length-1].value;let a,l;for(a=o;a<=r;a=+i.add(a,1,s))l=n[a],l>=0&&(t[l].major=!0);return t}function Sf(e,t,n){const s=[],i={},o=t.length;let r,a;for(r=0;r<o;++r)a=t[r],i[a]=r,s.push({value:a,major:!1});return o===0||!n?s:qP(e,s,i,n)}class ql extends Ss{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),i=this._adapter=new KT._date(t.adapters.date);i.init(n),Bi(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:xf(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:i,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Bt(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),o=Bt(o)&&!isNaN(o)?o:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const o=this.min,r=this.max,a=dk(i,o,r);return this._unit=n.unit||(s.autoSkip?wf(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):UP(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:YP(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),Sf(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,i,o;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?s=o:s=(o-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;n=Qt(n,0,r),s=Qt(s,0,r),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,i=this.options,o=i.time,r=o.unit||wf(o.minUnit,n,s,this._getLabelCapacity(n)),a=J(i.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=Js(l)||l===!0,h={};let u=n,d,f;if(c&&(u=+t.startOf(u,"isoWeek",l)),u=+t.startOf(u,c?"day":r),t.diff(s,n,r)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+r);const p=i.ticks.source==="data"&&this.getDataTimestamps();for(d=u,f=0;d<s;d=+t.add(d,a,r),f++)Cf(h,d,p);return(d===s||i.bounds==="ticks"||f===1)&&Cf(h,d,p),Object.keys(h).sort(vf).map(g=>+g)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,o=this._unit,r=n||i[o];return this._adapter.format(t,r)}_tickFormatFunction(t,n,s,i){const o=this.options,r=o.ticks.callback;if(r)return It(r,[t,n,s],this);const a=o.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],u=c&&a[c],d=s[n],f=c&&u&&d&&d.major;return this._adapter.format(t,i||(f?u:h))}generateTickLabels(t){let n,s,i;for(n=0,s=t.length;n<s;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,i=Fe(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(i),r=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*o+a*r,h:s*r+a*o}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,o=this._tickFormatFunction(t,0,Sf(this,[t],this._majorUnit),i),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)t.push(xf(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Nm(t.sort(vf))}}function Ko(e,t,n){let s=0,i=e.length-1,o,r,a,l;n?(t>=e[s].pos&&t<=e[i].pos&&({lo:s,hi:i}=yn(e,"pos",t)),{pos:o,time:a}=e[s],{pos:r,time:l}=e[i]):(t>=e[s].time&&t<=e[i].time&&({lo:s,hi:i}=yn(e,"time",t)),{time:o,pos:a}=e[s],{time:r,pos:l}=e[i]);const c=r-o;return c?a+(l-a)*(t-o)/c:a}class KP extends ql{static id="timeseries";static defaults=ql.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Ko(n,this.min),this._tableRange=Ko(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,i=[],o=[];let r,a,l,c,h;for(r=0,a=t.length;r<a;++r)c=t[r],c>=n&&c<=s&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(r=0,a=i.length;r<a;++r)h=i[r+1],l=i[r-1],c=i[r],Math.round((h+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,o)=>i-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Ko(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return Ko(this._table,s*this._tableRange+this._minPos,!0)}}var GP=Object.freeze({__proto__:null,CategoryScale:EP,LinearScale:TP,LogarithmicScale:PP,RadialLinearScale:jP,TimeScale:ql,TimeSeriesScale:KP});const XP=[qT,kM,xP,GP],QP={class:"chart-container"},JP={class:"chart-header"},ZP={class:"chart-controls"},tA={class:"chart-wrapper"},eA=Re({__name:"WorkoutChart",props:{workouts:{},title:{},type:{}},setup(e){Vl.register(...XP);const t=e,n=ye(),s=ye(30);let i=null;qr(()=>{Ur(()=>{o()})}),Bs(()=>t.workouts,()=>{r()},{deep:!0});function o(){if(!n.value)return;const h=n.value.getContext("2d");if(!h)return;const d={type:"line",data:a(),options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"},tooltip:{mode:"index",intersect:!1}},scales:{x:{display:!0,title:{display:!0,text:"Date"},grid:{color:"#F3F4F6"}},y:{display:!0,title:{display:!0,text:l()},beginAtZero:!0,grid:{color:"#F3F4F6"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}};i=new Vl(h,d)}function r(){if(!i)return;const h=a();i.data=h,i.update()}function a(){const h=new Date,u=new Date(h.getTime()-s.value*24*60*60*1e3),d=t.workouts.filter(g=>new Date(g.date)>=u),f=[],p=[];for(let g=new Date(u);g<=h;g.setDate(g.getDate()+1)){const m=g.toISOString().split("T")[0];f.push(new Date(g).toLocaleDateString("en-US",{month:"short",day:"numeric"}));const y=d.find(C=>C.date===m);let v=0;if(y)switch(t.type){case"volume":v=y.exercises.reduce((C,w)=>C+w.sets.reduce((S,A)=>S+A.reps*(A.weight||1),0),0);break;case"frequency":v=y.exercises.length;break;case"progress":v=y.exercises.reduce((C,w)=>C+w.sets.length,0);break}p.push(v)}return{labels:f,datasets:[{label:c(),data:p,borderColor:"#2563EB",backgroundColor:"rgba(37, 99, 235, 0.1)",borderWidth:2,fill:!0,tension:.4,pointBackgroundColor:"#2563EB",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]}}function l(){switch(t.type){case"volume":return"Total Volume (reps  weight)";case"frequency":return"Number of Exercises";case"progress":return"Total Sets";default:return""}}function c(){switch(t.type){case"volume":return"Workout Volume";case"frequency":return"Exercise Count";case"progress":return"Sets Completed";default:return""}}return(h,u)=>(X(),it("div",QP,[R("div",JP,[R("h3",null,dt(h.title),1),R("div",ZP,[Ls(R("select",{"onUpdate:modelValue":u[0]||(u[0]=d=>s.value=d),onChange:r,class:"period-select"},u[1]||(u[1]=[R("option",{value:"7"},"Last 7 days",-1),R("option",{value:"30"},"Last 30 days",-1),R("option",{value:"90"},"Last 90 days",-1)]),544),[[Ws,s.value]])])]),R("div",tA,[R("canvas",{ref_key:"chartCanvas",ref:n},null,512)])]))}}),il=kn(eA,[["__scopeId","data-v-73831bdf"]]),nA={class:"history-page"},sA={class:"history-header"},iA={class:"header-actions"},oA={key:0,class:"history-content"},rA={class:"charts-section"},aA={class:"charts-row"},lA={key:1,class:"empty-history"},cA=Re({__name:"HistoryPage",setup(e){const t=async()=>{const n=await Nl.exportData(),s=new Blob([n],{type:"application/json"}),i=document.createElement("a");i.href=URL.createObjectURL(s),i.download=`workout-history-${new Date().toISOString().split("T")[0]}.json`,i.click(),URL.revokeObjectURL(i.href)};return(n,s)=>{const i=yo("router-link");return X(),it("div",nA,[R("header",sA,[s[1]||(s[1]=R("div",{class:"header-content"},[R("h1",null,"Workout History"),R("p",null,"Track your progress and achievements")],-1)),R("div",iA,[R("button",{onClick:t,class:"export-btn"},[st(yt(Jb),{size:18}),s[0]||(s[0]=We(" Export Data ",-1))])])]),yt(Qe).length>0?(X(),it("div",oA,[R("div",rA,[st(il,{workouts:yt(Qe),title:"Workout Volume Over Time",type:"volume"},null,8,["workouts"]),R("div",aA,[st(il,{workouts:yt(Qe),title:"Exercise Frequency",type:"frequency"},null,8,["workouts"]),st(il,{workouts:yt(Qe),title:"Total Sets Progress",type:"progress"},null,8,["workouts"])])]),st(km,{workouts:yt(Qe)},null,8,["workouts"])])):(X(),it("div",lA,[st(yt(tv),{size:64,class:"empty-icon"}),s[3]||(s[3]=R("h2",null,"No Workout History Yet",-1)),s[4]||(s[4]=R("p",null,"Start tracking your workouts to see your progress over time.",-1)),st(i,{to:"/",class:"start-tracking-btn"},{default:On(()=>s[2]||(s[2]=[We(" Start Your First Workout ",-1)])),_:1,__:[2]})]))])}}}),hA=kn(cA,[["__scopeId","data-v-707b6c96"]]),uA=[{path:"/",name:"Dashboard",component:L1},{path:"/workout/:date?",name:"Workout",component:IE,props:!0},{path:"/history",name:"History",component:hA}],dA=l1({history:FS(),routes:uA});var fA="firebase",pA="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs(fA,pA,"app");const gA={apiKey:"AIzaSyCyWR3hKORNvQz7zLh-MmrFIZl3ytFOHIc",authDomain:"auth-test-7ba42.firebaseapp.com",databaseURL:"https://auth-test-7ba42.firebaseio.com",projectId:"auth-test-7ba42",storageBucket:"auth-test-7ba42.firebasestorage.app",messagingSenderId:"678059289463",appId:"1:678059289463:web:6c341671ac83c81f4d0f72"};Vp(gA);const E_=Vb(rS);E_.use(dA);E_.mount("#app");
